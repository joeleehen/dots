"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9528],{49355:(e,t,i)=>{i.d(t,{A:()=>n});var s=i(61115),a=i(66853);function n(){return{version:(0,s.NC)(a._sf)?2:1}}},81359:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ii});var s=i(79474),a=i(60096),n=i(83648),r=i(44265),o=i(49326),l=i(61444),c=i(22466),d=i(33783),u=i(68913),p=i(21740),m=i(26683),h=i(61115),x=i(66853),y=i(49355),g=i(73306),b=i(13274);const j=(0,s.lazy)((()=>i.e(3938).then(i.bind(i,83938)))),k=(0,s.lazy)((()=>i.e(9913).then(i.bind(i,69913))));function C(e){const t=(0,g.L)(),i=(0,h.NC)(x.kIZ,{loadingValue:!1}),a=(0,y.A)();return t?i?e.uri?(0,b.jsx)(s.Suspense,{fallback:!0,children:(0,b.jsx)(k,{uri:e.uri})}):null:(0,b.jsx)(s.Suspense,{fallback:!0,children:(0,b.jsx)(j,{reason:"Episode page",...a,...e})}):null}const P="dpN5ViPOceUWNB5EQPHN",T="fBEA27lLw_sc60Zjd_qw",v="vBcxPq3E2okwgXOkVPEM",I="CxoSYuAjlcCDSOWnnbJe",f="HCCBXwdFvq6omWW2hR0N",S="bJOPO5Zo7dpjSVDwEpSw",w="TXdDDpokVTyJzDEDWHHf",R="tvj001zNcrC5VUZmTt9c",E="PC5kR03GYecc7syeoC0q",A="YldGldlfaI9myEGXQf9g",N="qJHVIpJn1vLPWsAKfTEZ",L="wSIzjkVlr0Zdy7di2vRm",U="hYS_K1NATGyWt6tCSRqQ",D="hVVaM4pF9arpQ8Nvn2a1",M="zf0Eac1LugsHUacz74Zf",B="TnNaqxbaI0hzhBQZ7wE0",F="zSw1lG1TNe_xm6KTqtCv",_="MlEQDkXnjdKKJueJ9kkB",O="jg0xlyD1yjh0DPNG6eOg",z="QiHXpFb4dLZNOFe5gpp3";var H=i(98891),K=i(35905),$=i(9869),Z=i(80637),V=i(7142);const Q=({cardHeaderText:e,cardBodyText:t,buttonText:i,buttonTarget:s})=>(0,h.NC)(x._Nj)?(0,b.jsxs)("div",{className:A,children:[(0,b.jsxs)("div",{className:N,children:[(0,b.jsx)(H.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:e}),(0,b.jsx)(H.E,{semanticColor:"textBase",children:t})]}),(0,b.jsx)(Z.$,{size:"small",colorSet:"invertedLight",href:(0,l.o_)(s).toURLPath(!0),component:V.v,children:i})]}):null,q=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:a,htmlDescription:n,onExpanded:r,onTimeStampClick:o,playability:l,showHeader:d=!0,spec:u})=>{const p=(0,$.s)(),m=(a||t)&&d,y=(0,s.useCallback)((e=>{const t=u.readMoreButtonFactory();p.logInteraction(e?t.hitUiReveal():t.hitUiHide()),r?.()}),[u,p,r]),g=(0,h.NC)(x.ZK8,{loadingValue:!1});return(0,b.jsxs)(b.Fragment,{children:[m&&(0,b.jsx)(H.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:f,children:c.Ru.get("episode.description-title")}),t&&(0,b.jsx)(Q,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),a&&(0,b.jsx)(K.N,{className:v,onTimeStampClick:o,maxLines:4,onExpanded:y,content:(i||"").trim(),htmlContent:e&&n?n:void 0,enableTimestamps:l.playable,enableAutomaticLinkification:g&&e&&!!n})]})};var W=i(97500),Y=i.n(W),G=i(26972),X=i(82348),J=i(53360),ee=i(37832),te=i(48383),ie=i(66324),se=function(e){return e.DESCRIPTION="description",e.TRANSCRIPT="transcript",e}(se||{});const ae=s.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:i,spec:a}){const n=(0,$.s)(),[r,o]=(0,s.useState)(se.DESCRIPTION),l=(0,ie.v7)(),{ref:d,inView:u}=(0,G.Wx)({threshold:[1],root:l.current,rootMargin:`-${te.uC+1}px 100000px 0px 100000px`}),p=(0,s.useRef)(null),m=(0,s.useCallback)((e=>{p.current=e,d(e)}),[d]);return(0,s.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const i=e-te.uC;t.scrollTop>i&&t.scrollTo({top:i})}),[l,r]),(0,b.jsx)(X.j,{list:(0,b.jsxs)(J.L,{className:Y()(_,{[O]:!u}),ref:m,children:[(0,b.jsx)(ee.Y,{label:c.Ru.get("web-player.episode.description"),sentenceCase:!0,active:r===se.DESCRIPTION,onClick:()=>{const e=a.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),o(se.DESCRIPTION)},className:Y()(z,{[L]:r===se.DESCRIPTION})}),(0,b.jsx)(ee.Y,{label:c.Ru.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===se.TRANSCRIPT,onClick:()=>{const e=a.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),o(se.TRANSCRIPT)},className:Y()(z,{[L]:r===se.TRANSCRIPT})})]}),children:null===e||r===se.DESCRIPTION?t:i})}));var ne=i(87604),re=i(28375),oe=i(40088),le=i(22929),ce=i(78826);const de=(0,s.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:i}){const{spec:s,logger:a}=(0,le.r)(ne.c,{data:{uri:i}}),{isPlaying:n}=(0,oe.P)({uri:i},{featureIdentifier:"episode"}),r=s.timestampLinkFactory();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:D,children:(0,b.jsx)(H.E,{variant:"bodySmall",semanticColor:"textBase",children:c.Ru.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,s)=>{const o=`transcript-section-${s}`;return(0,b.jsxs)("div",{className:U,children:[(0,b.jsx)("button",{className:M,onClick:()=>{t(e.startMs,o),a.logInteraction(n?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:i}))},children:(0,b.jsx)(re.k,{id:o,targetURI:(0,l.o_)(i),fadeOut:!0,children:(0,b.jsx)(H.E,{variant:"marginalBold",semanticColor:"textSubdued",className:B,children:(0,ce.f)(e.startMs)})})}),e.content.map(((e,t)=>(0,b.jsx)(H.E,{variant:"bodySmall",semanticColor:"textBase",className:F,dir:"auto",children:e},`transcript-text-${t}`)))]},o)}))]})}));var ue=i(92507),pe=i(65903),me=i(83011),he=i(30620),xe=i(98678),ye=i(65613),ge=i(54452),be=i(3561),je=i(12146),ke=i(97249);const Ce=({children:e,index:t,ariaRowIndex:i,onTriggerPlay:a,isActive:n,uri:r,spec:o})=>{const l=(0,$.s)(),{pushPopSelected:c,toggleSelected:d,isSelected:u}=(0,s.useContext)(je.m),p=(0,s.useRef)(null),m=(0,be.W)(),h=(0,xe.YQ)((e=>{m({intent:"play",type:"double-click"});const t=l.logInteraction(o.doubleHitPlay({itemToBePlayed:r}));a(e,t)}),ge.dG,{leading:!0,trailing:!1}),x=(0,s.useCallback)((e=>{d(t,e.shiftKey,e.ctrlKey||e.metaKey)}),[d,t]),y=(0,s.useCallback)((e=>{if(!p.current?.contains(e.target))return;const i="ArrowUp"===e.key?-1:1;["ArrowUp","ArrowDown"].includes(e.key)&&(e.shiftKey?c(t,i):d(t+i,!1,!1))}),[c,d,t]),g=u(t),j=g&&u(t-1),k=g&&u(t+1);return(0,b.jsx)(ye.$,{rowIndex:i,"aria-selected":g,children:(0,b.jsx)("div",{"data-testid":"tracklist-row",className:Y()(ke.A.trackListRow,ke.A.trackListRowGrid,{[ke.A.active]:n,[ke.A.selected]:g,[ke.A.isPreviousRowSelected]:j,[ke.A.isNextRowSelected]:k}),onDoubleClick:h,onClick:x,onKeyDown:y,ref:p,children:e})})};var Pe=i(6165),Te=i(98046),ve=i(12010),Ie=i(23556),fe=i(40393),Se=i(30994),we=i(45129),Re=i(75773),Ee=i(25046),Ae=i(1250);const Ne=({uri:e,title:t="",index:i,subtitle:a="",showName:n="",showUri:r="",duration:o=0,start:l,stop:d})=>{const{isActive:u,isPlaying:p,onClick:m}=(0,me.L)({episodeUri:e,start:l,stop:d}),h=(0,s.useCallback)(((e,t)=>{m(t)}),[m]),{spec:x}=(0,le.r)(pe.i,{data:{position:i,reason:"",uri:e}});return(0,b.jsx)(he.pZ,{value:"row",index:i,children:(0,b.jsxs)(Ce,{index:i,ariaRowIndex:i+1,onTriggerPlay:h,isActive:u,spec:x,uri:e,children:[(0,b.jsxs)(we.U,{ariaColIndex:0,children:[(0,b.jsx)(Ie.$,{uri:e,playAriaLabel:c.Ru.get("tracklist.a11y.play",a,n),onClick:h,isPlaying:p,isActive:u,spec:x,children:(0,b.jsx)(fe.a,{children:(0,b.jsx)(ue.M,{className:ke.A.talkIcon,"aria-hidden":!0})})}),(0,b.jsxs)(ve.l,{children:[(0,b.jsx)(Ae.p,{titleText:t,children:t}),(0,b.jsx)(Ee.p,{children:a})]})]}),(0,b.jsx)(Re.o,{ariaColIndex:1,children:(0,b.jsx)(Pe.g,{uri:r,name:n,spec:x,children:(0,b.jsx)("span",{dir:"auto",children:n})})}),(0,b.jsx)(Se.l,{ariaColIndex:2,children:(0,b.jsx)(Te.P,{duration:o,className:ke.A.talkSegmentDuration})})]})})};var Le=i(2884),Ue=i(6084),De=i(40360),Me=i(57689),Be=i(48521),Fe=i(61988),_e=i(12157),Oe=i(32345),ze=i(85438);const He="OYehkMWcGJRKPkByp46K",Ke="uc1bXkrZqrCz0CMK4lBb",$e="qZeibBbA3SVClzEueYND",Ze=({episodeUri:e,index:t,duration:i,start:a,stop:n,name:r,uri:o,artists:l,album:d,playable:u})=>{const{isActive:p,isPlaying:m,onClick:h}=(0,me.L)({episodeUri:e,start:a,stop:n}),x=(0,s.useCallback)(((e,t)=>{h(t)}),[h]),{spec:y}=(0,le.r)(pe.i,{data:{position:t,reason:"",uri:o}});return(0,b.jsx)(he.pZ,{value:"row",index:t,children:(0,b.jsx)(Me.t,{trigger:"right-click",action:"open",menu:(0,b.jsx)(Be.P,{uri:o}),children:(0,b.jsxs)(Fe.w,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:l?.[0].name??""},onTriggerPlay:x,isActive:p,isPlayable:u,spec:y,children:[(0,b.jsxs)(we.U,{ariaColIndex:0,children:[(0,b.jsx)(Ie.$,{uri:o,playAriaLabel:c.Ru.get("tracklist.a11y.play",r,l?.[0].name),onClick:x,isPlaying:m,isActive:p,spec:y,children:(0,b.jsx)(fe.a,{children:(0,b.jsx)("img",{className:Ke,src:d.image,alt:d.name})})}),(0,b.jsxs)(ve.l,{children:[(0,b.jsx)(Ae.p,{titleText:r,children:r}),(0,b.jsx)(Ee.p,{children:(0,b.jsx)(_e.l,{artists:l,spec:y})})]})]}),(0,b.jsx)(Re.o,{ariaColIndex:1,children:(0,b.jsx)(Pe.g,{uri:d.uri,name:d.name,spec:y,children:d.name})}),(0,b.jsxs)(Se.l,{ariaColIndex:2,children:[(0,b.jsx)(ze.d,{uri:o,spec:y}),(0,b.jsx)(Te.P,{duration:i}),(0,b.jsx)(Oe.Y,{spec:y,menu:(0,b.jsx)(Be.P,{uri:o,artists:l}),label:c.Ru.get("more.label.track",r,l?.[0].name)})]})]})})})};var Ve=i(55559),Qe=i(52198);function qe(e,t,i){return e.reduce(((e,s,a)=>((a>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===s.type?e.push(function(e,t,i){return{type:"MUSIC",index:t,uri:i.uri,episodeUri:e,start:i.start,stop:i.stop,duration:i.duration,name:i.track.name,artists:i.track.artists,album:i.track.album,playable:i.track.playable}}(i,a,s)):"TALK"===s.type&&e.push(function(e,t,i){return{type:"TALK",index:t,uri:e,title:i.title,subtitle:i.subtitle,start:i.start,stop:i.stop,duration:i.duration,showUri:i.show.uri,showName:i.show.name}}(i,a,s)),e)),[])}const We=({uri:e,segmentCount:t})=>{const i=(0,Ue.o)(),a=(0,s.useCallback)((async(s,a)=>{const n=Math.ceil(s/2);try{return{items:qe(await i.getSegments(e,n,a),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,i,e]),n=(0,s.useCallback)((t=>{switch(t.type){case"SPACER":return(0,b.jsx)("div",{className:$e},t.id);case"MUSIC":return(0,b.jsx)(Ze,{...t},`${e}-${t.index}`);case"TALK":return(0,b.jsx)(Ne,{...t},`${e}-${t.index}`);default:return(0,De.d)(t)}}),[e]),r=(0,s.useCallback)((e=>({uri:"MUSIC"===e.type?e.uri:""})),[]),o=c.Ru.get("music_and_talk.in_this_episode");return(0,b.jsxs)("div",{children:[(0,b.jsx)(H.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:He,children:o}),(0,b.jsx)(Qe.S4,{ariaLabel:o,hasHeaderRow:!0,rowPlaceholder:Ve.qq,columns:[Le.$.TITLE_AND_ARTIST,Le.$.ALBUM_OR_SHOW,Le.$.DURATION],renderRow:n,fetchTracks:a,resolveItem:r,limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})};var Ye=i(93884),Ge=i(67683);const Xe=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:a,hasMusicAndTalkSegements:n,htmlDescription:r,onExpanded:o,onDescriptionTimestampClick:l,onTranscriptTimestampClick:d,playability:u,segmentCount:p,showUrl:h,transcript:x,uri:y,spec:g})=>{const j=(0,$.s)(),k=(0,s.useMemo)((()=>g.descriptionSectionFactory()),[g]),P=(0,s.useMemo)((()=>k.trackListFactory()),[k]),[T,v]=(0,s.useState)(null),I=(0,s.useCallback)((async e=>{const t=await(0,Ye.Q)(e);v(t)}),[]);(0,s.useEffect)((()=>{x&&x.length>0&&I(x[0].cdnUrl)}),[I,x]);const f=s=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q,{hasDescription:a,contentInformation:t,onTimeStampClick:l,onExpanded:o,description:i,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:u,showHeader:s,spec:k}),n&&(0,b.jsx)(Ge.r,{spec:P,children:(0,b.jsx)(We,{segmentCount:p,uri:y})}),h&&(0,b.jsx)(m.n,{size:"small",className:S,href:h,component:V.v,onClick:()=>{j.logInteraction(k.allEpisodesLinkFactory().hitUiNavigate({destination:h}))},children:c.Ru.get("episode.see_all_episodes")}),(0,b.jsx)(C,{uri:y})]}),w=x&&x?.length>0&&u.playable;return(0,b.jsx)(b.Fragment,{children:w?(0,b.jsx)(ae,{transcriptSections:T,descriptionContent:f(!1),transcriptContent:(0,b.jsx)(de,{transcriptSections:T||[],onTimeStampClick:d,episodeUri:y}),spec:g}):f(!0)})};var Je=i(90801),et=i(12283),tt=i(14137),it=i(81980);const st="activation-trigger-mme",at=({episodeUri:e,showUri:t,isLocked:i,isPlaying:s,isPlayDisabled:a,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o,size:c="large"})=>{const d=(0,it.c)();if((0,tt.V)())return(0,b.jsx)(et.R,{size:c,onClick:o,isPlaying:s,disabled:a,locked:i,ariaPlayLabel:n,ariaPauseLabel:r});const u=(0,b.jsx)(Je.f,{showUri:t,enabled:i,renderInline:!1,children:(0,b.jsx)(et.R,{size:c,onClick:o,isPlaying:s,disabled:a,locked:i,ariaPlayLabel:n,ariaPauseLabel:r})});return d?(0,b.jsx)(re.k,{id:st,targetURI:(0,l.o_)(e),fadeOut:!0,children:u}):u};var nt=i(52770),rt=i(3341),ot=i(53346),lt=i(61691),ct=i(21665),dt=i(66628),ut=i(63147),pt=i(3030),mt=i(99049),ht=i(42311),xt=i(9037),yt=i(99368),gt=i(68664),bt=i(91817),jt=i(34098),kt=i(2338),Ct=i(64647),Pt=i(47873),Tt=i(80156),vt=i(1879),It=i(30415),ft=i(31083),St=i(50859),wt=i(54800),Rt=i(82810),Et=i(42091),At=i(69248);const Nt=({episode:e,onPlayEpisode:t,isPlaying:i,isActive:a,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,spec:d})=>{const{uri:u,playedState:p,contentRating:m,playability:h}=e,x=(0,$.s)(),y=(0,xt.wA)(),[g]=(0,It.S)(1e4,(e=>e?.item?.uri===u)),j=(0,ct.o)((e=>e?.duration)),{badges:k}=(0,St.b)({contentRating:m?.label}),C=(0,s.useCallback)((e=>{!h.playable&&k.nineteen&&(e.stopPropagation(),y((0,yt.Tf)(u||"")))}),[u,h.playable,k.nineteen,y]),P=(0,s.useCallback)((()=>{const e=d.contextMenuButtonFactory().hitUiReveal();x.logInteraction(e)}),[x,d]),T=(0,s.useCallback)(((e,t)=>{(0,Tt.Qv)(t,d.downloadButtonFactory(),x,u)}),[x,d,u]),v=(0,s.useCallback)((e=>{const t=d.saveButtonFactory();x.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u}))}),[x,d,u]),I=!l&&!e.playability.playable,f=c.Ru.get("tracklist.a11y.play",e.name,e.podcast?.name),S=c.Ru.get("tracklist.a11y.pause",e.name,e.podcast?.name),R=e.podcast?.uri,E=(0,Et.j)(),A=(0,Pt.v)(e.uri),N=!l;return(0,b.jsxs)(wt.E,{backgroundColor:o,children:[(0,b.jsxs)(Rt.S,{children:[k.nineteen&&(0,b.jsx)(vt.q,{className:w,size:16}),(0,b.jsx)(ft.j,{fullyPlayed:n,durationMs:a&&j?j:e.duration.milliseconds,releaseDate:si(e.releaseDate?.isoString),resumePositionMs:p.playPositionMilliseconds,isPlaying:i,position:a&&g||void 0})]}),(0,b.jsxs)(Rt.S,{children:[(0,b.jsx)("div",{onClick:C,children:(0,b.jsx)(at,{episodeUri:e.uri,showUri:R,isLocked:l,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:i,isPlayDisabled:I,playButtonPlayLabel:f,playButtonPauseLabel:S,size:E})}),(0,b.jsx)(gt.e,{uri:e.uri,onClick:T,size:E,canDownload:N}),A?(0,b.jsx)(At.g,{uri:e.uri,size:E}):(0,b.jsx)(jt.b,{uri:e.uri,size:E,onClick:v}),(0,b.jsx)(kt.b,{onShow:P,menu:(0,b.jsx)(Ct.b,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:R,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r}),children:(0,b.jsx)(bt.e,{label:c.Ru.get("more.label.context",e.name),size:E})})]})]})};var Lt=i(20370),Ut=i(76390),Dt=i(86682),Mt=i(62914),Bt=i(77394),Ft=i(44727),_t=i(40006),Ot=i(61720),zt=i(10468),Ht=i(68862),Kt=i(7518),$t=i(56516);const Zt=({coverArt:e,name:t})=>{const i=(0,Ht.y)(),s=i===zt.E.SMALL||i===zt.E.XSMALL;return(0,b.jsx)(Kt.b,{images:e,type:ht.c.EPISODE,shape:Kt.u.ROUNDED_CORNERS,title:t,size:s?$t.Qe.SIZE_20:$t.Qe.SIZE_24,className:R})};var Vt=i(98954),Qt=i(98475),qt=i(22933),Wt=i(80236);const Yt=({episode:e,isFullyPlayed:t,setIsFullyPlayed:i,backgroundColor:a,spec:n})=>{const{uri:r,name:o,sharingInfo:d,playedState:u,episodeType:p,releaseDate:m,coverArt:h}=e,x=(0,$.s)(),y=function(e,t,i,s,a){const n=t===mt.I_.Episode;return(0,Ot.hD)(e,s,i,a)?(0,b.jsx)(Ot.Ih,{isMusicAndTalk:n}):n?c.Ru.get("type.showEpisode"):c.Ru.get("type.podcastEpisode")}(r,p||mt.I_.Unknown,u.playPositionMilliseconds,si(m?.isoString),u.state===mt._w.Completed),g=e.podcast?.uri,j=function(e){const t=(0,l.o_)(e);return`/show/${(0,l.cE)(t?.id||"")}`}(g),k=(0,s.useCallback)((()=>{x.logInteraction(n.podcastLinkFactory().hitUiNavigate({destination:j}))}),[x,j,n]),C=e.podcast?.coverArt,P=!!(C&&C.length===h.length&&h.every(((e,t)=>e.url===C[t].url))),v=(0,Ht.y)();return(0,b.jsxs)(Vt.z,{backgroundColor:a,children:[(0,b.jsx)(Dt.h,{children:(0,b.jsx)(Mt.X,{text:o,dragUri:r,dragLabel:o})}),!P&&(0,b.jsx)(Ut.X,{children:(0,b.jsx)(Lt.h,{menu:(0,b.jsx)(Ct.b,{uri:r,sharingInfo:d,showUri:g,contextUri:r,isPlayed:t,onMarkAsPlayed:i}),children:(0,b.jsx)(qt.b,{loading:"eager",name:o,images:h,placeholderType:"episode",shape:qt.u.SQUARE})})}),(0,b.jsxs)(Qt.Y,{children:[(0,b.jsx)(Bt.B,{children:y}),(0,b.jsx)(Lt.h,{menu:(0,b.jsx)(Ct.b,{uri:r,sharingInfo:d,showUri:g,contextUri:r,isPlayed:t,onMarkAsPlayed:i}),children:(0,b.jsx)(Wt.mm,{dragUri:r,dragLabel:o,scaleAtMinWidth:Wt.tw,className:T,children:(0,b.jsx)("span",{"data-testid":"episodeTitle",children:o})})}),(0,b.jsx)(Lt.h,{menu:(0,b.jsx)(Ct.b,{uri:r,sharingInfo:d,showUri:g,contextUri:r,isPlayed:t,onMarkAsPlayed:i}),children:(0,b.jsxs)(_t.default,{to:j,onClick:k,className:E,children:[P&&(0,b.jsx)(Zt,{name:o,coverArt:h}),(0,b.jsx)(Ft.g,{className:v===zt.E.SMALL&&P?"":I,children:(0,b.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})]})})]})]})};var Gt=i(36536),Xt=i(56607),Jt=i(30719),ei=i(65202);const ti=({episode:e})=>{const{uri:t,episodeType:i,description:n,htmlDescription:o,podcastSubscription:c,segmentsCount:p,podcast:m,contentInformation:h,playedState:x,coverArt:y}=e,{spec:g,logger:j}=(0,le.r)(r.g,{data:{uri:t}}),k=(0,Xt.n)(),C=(0,s.useMemo)((()=>g.headerFactory()),[g]),T=(0,s.useMemo)((()=>g.actionBarFactory()),[g]),[v,I]=(0,s.useState)(x.state===mt._w.Completed),f=(0,ot.K)(),S=(0,be.W)(),w=void 0!==p&&p>0,R=(0,tt.V)(),{triggerPlay:E,togglePlay:A,isActive:N}=(0,oe.P)({uri:t,...k?{}:{pages:[{items:[{type:ht.c.EPISODE,uri:t,uid:null,provider:null}]}]}},{featureIdentifier:"episode"}),{isActive:L,isPlaying:U}=(0,lt.te)(t),D=y[0].url,M=(0,rt.Hk)(D||null),B=(0,ct.o)((e=>e?.isPaused??void 0)),F=(0,it.c)(),_=c.isPaywalled&&!c.isUserSubscribed,O=L||N,z=e?{name:e.name,uri:e.uri,mediaTypes:e.mediaTypes,audio:{items:e.audio.items.map((e=>({url:e.url})))}}:null,H=m?{name:m.name,uri:m.uri,trailer:m.trailer,showTypes:m.showTypes}:null,K=(0,nt.C)(z,H),$=(0,s.useCallback)(((e,s,a,n)=>{const r=()=>{B?(n?.("resume"),f.resume()):(n?.("pause"),f.pause())};if(_)return;let o="play";if(!U||0!==e&&s||(o="pause"),S({intent:o,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),i===mt.I_.Episode&&F)u.h.set((()=>({triggerId:a||st,triggerAction:null})));else if(N&&!s)R?r():A({loggingParams:n?.()});else if(L&&!s)r();else{const t=n?.("play");R?K({seekTo:e,loggingParams:t}):E({seekTo:e,loggingParams:t})}}),[_,U,S,t,i,F,L,N,R,B,f,A,K,E]),Z=(0,s.useCallback)((e=>{$(e,!1,void 0,(e=>{const i=g.actionBarFactory().playButtonFactory();let s;return s="pause"===e||U?i.hitPause({itemToBePaused:t}):"resume"===e||O?i.hitResume({itemToBeResumed:t}):i.hitPlay({itemToBePlayed:t}),j.logInteraction(s)}))}),[$,O,U,j,g,t]),V=(0,s.useCallback)((e=>{$(e,!0,void 0,(()=>j.logInteraction(g.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[$,j,g,t]),Q=(0,s.useCallback)(((e,t)=>{$(e,!0,t)}),[$]),q=(0,s.useCallback)((()=>{S({intent:"expand-description",type:"click"})}),[S]),[W,Y]=(0,a.ok)();(0,s.useEffect)((()=>{if(e&&!O&&W.has("t")){const t=W.get("t")||"0",i=1e3*parseInt(t,10);i<=e.duration.milliseconds&&(W.delete("t"),Y(W,{replace:!0}),$(i,!0))}}),[e,$,O,W,Y]);const G=!!n||!!o,X=e.podcast?.uri,J=(0,l.o_)(X)?.toURLPath(!0),ee=(0,Gt.e3)(),te=(0,Gt.cz)();return(0,b.jsxs)("section",{"data-testid":"episode",className:P,children:[(0,b.jsx)(d.Q,{children:(0,pt.L$)({episodeOrChapterName:e.name,showOrAudiobookName:e.podcast?.name??"",type:"Podcast"})}),(0,b.jsx)(Yt,{episode:e,isFullyPlayed:v,setIsFullyPlayed:I,backgroundColor:M,spec:C}),(0,b.jsx)(Nt,{episode:e,onPlayEpisode:Z,isPlaying:U,isActive:O,isFullyPlayed:v,setIsFullyPlayed:I,backgroundColor:M,isLocked:_,spec:T}),(0,b.jsxs)("div",{className:"contentSpacing",children:[(0,b.jsx)(Xe,{transcript:e.transcript,hasDescription:G,contentInformation:h,onDescriptionTimestampClick:V,onTranscriptTimestampClick:Q,onExpanded:q,description:e.description,areHTMLDescriptionsEnabled:!0,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:w,segmentCount:p,uri:e.uri,showUrl:J,spec:g}),ee&&(0,b.jsx)("div",{"data-testid":"episode-discovery-list-to-be-added"}),te&&(0,b.jsx)("div",{"data-testid":"episode-discovery-shelf-to-be-added"})]})]})},ii=s.memo((function(){const{episodeId:e=""}=(0,n.g)(),t=(0,l.iM)(e).toURI(),i=(0,dt.d)(t);return i?.isError||!i?.episodeOrChapter?(0,b.jsx)(p.A,{hasError:i?.isError||!1,errorMessage:c.Ru.get("error.not_found.title.podcast")}):(0,ut.Gr)(i.episodeOrChapter)?(0,b.jsx)(Jt.InstrumentedRedirect,{to:(0,l.o_)(i.episodeOrChapter.book?.uri).toURLPath(!0)}):(0,b.jsx)(s.Suspense,{fallback:null,children:(0,b.jsx)(ei.u,{pageId:o.$h.PODCAST_EPISODE,uri:t,children:(0,b.jsx)(ti,{episode:i.episodeOrChapter})})})}));function si(e){return e?.replace(/T.*/,"")||""}},3341:(e,t,i)=>{i.d(t,{Hk:()=>a.H,z6:()=>s.z});i(98251);var s=i(63479),a=i(42341)}}]);
//# sourceMappingURL=xpui-routes-episode.js.map