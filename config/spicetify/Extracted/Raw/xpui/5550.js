"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5550],{7650:(e,t,r)=>{r.d(t,{p:()=>u});var i=r(79474),a=r(9037),n=r(72734),l=r(89199),o=r(56607),s=r(70105),c=r(84423),d=r(13274);const u=i.memo((function({uri:e,divider:t,removeLabel:r}){const u=(0,a.wA)(),p=!(0,o.n)(),g=(0,s.t)(),y=(0,i.useCallback)((async()=>{u((0,c.aw)(e,!0))}),[u,e]);return(0,d.jsx)(l.D,{role:"menuitem",divider:t,disabled:p&&!g?.getCapabilities().canModifyOffline,onClick:y,leadingIcon:(0,d.jsx)(n.k,{semanticColor:"textBrightAccent",size:"small"}),children:r})}))},36931:(e,t,r)=>{r.d(t,{P:()=>y});var i=r(79474),a=r(22466),n=r(6174),l=r(30620),o=r(54053),s=r(39186),c=r(42311),d=r(10266),u=r(36411),p=r(7650),g=r(13274);const y=i.memo((function({uri:e,artistUri:t,canPin:r=o.oT.NO,isPinned:i=!1,canRemove:y=!1}){const{spec:m}=(0,s.o)(e);return(0,g.jsx)(l.pZ,{value:"album",children:(0,g.jsxs)(n.W,{children:[y&&(0,g.jsx)(p.p,{uri:e,removeLabel:a.Ru.get("contextmenu.remove-from-library")}),t&&(0,g.jsx)(d.zI,{spec:m,divider:"after",uri:t,displayText:a.Ru.get("contextmenu.go-to-artist-radio")}),r!==o.oT.NO&&(0,g.jsx)(u.k,{uri:e,canPin:r,isPinned:i,type:c.c.PRE_RELEASE_ALBUM,spec:m}),(0,g.jsx)(d.mP,{uri:e,spec:m,displayText:a.Ru.get("context-menu.copy-album-link")}),(0,g.jsx)(d.q0,{spec:m,divider:"before",uri:e})]})})}))},39031:(e,t,r)=>{r.d(t,{e:()=>l});var i=r(74686);const a="fRZRXRIV2YBCFLYgwDAr";var n=r(13274);const l=({iconSize:e=64,...t})=>(0,n.jsx)("div",{className:a,children:(0,n.jsx)(i.E,{iconSize:e,...t,semanticColor:"textBrightAccent","aria-hidden":!0})})},55550:(e,t,r)=>{r.d(t,{A:()=>In,YourLibraryX:()=>oo,q:()=>jn});var i=r(79474),a=r(97500),n=r.n(a),l=r(96131),o=r(9037),s=r(98678),c=r(86892),d=r(61115),u=r(85029),p=r(20370),g=r(6174),y=r(30620),m=r(54053),x=r(39186),b=r(10266),f=r(13274);const h=i.memo((function({folderUri:e,onCreateCallback:t}){const r=e?{after:{uri:e}}:{before:"start"},{spec:i}=(0,x.o)(e??m.gv);return(0,f.jsx)(y.pZ,{value:"folder",children:(0,f.jsxs)(g.W,{children:[(0,f.jsx)(b.G,{position:r,onCreateCallback:t,spec:i}),(0,f.jsx)(b.jg,{position:r,onCreateCallback:t,spec:i})]})})}));var S=r(80404),C=r(66853),v=r(80602);var w=r(73075),P=r.n(w),T=r(3936),R=r(5620),A=r(78331),D=r(61078),I=r(7314),j=r(42311);var L=r(89463),O=r(71835),E=r(34124),F=r(57958),N=r(13966);r(36805),r(4563),r(79606),r(98211),r(24164),r(79499),r(49271);const k=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","Hyper","Super","Enter","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4","ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck","Key11","Key12","AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute","SpeechCorrectionList","SpeechInputToggle","LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]);function M(e,t){const[r,a]=(0,i.useState)(""),n=(0,i.useRef)(r);n.current=r;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const r=e.current;if(!r||!t)return a(""),()=>{};const i=e=>{const t="Backspace"===e.key,r=" "===e.key,i=e.metaKey||e.ctrlKey,o=e.target instanceof HTMLElement&&e.target?.matches("input, textarea, [contenteditable]"),s=e.isComposing||229===e.keyCode,c=(d=e.key,k.has(d)&&!t);var d;const u=r&&!n.current,p=t&&!n.current;if(i||o||s||c||u||p)return;(t&&n.current||r)&&(e.preventDefault(),e.stopPropagation()),a((r=>t?r.slice(0,-1):r+e.key)),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>a("")),1e3)};return r.addEventListener("keydown",i,!0),()=>{r.removeEventListener("keydown",i,!0),l.current&&clearTimeout(l.current)}}),[e,t]),r}const B=(0,i.createContext)({setTypeaheadResult:({uid:e,str:t})=>{if(e||t)throw new Error("setTypeaheadResult must be used within a TypeaheadProvider")},typeaheadResult:{uid:null,str:""}}),U=({children:e,containerRef:t,findMatchingTypeaheadUid:r,isEnabled:a=!0})=>{const[n,l]=(0,i.useState)({uid:null,str:""}),o=(0,i.useMemo)((()=>({typeaheadResult:n,setTypeaheadResult:l})),[n,l]),s=M(t,a),c=(0,i.useRef)(s);c.current=s;const d=(0,i.useRef)(r);return d.current=r,(0,i.useEffect)((()=>{s&&a?d.current(s).then((e=>{s===c.current&&l({uid:e,str:s})})):l({uid:null,str:""})}),[a,s,l]),(0,f.jsx)(B.Provider,{value:o,children:e})},_="Vf3ww2_My5QuwUnbpzhu";var V=r(69207);const W=()=>{const{typeaheadResult:{str:e}}=(0,i.useContext)(B);return e?(0,f.jsx)(V.qb,{className:_,children:e}):null};var H=r(9869),z=r(2075),K=r(22929),X=r(98891),Y=r(63159),G=r(22466),Z=r(61607),J=r(40006);const q="rLYEzyB9ic23aMurRbCh",Q="NDD4b43wDJs8ZEk8nE0N",$="/preferences",ee=({spec:e})=>{const t=(0,A.sy)(),r=(0,H.s)(),a=G.Ru.get("web-player.your-library-x.dsa-message",G.Ru.get("web-player.your-library-x.dsa-message-link")),n=(0,i.useCallback)((()=>{r.logInteraction(e.dsaMessageSettingsLinkFactory().hitUiNavigate({destination:$}))}),[r,e]);return(0,f.jsx)("div",{className:q,children:t?(0,f.jsx)(Z.Zp,{label:(0,f.jsx)(X.E,{children:a}),placement:"right",showDelay:0,children:(0,f.jsx)("div",{className:Q,children:(0,f.jsx)(Y.p,{"aria-label":a})})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{children:(0,f.jsx)(Y.p,{size:"small"})}),(0,f.jsx)(X.E,{as:"p",semanticColor:"textSubdued",children:G.Ru.get("web-player.your-library-x.dsa-message",(0,f.jsx)(J.default,{to:$,onClick:n,search:"?highlight=dsa",children:G.Ru.get("web-player.your-library-x.dsa-message-link")}))})]})})},te="wW9brXu3G3dR9CQ77Tyk",re="sgpkGFrp4dcnre_TJtaI",ie=({className:e})=>(0,f.jsx)("section",{className:n()(te,e),children:(0,f.jsxs)("div",{className:re,children:[(0,f.jsx)(X.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:G.Ru.get("web-player.your-library-x.empty-state-folder-title")}),(0,f.jsx)(X.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:G.Ru.get("web-player.your-library-x.empty-state-folder-subtitle")})]})});var ae=r(20337),ne=r(80637),le=r(7142);const oe="xi3ytXbuSuzCYy5LwjFu",se="OcOr6YadMDDeh_NPgClX",ce="eL94fWmhg6WbrdKZfGEW",de=(0,i.memo)((function(e){const{message:t,title:r,linkTitle:i,linkTo:a,onClick:l,className:o}=e;return(0,f.jsxs)("section",{className:n()(oe,o),children:[(0,f.jsxs)("div",{className:se,children:[(0,f.jsx)(X.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,f.jsx)(X.E,{variant:"bodySmall",semanticColor:"textBase",children:t})]}),(0,f.jsx)("div",{className:ce,children:i&&(a||l)&&(0,f.jsx)(ne.$,{className:ce,as:l?"button":void 0,colorSet:"invertedLight",href:a,onClick:l,component:le.v,size:"small",children:i})})]})}));var ue=r(10520),pe=r(59342);const ge={getTitle:()=>G.Ru.get("action-trigger.create-playlist"),getDescription:()=>G.Ru.get("action-trigger.login-playlist")},ye=({children:e,renderInline:t})=>(0,f.jsx)(ue.y,{id:pe.x9,options:{...ge,renderInline:t},children:e}),me=({className:e})=>{const{createPlaylist:t}=(0,ae.A)(),r=(0,i.useCallback)((()=>{t()}),[t]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(ye,{renderInline:!1,children:(0,f.jsx)(de,{onClick:r,linkTitle:G.Ru.get("web-player.your-library-x.empty-state-playlists-cta"),title:G.Ru.get("web-player.your-library-x.empty-state-playlists-title"),message:G.Ru.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:e})}),(0,f.jsx)(de,{linkTo:"/genre/podcasts-web",linkTitle:G.Ru.get("web-player.your-library-x.empty-state-podcasts-browse"),title:G.Ru.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:G.Ru.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:e})]})},xe="JouuH90_RNAdTj0ZjcCA",be="YtlFVHxvaGSz4vJdDdEa",fe="spFG_i1jkxOkxb1_SaLJ",he="_8ZKfG3dOxfcr9Yyy5cv",Se=({query:e,className:t})=>(0,f.jsxs)("div",{className:n()(xe,t),"data-testid":"no-search-results-view",children:[(0,f.jsx)(X.E,{as:"h1",variant:"bodyMediumBold",className:be,children:G.Ru.get("web-player.your-library-x.empty-results-title-short",(0,f.jsx)("span",{className:fe,children:(0,f.jsx)("span",{className:he,children:e})}))}),(0,f.jsx)(X.E,{as:"h2",variant:"bodySmall",children:G.Ru.get("web-player.your-library-x.empty-results-text-short")})]});var Ce=r(45017);const ve="yrUQENj0tMcKDW5v0mfb",we="jsT0vJ8rWXPMeoFsMdNK",Pe=({onClick:e})=>(0,f.jsxs)("div",{className:ve,children:[(0,f.jsx)("div",{className:"icon",children:(0,f.jsx)(Ce.b,{size:"xlarge",semanticColor:"textBase"})}),(0,f.jsxs)("div",{className:we,children:[(0,f.jsx)(X.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:G.Ru.get("web-player.your-library-x.error-title")}),(0,f.jsx)(X.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:G.Ru.get("web-player.your-library-x.error-body")})]}),(0,f.jsx)("div",{children:(0,f.jsx)(ne.$,{onClick:e,colorSet:"invertedLight",size:"small",children:G.Ru.get("web-player.your-library-x.error-button")})})]}),Te=(0,i.createContext)(null);var Re=r(71969);const Ae=({children:e})=>{const t=function(){const[e,t]=(0,Re.x)("ylx-expanded-folders",[]),r=(0,i.useCallback)((t=>e.includes(t)),[e]),a=(0,i.useCallback)(((r,i)=>{const a=e.indexOf(r);if(i){if(-1!==a)return;t([...e,r])}else{if(-1===a)return;t(e.filter((e=>e!==r)))}}),[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:a}}();return(0,f.jsx)(Te.Provider,{value:t,children:e})},De="main-yourLibraryX-listItemGroup",Ie="main-yourLibraryX-listItemGroupCompact",je="Ks_qLLEMUQzP7ejeQCwQ",Le="main-yourLibraryX-listRowIconWrapper",Oe="vR1zUcAr6PBeHIvA_K13",Ee="main-yourLibraryX-isFlattened",Fe="main-yourLibraryX-rowCover",Ne="Pns6F5g4OEwEpdmOWTLg",ke="gOCoOAfYUiOq2RlMCOjr",Me="eldivguzYznZgQoShJbe",Be="rTLczxlwElfe8CeNpuh6",Ue="main-yourLibraryX-libraryItem",_e="pFmiujkSoJU4nVLZNO32",Ve="raKUx1vRBRjpm8xR2bIV",We="jNqzRycGQMLmnhgQNqxy",He="Q955MS3fMIZGQAtvDYCq",ze="cVy6fGx6QtJbCnID7XdB",Ke="main-yourLibraryX-listItem",Xe="IKhOc8pMvjcJEY5EP8GW",Ye=({isScrolled:e})=>(0,f.jsxs)("div",{className:n()(Ue,Ve,{[We]:e}),children:[(0,f.jsx)(X.E,{variant:"marginalBold",semanticColor:"textSubdued",children:G.Ru.get("web-player.your-library-x.expanded-list-header.title")}),(0,f.jsx)(X.E,{variant:"marginalBold",semanticColor:"textSubdued",children:G.Ru.get("web-player.your-library-x.expanded-list-header.date-added")}),(0,f.jsx)(X.E,{variant:"marginalBold",semanticColor:"textSubdued",children:G.Ru.get("web-player.your-library-x.expanded-list-header.played-at")})]});var Ge=r(52193),Ze=r(51001),Je=r(50067),qe=r(70105),Qe=r(21931),$e=r(40613);const et="main-yourLibraryX-libraryOnDrop",tt="as7TWnIA1jnumFte_u0R",rt="main-yourLibraryX-libraryBeforeDrop",it="main-yourLibraryX-libraryAfterDrop",at="V57QBvW1q79gFmT8NBvz",nt={marginBlockEnd:0,willChange:"transform, opacity"},lt=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:o=Qe.Vp,className:s,innerRef:c,index:d=0,spec:u,...p})=>{const g=(0,H.s)(),y=(0,qe.t)(),m=p.selected,x=e?y.getFilterLabel(e):"",b=(0,i.useCallback)((()=>{!e||m&&t?(a(),m&&t&&e?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),m?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitFilter()))}),[e,x,m,t,a,l,d,g,u]),h=(0,i.useCallback)((e=>{e.detail>1||r||b()}),[r,b]),{className:S,dropPosition:C,...v}=(0,$e.A)({allowedMimeTypesByDropPosition:{[Qe.Nz.ON]:o},onLongDragOver:b});return(0,f.jsx)(Je.v,{...p,"aria-label":p["aria-label"],...v,...C===Qe.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(s,S,{[tt]:C===Qe.Nz.ON,[at]:r}),onClick:h,selectedColorSet:C===Qe.Nz.ON?"invertedDark":"invertedLight",secondary:m&&!t,style:nt,ref:c,tabIndex:-1})};var ot=r(74542);const st={marginBlockEnd:0,willChange:"transform, opacity"},ct=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:o=Qe.Vp,className:s,innerRef:c,index:d=0,spec:u,...p})=>{const g=(0,H.s)(),y=(0,qe.t)(),m=p.selected,x=e?y.getFilterLabel(e):"",b=(0,i.useCallback)((()=>{!e||m&&t?(a(),m&&t&&e?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),m?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitFilter()))}),[e,x,m,t,a,l,d,g,u]),h=(0,i.useCallback)((e=>{e.detail>1||r||b()}),[r,b]),{className:S,dropPosition:C,...v}=(0,$e.A)({allowedMimeTypesByDropPosition:{[Qe.Nz.ON]:o},onLongDragOver:b});return(0,f.jsx)(ot.m,{...p,"aria-label":p["aria-label"],...v,...C===Qe.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(s,S,{[tt]:C===Qe.Nz.ON,[at]:r}),onClick:h,style:st,ref:c,tabIndex:-1})};var dt=r(34415);const ut=[dt.fl.TRACKS,dt.fl.LOCAL_TRACKS,dt.fl.ALBUMS,dt.fl.ARTISTS,dt.fl.PLAYLISTS_V2,dt.fl.SHOWS,dt.fl.AUDIOBOOKS,dt.fl.EPISODES,dt.fl.FOLDERS],pt=[dt.fl.TRACKS,dt.fl.LOCAL_TRACKS,dt.fl.ALBUMS,dt.fl.EPISODES,dt.fl.PLAYLISTS_V2,dt.fl.FOLDERS],gt=[dt.fl.TRACKS,dt.fl.LOCAL_TRACKS,dt.fl.ALBUMS,dt.fl.EPISODES,dt.fl.PLAYLISTS_V2,dt.fl.FOLDERS],yt=[{id:"p1",name:"Playlists"},{id:"p2",name:"Podcasts & Shows"},{id:"p3",name:"Artists"},{id:"p4",name:"Albums"}],mt=(0,i.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:r,resetFilterIds:a,className:n,spec:l}){const o=!(t||e),s=o?yt:[...t??[],...e??[]],c=(0,i.useRef)(null),d=(0,i.useCallback)((()=>{(0,Ze.MS)(c.current,c.current?.nextElementSibling instanceof HTMLElement?c.current?.nextElementSibling:null),a()}),[a]);return 0===s.length?null:(0,f.jsxs)(Ge.F,{className:n,ariaLabel:G.Ru.get("web-player.your-library-x.filter_options"),children:[!!t?.length&&(0,f.jsx)(ct,{resetFilterIds:d,toggleFilterId:r,allowedDropTargetMimeTypes:ut,"aria-label":G.Ru.get("web-player.your-library-x.clear_filters"),innerRef:c,spec:l}),s.map(((e,i)=>{const n=t?.includes(e),s=0===i;return(0,f.jsx)(lt,{filterId:e.id,isPrimaryFilter:s,isPlaceholder:o,resetFilterIds:a,toggleFilterId:r,selected:n,spec:l,index:i,children:e.name},e.id)}))]})}));var xt=r(21951);const bt="",ft=(0,i.createContext)({openedFolderUri:bt,pushFolder:()=>{},popFolder:()=>{},resetFolder:()=>{},change:"PUSH"}),ht=({children:e})=>{const{setFilter:t}=(0,i.useContext)(xt.g),[r,a]=(0,Re.x)("opened-folder-uri",bt),n=(0,i.useRef)([r??bt]),l=(0,i.useRef)("PUSH"),o=(0,i.useCallback)((e=>{a(e),t(bt)}),[a,t]),s=(0,i.useCallback)((e=>{n.current.push(e),l.current="PUSH",o(n.current.at(-1))}),[o]),c=(0,i.useCallback)((()=>{n.current.pop();const e=n.current.at(-1);return l.current="POP",o(e),e}),[o]),d=(0,i.useCallback)((()=>{n.current=[bt],o(bt)}),[o]);return(0,f.jsx)(ft.Provider,{value:{openedFolderUri:r,pushFolder:s,popFolder:c,resetFolder:d,change:l.current},children:e})};var St=r(30565),Ct=r(5167),vt=r(3191);const wt=({span:e,onInView:t,marginBottom:r,marginTop:a})=>{const n=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&t()}))}));return n.current&&e.observe(n.current),()=>{e.disconnect()}}),[t]),e<=0?null:(0,f.jsx)("div",{style:{gridColumn:"1/-1",gridRow:`span ${e}`,marginBottom:r,marginTop:a},ref:n,"data-type":"sentinel"},"topSentinel")},Pt=({renderItems:e,nrItems:t,estimatedItemMaxHeight:r,scrollNodeRef:a,nrRowsOverscan:n=5,initalNrRows:l=5,onGridResize:o})=>{const[s,c]=(0,i.useState)({firstRowToRender:0,nrRows:l+n}),d=(0,i.useRef)(0),u=(0,i.useRef)(null),p=(0,i.useRef)(r),g=(0,St.R)(),y=(0,i.useCallback)((()=>{const e=u.current?.querySelector(':scope > *:not([data-type="sentinel"])');p.current=e?e.getBoundingClientRect().height+(g.COLUMN_GRID_GAP||0):p.current}),[g]),m=(0,i.useCallback)((()=>{const e=a.current;if(!e)return;y();const t=Math.floor((e.scrollTop-d.current)/p.current),r=Math.max(t-n,0),i=Math.ceil(e.offsetHeight/p.current)+2*n;r===s.firstRowToRender&&i===s.nrRows||c({firstRowToRender:r,nrRows:i})}),[n,s,a,y]),x=(0,i.useCallback)((({columnCount:r})=>{if(r<=0)return[null];o&&o(r,p.current);const i=Math.ceil(t/r),a=s.firstRowToRender*r,l=s.firstRowToRender+s.nrRows-1,c=Math.min(t-1,(l+1)*r-1),d=p.current*(n-2);return[(0,f.jsx)(wt,{span:s.firstRowToRender,onInView:m,marginBottom:`-${d}px`},`topSentinel-${s.firstRowToRender}`),e(a,c,r),(0,f.jsx)(wt,{span:i-l,onInView:m,marginTop:`-${d}px`},"bottomSentinel-"+(i-l))]}),[t,n,o,m,e,s]);return(0,i.useEffect)((()=>{const e=u.current,t=a.current;e&&t&&(d.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[a]),(0,f.jsx)(vt.E,{useUniformRowHeight:!0,ref:u,render:x,onLayoutChange:y})};var Tt=r(22346),Rt=r(40360),At=r(84423),Dt=r(27513),It=r(81134),jt=r(11854),Lt=r(40088),Ot=r(61691),Et=r(33289),Ft=r(90313),Nt=r(61444),kt=r(81861),Mt=r(19630),Bt=r(76688);const Ut=({iconSize:e="small"})=>(0,f.jsx)("span",{className:Oe,children:(0,f.jsx)(Bt.C,{size:e,semanticColor:"textBrightAccent",className:Le})});var _t=r(51897),Vt=r(81789),Wt=r(96190);const Ht=({children:e,title:t,subtitleSlot:r,isPlaying:i})=>{const a=(0,d.NC)(_t.PH);return(0,f.jsx)(Z.Zp,{label:(0,f.jsxs)("div",{className:n()({"vertical-metrics":a},Be),children:[(0,f.jsxs)("div",{children:[t,r]}),i&&(0,f.jsx)(Ut,{})]}),placement:"right",showDelay:0,children:e})},zt=e=>{const t=(0,i.useRef)(null);return(0,Wt.c0)(e.uri)?(0,f.jsx)(Vt.cW,{parentRef:e.parentRef,api:t,children:(0,f.jsx)(Ht,{...e})}):(0,f.jsx)(Ht,{...e})};var Kt=r(88760),Xt=r(77484),Yt=r(80577);const Gt=({leading:e,subtitle:t,uri:r})=>{const i=`listrow-subtitle-${r}`;return(0,f.jsx)("div",{className:Yt.A.subtitle,children:(0,f.jsxs)(Kt.j,{lineClamp:1,className:Yt.A.link,id:i,dir:"auto",children:[(0,f.jsx)("span",{className:Yt.A.subtitleLeadingWrapper,children:e}),t]})})},Zt=({leading:e,subtitle:t,uri:r})=>{const i=`card-subtitle-${r}`;return(0,f.jsx)("div",{className:Yt.A.subtitle,children:(0,f.jsxs)(Xt.j,{lineClamp:1,className:Yt.A.link,id:i,role:"gridcell",dir:"auto",children:[(0,f.jsx)("span",{className:Yt.A.subtitleLeadingWrapper,children:e}),t]})})};var Jt=r(83648),qt=r(21496),Qt=r(63804),$t=r(27936);var er=r(54311);const tr={state:{referrer:"your_library",preventMoveFocus:!0}};function rr(e,t,r,a){const{filter:n}=(0,i.useContext)(xt.g),{isActive:l}=(0,Ot.l_)(e),o=function(e){const{typeaheadResult:{uid:t,str:r}}=(0,i.useContext)(B);return t===e?r:null}(e),s=!!o,c=(0,$t.W)({uri:e,type:"link"})?(0,er.hF)(t):t,d=(0,i.useRef)(null),u=(0,Jt.Zp)(),p=(0,i.useCallback)((e=>{e.preventDefault(),a?a():c&&u(c,tr)}),[a,u,c]);(0,i.useLayoutEffect)((()=>{s&&d.current?.closest('[role="row"], [role="listitem"]')?.querySelector("button")?.focus({preventScroll:!0})}),[s]);return{isActive:l,onClick:p,contents:n||o?(0,f.jsx)("span",{ref:d,children:(0,f.jsx)(jt.M,{autoEscape:!0,searchWords:[n.trim(),...o?.split(" ")??""],textToHighlight:r})}):r}}const ir=({uri:e,playbackUri:t=e,title:r,menu:i,to:a=(0,Nt.o_)(e)?.toURLPath(!0)||"",handleNavigate:l})=>{const{isActive:o,contents:s}=rr(t,a,r,l),c=`listrow-title-${e}`;return(0,f.jsx)(p.h,{menu:i,children:(0,f.jsx)(qt.d,{id:c,lineClamp:1,className:n()(Yt.A.link,Yt.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",dir:"auto",children:s})})},ar=({uri:e,playbackUri:t=e,title:r,menu:i,to:a=(0,Nt.o_)(e)?.toURLPath(!0)||"",handleNavigate:l})=>{const{isActive:o,onClick:s,contents:c}=rr(t,a,r,l);return(0,f.jsx)(p.h,{menu:i,children:(0,f.jsx)(Qt.Z,{lineClamp:1,className:n()(Yt.A.link,Yt.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",href:a,onClick:s,role:"gridcell",dir:"auto",children:c})})};var nr=r(7535);const lr=[dt.fl.ALBUMS,dt.fl.ARTISTS,dt.fl.PLAYLISTS_V2,dt.fl.SHOWS,dt.fl.FOLDERS,dt.fl.PSEUDO_PLAYLISTS],or=[dt.fl.PLAYLISTS_V2,dt.fl.FOLDERS];var sr=r(92345),cr=r(27101),dr=r(22165);const ur=({isConfirmationForPlaylist:e,onConfirm:t,onClose:r})=>{const i=e?G.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-playlist"):G.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-folder");return(0,f.jsx)(dr.T,{"aria-label":i,titleText:i,descriptionText:e?G.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-playlist"):G.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-folder"),onConfirm:t,onClose:r,confirmText:G.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-text"),confirmLabel:e?G.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-playlist"):G.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-folder"),cancelText:G.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.cancel-button-text"),allowHTML:!0})};function pr({onApplyDrop:e,spec:t,isDropTargetPinned:r}){const a=(0,qe.t)(),{contains:n}=(0,cr.p)("ylpin"),[l,o]=(0,i.useState)(null),s=(0,i.useCallback)((async(t,i)=>{if(r)return void e(t,i);const{[dt.fl.PLAYLISTS_V2]:a=[],[dt.fl.FOLDERS]:l=[]}=t,s=[...a,...l];if(!!s.length&&(await n(...s)).some(Boolean)){if(s.length>1)throw new Error("Reordering multiple pinned items at once is not supported");o({dropData:t,dropPosition:i})}else e(t,i)}),[r,n,e]),c=(0,H.s)();return{applyDropWithUnpinConfirmation:s,unpinConfirmationDialog:l?(0,f.jsx)(ur,{isConfirmationForPlaylist:!l.dropData[dt.fl.FOLDERS]?.length,onClose:()=>o(null),onConfirm:async()=>{const{[dt.fl.PLAYLISTS_V2]:r=[],[dt.fl.FOLDERS]:i=[]}=l.dropData;await a.unpin([...r,...i][0]),t?.dragUnpinItem&&c.logInteraction(t.dragUnpinItem({itemToUnpin:[...r,...i][0]})),e(l.dropData,l.dropPosition),o(null)}}):null}}var gr=r(53900);function yr(){const{dropOriginUri:e,sectionId:t}=(0,i.useContext)(gr.O_);return{dropOriginIsYLX:e===m.gv,entityIsInFolder:t>0}}function mr(){const e=(0,F.g)(),{dropOriginIsYLX:t}=yr();return(0,i.useCallback)((async(r,i)=>{const a=await e.contains(r);if(1!==new Set(a).size)throw new Error("Dropping a mix of newly added and moved playlists is not supported");if(a[0]){if(r.length>1)throw new Error("Moving multiple playlists at once is not supported");t?await e.move({uri:r[0]},i):await e.move({uri:r[0]},i,!0)}else await e.add(r,i)}),[t,e])}function xr({dropTargetUri:e,spec:t,isDropTargetPinned:r}){const a=(0,F.g)(),n=(0,i.useContext)(I.Z),l=(0,H.s)(),o=mr(),s=(0,i.useCallback)((async(i,s)=>{const{[dt.fl.PLAYLISTS_V2]:c=[],[dt.fl.FOLDERS]:[d]=[]}=i,u=s===Qe.Nz.BEFORE?{before:{uri:e}}:{after:{uri:e}};if(r){const e=i[Object.keys(i)[0]][0];if((0,Nt.tb)(e)||(0,Nt.fp)(e)){const t=br((await a.getContents()).items,e);-1===t?await a.add([e],{before:"start"}):t>0&&((0,Nt.tb)(e)?await a.move({uri:e},{before:"start"}):await a.moveFolder({uri:e},{before:"start"}))}else if(!(0,Nt.Z0)(e)){const[t]=await n.contains(e);t||await n.add({uris:[e]})}await n.pin(e,u),l.logInteraction(t.dragPinItem({itemToPin:e}))}else d?await a.moveFolder({uri:d},u):c.length&&await o(c,u);l.logInteraction(t.dragSort())}),[e,r,n,l,t,a,o]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=pr(r?{onApplyDrop:s,spec:t,isDropTargetPinned:r}:{onApplyDrop:s});return{handleDropBeforeOrAfterRootlistItem:(0,i.useCallback)((async(e,t)=>{const{[dt.fl.PLAYLISTS_V2]:r=[],[dt.fl.FOLDERS]:i=[]}=e;if(r.length&&i.length)throw new Error("Dropping a mix of playlists and folders is not supported");if(i.length>1)throw new Error("Dropping multiple folders is not supported");d(e,t)}),[d]),unpinConfirmationDialog:c}}function br(e,t,r=0){for(const i of e)if((0,sr.Af)(i)||(0,sr.sA)(i)){if((0,Nt.B2)(i.uri,t))return r;if((0,sr.sA)(i)){const e=br(i.items,t,r+1);if(-1!==e)return e}}return-1}const fr={state:{referrer:"your_library",preventMoveFocus:!0}};function hr({uri:e,to:t=(0,Nt.o_)(e)?.toURLPath(!0)||"",type:r,handleNavigate:a,dragLabel:n,isPinned:l,canReorder:o,allowedDropTargetDropOnMimeTypes:s=[],onDropTargetDropOn:c,onLongDragOver:d,openDeleteDialog:u,togglePlay:p,isItemInGrid:g,playInsteadOfNavigating:y=!1,isPlaying:x,isActive:b,spec:f,folderDepth:h}){const S=(0,$t.W)({uri:e,type:"link"})?(0,er.hF)(t):t,C=(0,Jt.Zp)(),v=(0,Jt.zy)(),w=(0,i.useCallback)((()=>{C(S,fr)}),[C,S]),P=(0,H.s)(),T=(0,i.useRef)(0),R=(0,i.useRef)(null),A=(0,i.useCallback)((({target:e})=>e instanceof HTMLElement&&!R.current?.contains(e)),[]),D=(0,i.useCallback)((t=>{if(!A(t)){if(t.preventDefault(),t.currentTarget.scrollIntoView({block:"nearest"}),y){if(T.current>Date.now())return;return T.current=Date.now()+300,void(x||(p?.(),P.logInteraction(f.yourLibraryItemFactory().hitPlay({itemToBePlayed:e}))))}a?a():S&&C(S,{...fr,replace:S===v.pathname}),P.logInteraction(f.yourLibraryItemFactory().hitUiNavigate({destination:e}))}}),[A,y,a,S,P,f,e,p,x,C,v.pathname]),I=(0,i.useCallback)((t=>{y||A(t)||p&&(b?x?P.logInteraction(f.yourLibraryItemFactory().doubleHitPause({itemToBePaused:e})):P.logInteraction(f.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:e})):P.logInteraction(f.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:e})),p?.())}),[A,y,p,b,x,P,f,e]),j=(0,i.useCallback)((()=>{P.logInteraction(f.yourLibraryItemFactory().secondaryHitUiReveal())}),[P,f]),{draggable:L,onDragStart:O}=(0,nr.P)({itemUris:[e],itemMimeTypes:[(0,dt.j3)(r)],dragLabelText:n,sectionId:h??0,dropOriginUri:m.gv});let E=[];l?E=lr:o&&(E=or);const F={[Qe.Nz.ON]:s,[Qe.Nz.BEFORE]:E,[Qe.Nz.AFTER]:E},{handleDropBeforeOrAfterRootlistItem:N,unpinConfirmationDialog:k}=xr({dropTargetUri:e,spec:f,isDropTargetPinned:l}),M=(0,i.useCallback)(((e,t)=>{t===Qe.Nz.ON?c?.(e,t):t!==Qe.Nz.BEFORE&&t!==Qe.Nz.AFTER||N(e,t)}),[c,N]),{dropPosition:B,className:U,..._}=(0,$e.A)({uri:e,allowedMimeTypesByDropPosition:F,onDrop:M,onLongDragOver:d??w,reorderDirection:g?"horizontal":"vertical"}),V=(0,i.useCallback)((t=>{t.repeat||A(t)||("Backspace"!==t.key&&"Delete"!==t.key||!u||u(),"Enter"===t.key&&t.shiftKey&&p&&(t.preventDefault(),p()),"Enter"===t.key&&P.logInteraction(f.yourLibraryItemFactory().keyStrokeUiNavigate({destination:e})))}),[A,P,u,f,p,e]),W=(0,Nt.o_)(v.pathname,{parseUnknown:!0})?.toURI();return{onClick:D,onDoubleClick:I,draggable:L&&!!n,onDragStart:O,onKeyDown:V,unpinConfirmationDialog:k,dropPosition:B,dropTargetClassName:U,logRightClick:j,isViewActive:!!W&&(0,Nt.B2)(e,W),itemRef:R,..._}}const Sr=e=>{switch(e){case j.c.ALBUM:return G.Ru.get("web-player.your-library-x.type-album");case j.c.ARTIST:return G.Ru.get("web-player.your-library-x.type-artist");case j.c.FOLDER:return G.Ru.get("web-player.your-library-x.type-folder");case j.c.AUDIOBOOK:return G.Ru.get("web-player.your-library-x.type-audiobook");case j.c.YOUR_EPISODES:case j.c.LOCAL_FILES:case j.c.LIKED_SONGS:case j.c.PLAYLIST:return G.Ru.get("web-player.your-library-x.type-playlist");case j.c.SHOW:return G.Ru.get("web-player.your-library-x.type-show");case j.c.PRE_RELEASE_ALBUM:return G.Ru.get("web-player.your-library-x.type-prerelease-album");case j.c.PRE_RELEASE_BOOK:return G.Ru.get("web-player.your-library-x.type-prerelease-audiobook");default:return(0,Rt.d)(e)}},Cr=e=>{switch(e){case j.c.YOUR_EPISODES:case j.c.LIKED_SONGS:case j.c.LOCAL_FILES:return j.c.PLAYLIST;default:return e}};var vr=r(6893);const wr=i.createContext(!1),Pr=({children:e,isCompact:t})=>(0,f.jsx)(wr.Provider,{value:t,children:e}),Tr=()=>(0,i.useContext)(wr),Rr="eB4weTwpV1CJo1Ycry5o",Ar="TaQop0j2CNkuRamIFPJm",Dr="XbKq21A9yavQTZY4fYcy",Ir="DHzyoCWhWjunaSpGo3fm",jr="R7bnv14gXI2ndBOqFvCf",Lr="eYs_j7mhACuywEjr6wf4",Or="IyHaBob4EvHvpR1d0aMt",Er=({uri:e,to:t=(0,Nt.o_)(e)?.toURLPath(!0)||"",handleNavigate:r,dragLabel:a,name:l,subtitle:o,cover:s,type:c,downloadButton:d,canReorder:u,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:y,onLongDragOver:m,menu:x,leading:b,openDeleteDialog:h,togglePlay:S,isPinned:C,shouldShowType:v,playbackUri:w,isPlaying:P,isActive:T,playInsteadOfNavigating:R,spec:A,index:D,animateClassName:I="",animateState:j,preReleaseIcon:L})=>{const{onClick:O,onDoubleClick:E,draggable:F,onDragStart:N,onKeyDown:k,dropPosition:M,dropTargetClassName:B,unpinConfirmationDialog:U,logRightClick:_,isViewActive:V,itemRef:W,...H}=hr({uri:e,to:t,handleNavigate:r,dragLabel:a,isPinned:C,canReorder:u,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:y,openDeleteDialog:h,onLongDragOver:m,togglePlay:S,isItemInGrid:!0,isPlaying:P,isActive:T,spec:A,playInsteadOfNavigating:R}),z=(0,f.jsx)(ar,{uri:e,title:l,menu:x,handleNavigate:r,playbackUri:w}),K=(0,f.jsx)(Zt,{leading:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(vr.g,{pinned:C}),L,d]}),subtitle:(0,f.jsxs)(f.Fragment,{children:[v&&Sr(c),!!o&&v&&" • ",o]}),uri:e}),X=(0,i.useRef)(null),Y=Tr();let G=(0,f.jsx)(p.h,{menu:x,onShow:_,children:(0,f.jsx)(Mt.E,{uri:e,trigger:Mt.l.OnMouseDown,children:(0,f.jsx)(Et.Z,{id:e,title:z,subtitle:K,media:s,size:"sm",leading:b,className:n()(Rr,{[I]:j}),variant:V?"tinted":void 0,onClick:O,onDoubleClick:E,padding:Ft.CJ,...H})})});return Y&&(G=(0,f.jsx)(zt,{title:z,subtitleSlot:K,uri:e,isPlaying:P,parentRef:X,children:(0,f.jsx)("div",{children:(0,f.jsx)(p.h,{menu:x,onShow:_,children:(0,f.jsx)(Mt.E,{uri:e,trigger:Mt.l.OnMouseDown,children:(0,f.jsx)(Et.Z,{id:e,title:void 0,media:s,size:"sm",className:n()(Rr,Ar,{[I]:j}),variant:V?"tinted":void 0,onClick:O,onDoubleClick:E,padding:Ft.vw,ref:X,...H})})})})})),(0,f.jsxs)(f.Fragment,{children:[U,(0,f.jsx)(kt.W,{draggable:F,onDragStart:N,onKeyDown:k,className:n()(B,{[et]:M===Qe.Nz.ON,[rt]:M===Qe.Nz.BEFORE,[it]:M===Qe.Nz.AFTER}),"aria-selected":T,innerRef:W,"aria-posinset":D,children:G})]})};var Fr=r(77191),Nr=r(7518),kr=r(56516),Mr=r(85504),Br=r(81465),Ur=r(99867),_r=r(12283);const Vr=({name:e,uri:t,togglePlay:r,spec:a,isActive:l,isPlaying:o,size:s})=>{const c=(0,H.s)(),d=(0,i.useCallback)((()=>{l?o?c.logInteraction(a.yourLibraryItemFactory().doubleHitPause({itemToBePaused:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:t})),r()}),[l,o,c,a,r,t]);return(0,f.jsx)("div",{className:n()(jr,{[Or]:o,[Lr]:"small"===s}),role:"gridcell",children:(0,f.jsx)(_r.R,{isPlaying:o,onClick:d,ariaPlayLabel:G.Ru.get("playlist.a11y.play",e),ariaPauseLabel:G.Ru.get("playlist.a11y.pause",e),size:s})})},Wr=(0,i.memo)((function({title:e,type:t,images:r,isCircular:i,color:a,animateState:l,animateClassName:o=""}){const s=(0,Ur._)();return(0,f.jsx)(Nr.b,{fadeIn:!0,images:s(r,48),shape:i?Nr.u.CIRCLE:Nr.u.ROUNDED_CORNERS,size:kr.Qe.SIZE_48,iconSize:"medium",type:t,title:e,className:n()(Yt.A.entityImage,{[o]:l}),color:a,loadingMode:"eager"})})),Hr=(0,i.memo)((function({title:e,type:t,uri:r,images:a,isCircular:n,togglePlay:l,color:o,spec:s,isActive:c,isPlaying:u}){const p=(0,d.NC)(_t.AE),g=Tr(),y=(0,Ur._)(),[m,x]=(0,i.useState)("medium"),b=(0,i.useRef)(null);return(0,Br.w)({onResize:({width:e})=>{x(e<90?"small":"medium")},refOrElement:b}),(0,f.jsx)("div",{className:Ir,ref:b,children:(0,f.jsx)(Fr.M,{images:y(a,250),FallbackComponent:e=>(0,f.jsx)(Mr.s,{semanticColor:"textSubdued",type:t,size:"xxlarge",className:p?Dr:"",...e}),isCircular:n,color:o,loadingMode:"eager",children:l&&!g&&(0,f.jsx)(Vr,{name:e,uri:r,togglePlay:l,spec:s,isActive:c,isPlaying:u,size:m})})})}));var zr=r(35102);const Kr="_ymJNIfklFmogab9uWY1",Xr=({folderDepth:e=0})=>(0,f.jsx)("li",{className:Kr,style:{"--ylx-folder-depth":e}}),Yr=e=>{const{RowVariantComponent:t,uri:r,to:a=(0,Nt.o_)(r)?.toURLPath(!0)||"",handleNavigate:l,folderDepth:o,className:s,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:g,onLongDragOver:y,style:m,openDeleteDialog:x,togglePlay:b,isPlaying:h,isActive:S,type:C,menu:v,name:w,subtitle:P,downloadButton:T,expandFolderButton:R,cover:A,alt:D,addedAt:I,lastPlayedAt:j,shouldShowType:L,playbackUri:O,playInsteadOfNavigating:E,spec:F,nrValidItems:N,index:k,lockedIcon:M,onKeyDown:B,preReleaseIcon:U,..._}=e,{onClick:V,onDoubleClick:W,onDragStart:H,onKeyDown:z,dropPosition:K,dropTargetClassName:X,draggable:Y,unpinConfirmationDialog:G,logRightClick:Z,isViewActive:J,itemRef:q,...Q}=hr({uri:r,to:a,type:C,handleNavigate:l,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:g,onLongDragOver:y,openDeleteDialog:x,togglePlay:b,isPlaying:h,isActive:S,playInsteadOfNavigating:E,spec:F,folderDepth:o}),$=(0,i.useCallback)((e=>{z(e),B?.(e)}),[z,B]);return(0,f.jsxs)(f.Fragment,{children:[G,K===Qe.Nz.BEFORE&&(0,f.jsx)(Xr,{folderDepth:o}),(0,f.jsx)(zr.c,{style:{"--ylx-folder-depth":o,...m},draggable:Y,onDragStart:H,onDoubleClick:W,className:n()(s,X,Ke,{[et]:K===Qe.Nz.ON}),..._,...Q,onKeyDown:$,innerRef:q,"aria-setsize":N,"aria-posinset":k+1,children:(0,f.jsx)(t,{...e,to:a,isActive:S,isViewActive:J,onClick:V,logRightClick:Z,playInsteadOfNavigating:E,parentRef:q})}),K===Qe.Nz.AFTER&&(0,f.jsx)(Xr,{folderDepth:o})]})};function Gr(e){const{uri:t,artists:r}=e,{filter:a}=(0,i.useContext)(xt.g),{isPlaying:n,isActive:l}=(0,Ot.l_)(t),s=(0,o.wA)(),c=(0,i.useCallback)((()=>{s((0,At.aw)(t))}),[s,t]),{togglePlay:d}=(0,Lt.P)({uri:t},{featureIdentifier:"album",referrerIdentifier:"your_library"});return{isPlaying:n,isActive:l,openDeleteDialog:c,togglePlay:d,menu:(0,f.jsx)(Dt.h,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,f.jsx)(jt.M,{searchWords:[a.trim()],textToHighlight:r.at(0)?.name??""}),downloadButton:(0,f.jsx)(It.M,{uri:t,size:"xsmall",className:Yt.A.icon,as:"span"})}}const Zr=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:g}=e,{isPlaying:y,isActive:m,openDeleteDialog:x,togglePlay:b,menu:h,subtitleText:S,downloadButton:C}=Gr(e),v=(0,f.jsx)(Wr,{title:s,type:d,images:o,color:g});return(0,f.jsx)(Yr,{RowVariantComponent:r,uri:l,cover:v,name:s,subtitle:S,downloadButton:C,alt:s,type:d,dragLabel:s,menu:h,togglePlay:b,openDeleteDialog:x,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:y,isActive:m,shouldShowType:t,spec:i,nrValidItems:a,index:n})},Jr=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:o,type:s,color:c}=e,{togglePlay:d,menu:u,subtitleText:p,downloadButton:g,openDeleteDialog:y,isPlaying:m,isActive:x}=Gr(e),b=(0,f.jsx)(Hr,{title:l,type:s,images:n,uri:a,togglePlay:d,color:c,spec:r,isActive:x,isPlaying:m});return(0,f.jsx)(Er,{uri:a,name:l,subtitle:p,menu:u,dragLabel:l,cover:b,downloadButton:g,type:s,togglePlay:d,isPinned:o,shouldShowType:t,openDeleteDialog:y,isPlaying:m,isActive:x,spec:r,index:i})};var qr=r(61877);function Qr(e){const{uri:t}=e,r=(0,o.wA)(),{togglePlay:a}=(0,Lt.P)({uri:t},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),{isPlaying:n,isActive:l}=(0,Ot.l_)(t);return{togglePlay:a,isPlaying:n,isActive:l,openDeleteDialog:(0,i.useCallback)((()=>{r((0,At.aw)(t))}),[r,t]),menu:(0,f.jsx)(qr.t,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const $r=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:g}=e,{togglePlay:y,isPlaying:m,isActive:x,openDeleteDialog:b,menu:h}=Qr(e),S=(0,f.jsx)(Wr,{title:s,type:c,images:o,isCircular:!0,color:g});return(0,f.jsx)(Yr,{RowVariantComponent:r,uri:l,cover:S,name:s,type:c,alt:s,dragLabel:s,menu:h,togglePlay:y,openDeleteDialog:b,addedAt:d,lastPlayedAt:u,isPlaying:m,isActive:x,isPinned:p,shouldShowType:t,spec:i,nrValidItems:a,index:n})},ei=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:o,pinned:s,color:c}=e,{togglePlay:d,menu:u,openDeleteDialog:p,isPlaying:g,isActive:y}=Qr(e),m=(0,f.jsx)(Hr,{title:l,type:o,images:n,uri:a,togglePlay:d,isCircular:!0,color:c,spec:r,isActive:y,isPlaying:g});return(0,f.jsx)(Er,{uri:a,name:l,menu:u,dragLabel:l,cover:m,type:o,togglePlay:d,isPinned:s,shouldShowType:t,openDeleteDialog:p,isPlaying:g,isActive:y,spec:r,index:i})};var ti=r(71175),ri=r(52676);const ii=({locked:e})=>e?(0,f.jsx)(ri.u,{semanticColor:"textSubdued",title:G.Ru.get("mwp.header.content.unavailable"),className:Yt.A.icon,size:"xsmall"}):null;function ai(e){const{uri:t,authorName:r}=e,{filter:a}=(0,i.useContext)(xt.g),n=(0,o.wA)(),{isPlaying:l,isActive:s}=(0,Ot.l_)(t);return{isPlaying:l,isActive:s,openDeleteDialog:(0,i.useCallback)((()=>{n((0,At.aw)(t))}),[n,t]),menu:(0,f.jsx)(ti.p,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,f.jsx)(jt.M,{searchWords:[a.trim()],textToHighlight:r}),downloadButton:(0,f.jsx)(It.M,{uri:t,size:"xsmall",className:Yt.A.icon,as:"span"})}}const ni=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,type:c,pinned:d,addedAt:u,lastPlayedAt:p,color:g}=e,{isPlaying:y,isActive:m,openDeleteDialog:x,menu:b,subtitleText:h,downloadButton:S}=ai(e),C=(0,f.jsx)(Wr,{title:s,type:c,images:o,color:g}),v=(0,f.jsx)(ii,{locked:e.isLocked});return(0,f.jsx)(Yr,{RowVariantComponent:r,uri:l,cover:C,name:s,subtitle:h,alt:s,dragLabel:s,menu:b,openDeleteDialog:x,addedAt:u,lastPlayedAt:p,isPlaying:y,isActive:m,isPinned:d,shouldShowType:t,type:c,spec:i,nrValidItems:a,lockedIcon:v,index:n,downloadButton:S})},li=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:o,pinned:s,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p,isPlaying:g,isActive:y,downloadButton:m}=ai(e),x=(0,f.jsx)(Hr,{title:l,type:o,images:n,uri:a,color:c,spec:r,isActive:y,isPlaying:g});return(0,f.jsx)(Er,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:x,isPinned:s,shouldShowType:t,type:o,openDeleteDialog:p,isPlaying:g,isActive:y,spec:r,index:i,downloadButton:m})};var oi=r(22061),si=r(71662),ci=r(2865),di=r(44862),ui=r(36411),pi=r(67972),gi=r(98026),yi=r(89199);const mi=({uri:e,spec:t})=>{const{togglePlay:r,isPlaying:a,isActive:n}=(0,Lt.P)({uri:e},{featureIdentifier:"folder"}),l=(0,H.s)(),o=(0,i.useCallback)((()=>{r(),t&&l&&(a?l.logInteraction(t.playButtonFactory({uri:e}).hitPause({itemToBePaused:e})):n?l.logInteraction(t.playButtonFactory({uri:e}).hitResume({itemToBeResumed:e})):l.logInteraction(t.playButtonFactory({uri:e}).hitPlay({itemToBePlayed:e})))}),[n,a,l,t,r,e]);return(0,f.jsx)(yi.D,{role:"menuitem",onClick:o,leadingIcon:a?(0,f.jsx)(pi._,{semanticColor:"textSubdued",size:"small"}):(0,f.jsx)(gi.A,{semanticColor:"textSubdued",size:"small"}),children:a?G.Ru.get("pause"):G.Ru.get("play")})},xi=i.memo((function(e){return(0,f.jsx)(y.pZ,{value:"create-folder",children:(0,f.jsx)(mi,{...e})})}));var bi=r(48832);const fi=({uri:e,name:t,divider:r,spec:a,handleRename:n})=>{const l=(0,H.s)(),s=(0,o.wA)(),c=(0,i.useCallback)((()=>{a&&l.logInteraction(a.editButtonFactory({uri:e}).hitUiReveal()),s((0,At.O2)(t,n))}),[s,l,t,n,a,e]);return(0,f.jsx)(yi.D,{role:"menuitem",divider:r,onClick:c,leadingIcon:(0,f.jsx)(bi.G,{semanticColor:"textSubdued",size:"small"}),children:G.Ru.get("contextmenu.rename")})},hi=i.memo((function(e){return(0,f.jsx)(y.pZ,{value:"rename",children:(0,f.jsx)(fi,{...e})})})),Si=i.memo((function({reference:e,name:t="",onRename:r,onCreateCallback:i=(()=>{}),onDeleteCallback:a,canPin:n=m.oT.NO,isPinned:l=!1}){const{spec:o}=(0,x.o)(e.uri),s=(0,ci.Ek)();return(0,f.jsx)(y.pZ,{value:"folder",children:(0,f.jsxs)(g.W,{children:[(0,f.jsx)(hi,{spec:o,uri:e.uri,name:t,handleRename:r}),(0,f.jsx)(b.Gi,{uri:e.uri,divider:"after",onDeleteCallback:a}),(n!==m.oT.NO||l)&&(0,f.jsx)(ui.k,{uri:e.uri,canPin:n,isPinned:l,type:j.c.FOLDER,spec:o}),(0,f.jsx)(b.G,{position:{after:e},onCreateCallback:i,spec:o}),(0,f.jsx)(b.jg,{position:{after:e},onCreateCallback:i,spec:o}),(0,f.jsx)(di.y,{uriToBeAdded:e.uri,isInLibrary:!0,spec:o}),s&&(0,f.jsx)(xi,{uri:e.uri,spec:o})]})})}));var Ci=r(71148),vi=r(66268),wi=r(52106),Pi=r(82542),Ti=r(35091),Ri=r(88480);const Ai=({uri:e})=>{const[t,r]=(0,i.useState)(!1),a=(0,i.useCallback)((()=>{r(!0),setTimeout((()=>{r(!1)}),500)}),[]);return(0,vi.l)(Ci.UV.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&"liked-songs"===e&&a()})),(0,Pi.e)(wi.Lj.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&e===t.data.uri&&a()})),(0,Ti.b)(Ri.tD.OPERATION_COMPLETE,(t=>{"remove"!==t.data.operation&&"end"!==t.data.position?.after&&t.data.position.after?.uri===e&&(0,Nt.fp)(e)&&a()})),{animateState:t,animateClassName:Yt.A.pulse}};var Di=r(20656),Ii=r(55859);function ji(e,t){const{createPlaylistFromAlbum:r,createPlaylistFromTracks:a}=(0,ae.A)(),n=(0,H.s)(),l=(0,F.g)(),o=mr(),s=(0,i.useCallback)((r=>{if(!t)return;const{[dt.fl.PLAYLISTS_V2]:i=[],[dt.fl.FOLDERS]:a=[]}=r,s={after:{uri:t}};i.length&&(o(i,s),n.logInteraction(e.dragSort())),a.length&&(l.moveFolder({uri:a[0]},s),n.logInteraction(e.dragSort()))}),[o,n,l,e,t]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=pr({onApplyDrop:s});return{unpinConfirmationDialog:c,handleDropOnFolder:(0,i.useCallback)((async i=>{if(!t)return;const{[dt.fl.TRACKS]:l=[],[dt.fl.LOCAL_TRACKS]:o=[],[dt.fl.ALBUMS]:s=[],[dt.fl.EPISODES]:c=[],[dt.fl.PLAYLISTS_V2]:u=[],[dt.fl.FOLDERS]:p=[]}=i,g={after:{uri:t}};u.length||p.length?d(i,Qe.Nz.ON):s.length?(r(s[0],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist())):(l.length||o.length||c.length)&&(a([...l,...o,...c],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist()))}),[t,d,r,n,e,a])}}function Li(e,t){const{uri:r,name:a,numberOfFolders:n,numberOfPlaylists:l,pinned:s}=e,{isPlaying:c,isActive:d}=(0,Ot.l_)(r),{pushFolder:u}=(0,i.useContext)(ft),p=(0,o.wA)(),{togglePlay:g}=(0,Lt.P)({uri:r},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),y=(0,o.d4)((e=>e.platform.isDesktop)),{handleDropOnFolder:m,unpinConfirmationDialog:x}=ji(t,r),{renameFolder:b}=(0,Di.ZS)(),h=m,S=[l>0||!n?G.Ru.get("web-player.your-library-x.rows.folder.number-of-playlists",l):null,n>0?G.Ru.get("web-player.your-library-x.rows.folder.number-of-folders",n):null].filter(Ii.P).join(G.Ru.getSeparator()),C=(0,i.useCallback)(((t="")=>{b(e,t)}),[e,b]),v=(0,i.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return{openDeleteDialog:(0,i.useCallback)((()=>{p((0,At.OB)(r))}),[p,r]),togglePlay:y?g:void 0,menu:(0,f.jsx)(Si,{reference:{uri:r},name:a,canPin:e.canPin,isPinned:s,onRename:C}),subtitleText:S,onDropTargetDropOn:h,handleNavigate:v,dropOnFolderUnpinConfirmationDialog:x,isPlaying:c,isActive:d}}const Oi=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:a,index:l})=>{const{uri:o,folderDepth:s,name:c,type:d,isFlattened:u,pinned:p,canReorder:g}=e,{openDeleteDialog:y,togglePlay:m,menu:x,subtitleText:b,onDropTargetDropOn:h,handleNavigate:S,dropOnFolderUnpinConfirmationDialog:C,isPlaying:v,isActive:w}=Li(e,r),[P,T]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,i.useContext)(Te);return[(0,i.useMemo)((()=>t(e)),[t,e]),(0,i.useCallback)((t=>{r(e,t)}),[r,e])]}(o),R=(0,H.s)(),A=(0,i.useCallback)((()=>{T(!0),R.logInteraction(r.yourLibraryItemFactory().dragUiReveal())}),[R,T,r]),D=(0,i.useCallback)((e=>{e.stopPropagation()}),[]),I=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),T(!P),P?R.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiHide()):R.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiReveal())}),[T,P,R,r]),j=(0,i.useCallback)((e=>{"ArrowLeft"===e.key?T(!1):"ArrowRight"===e.key&&T(!0)}),[T]),L=!u&&(0,f.jsx)(oi.H,{"data-skip-in-keyboard-nav":!0,"aria-label":P?G.Ru.get("web-player.your-library-x.collapse-folder"):G.Ru.get("web-player.your-library-x.expand-folder"),iconOnly:si.y,size:"small",condensedAll:!0,onClick:I,onDoubleClick:D,tabIndex:-1,className:n()(Oe,Ee,{[ze]:!P})}),{animateState:O,animateClassName:E}=Ai({uri:o}),F=(0,f.jsx)(Wr,{title:c,type:d,animateState:O,animateClassName:E});return(0,f.jsxs)(f.Fragment,{children:[C,(0,f.jsx)(Yr,{onKeyDown:j,RowVariantComponent:t,uri:o,to:`/folder/${(0,Nt.o_)(o)?.id??""}`,handleNavigate:S,folderDepth:s,cover:F,name:c,subtitle:b,alt:c,dragLabel:c,menu:x,canReorder:g,allowedDropTargetDropOnMimeTypes:gt,onDropTargetDropOn:h,onLongDragOver:A,togglePlay:m,openDeleteDialog:y,addedAt:e.addedAt,lastPlayedAt:e.lastPlayedAt,isPinned:p,shouldShowType:!1,type:d,isPlaying:v,isActive:w,expandFolderButton:L,spec:r,nrValidItems:a,index:l})]})},Ei=({libraryItem:e,spec:t,index:r})=>{const{uri:i,name:a,type:n,pinned:l,canReorder:o}=e,{togglePlay:s,menu:c,subtitleText:d,onDropTargetDropOn:u,handleNavigate:p,openDeleteDialog:g,isPlaying:y,isActive:m}=Li(e,t),{animateState:x,animateClassName:b}=Ai({uri:i}),h=(0,f.jsx)(Hr,{title:a,type:n,uri:i,togglePlay:s,spec:t,isActive:m,isPlaying:y});return(0,f.jsx)(Er,{uri:i,to:`/folder/${(0,Nt.o_)(i)?.id??""}`,handleNavigate:p,cover:h,name:a,subtitle:d,menu:c,dragLabel:a,canReorder:o,allowedDropTargetDropOnMimeTypes:gt,onLongDragOver:p,onDropTargetDropOn:u,togglePlay:s,isPinned:l,shouldShowType:!1,type:n,openDeleteDialog:g,isPlaying:y,isActive:m,spec:t,index:r,animateState:x,animateClassName:b})},Fi=i.memo((function({uri:e,canPin:t,isPinned:r,downloadUri:i}){const{spec:a}=(0,x.o)(e);return(0,f.jsx)(y.pZ,{value:"generic",children:(0,f.jsxs)(g.W,{children:[i?(0,f.jsx)(b.dw,{spec:a,uri:i}):null,t!==m.oT.NO&&(0,f.jsx)(ui.k,{uri:e,canPin:t,isPinned:r,type:j.c.PLAYLIST,spec:a})]})})}));var Ni=r(49865);const ki=[dt.fl.TRACKS,dt.fl.LOCAL_TRACKS];function Mi(e){const{numberOfSongs:t}=e,r="spotify:collection:tracks",{user:a}=(0,o.d4)(Ni.Ht),n=(0,Nt.fH)(a?.id).toURI(),l=n,s=n,{togglePlay:c}=(0,Lt.P)({uri:l},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),d=(0,i.useContext)(I.Z),{isPlaying:u,isActive:p}=(0,Ot.l_)(l),g=(0,i.useCallback)((e=>{const{[dt.fl.TRACKS]:t=[],[dt.fl.LOCAL_TRACKS]:r=[]}=e,i=[...t,...r];i?.length&&d?.add({uris:i})}),[d]);return{isPlaying:u,isActive:p,togglePlay:c,menu:(0,f.jsx)(Fi,{uri:r,canPin:e.canPin,isPinned:e.pinned,downloadUri:s}),downloadButton:(0,f.jsx)(It.M,{uri:s,size:"xsmall",className:Yt.A.icon,as:"span"}),subtitleText:(0,f.jsx)(f.Fragment,{children:G.Ru.get("web-player.your-library-x.rows.liked-songs.subtitle",t)}),onDropTargetDropOn:g,playbackUri:l,uri:r}}const Bi=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{images:l,name:o,type:s,pinned:c,addedAt:d,lastPlayedAt:u,color:p}=e,{isPlaying:g,isActive:y,togglePlay:m,menu:x,subtitleText:b,onDropTargetDropOn:h,playbackUri:S,uri:C,downloadButton:v}=Mi(e),{animateState:w,animateClassName:P}=Ai({uri:"liked-songs"}),T=(0,f.jsx)(Wr,{title:o,type:s,images:l,color:p,animateState:w,animateClassName:P});return(0,f.jsx)(Yr,{RowVariantComponent:r,uri:C,cover:T,name:o,subtitle:b,alt:o,dragLabel:o,menu:x,allowedDropTargetDropOnMimeTypes:ki,onDropTargetDropOn:h,togglePlay:m,addedAt:d,lastPlayedAt:u,isPlaying:g,isActive:y,isPinned:c,shouldShowType:t,type:s,playbackUri:S,downloadButton:v,spec:i,nrValidItems:a,index:n})},Ui=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{images:a,name:n,type:l,pinned:o,color:s}=e,{togglePlay:c,menu:d,subtitleText:u,onDropTargetDropOn:p,playbackUri:g,uri:y,downloadButton:m,isPlaying:x,isActive:b}=Mi(e),{animateState:h,animateClassName:S}=Ai({uri:"liked-songs"}),C=(0,f.jsx)(Hr,{title:n,type:l,images:a,uri:g,togglePlay:c,color:s,spec:r,isActive:b,isPlaying:x});return(0,f.jsx)(Er,{uri:y,name:n,subtitle:u,menu:d,dragLabel:n,allowedDropTargetDropOnMimeTypes:ki,onDropTargetDropOn:p,cover:C,togglePlay:c,isPinned:o,shouldShowType:t,type:l,playbackUri:g,downloadButton:m,isPlaying:x,isActive:b,spec:r,index:i,animateState:h,animateClassName:S})};var _i=r(45331),Vi=r(39031),Wi=r(16832),Hi=r(41122);function zi(e){const{numberOfFiles:t}=e,r=Hi.b,i=(0,Wi.Iu)().uri,{isPlaying:a,isActive:n}=(0,Ot.l_)(r);return{playbackUri:r,uri:i,isPlaying:a,isActive:n,menu:(0,f.jsx)(Fi,{uri:i,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,f.jsx)(_i.F,{size:"xsmall",className:Yt.A.icon,semanticColor:"textBrightAccent"}),subtitleText:G.Ru.get("web-player.your-library-x.rows.local-files.subtitle",t)}}const Ki=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{name:l,addedAt:o,lastPlayedAt:s,type:c,pinned:d}=e,{playbackUri:u,uri:p,isPlaying:g,menu:y,subtitleText:m,downloadButton:x,isActive:b}=zi(e),h=(0,f.jsx)("div",{className:Fe,children:(0,f.jsx)(Vi.e,{iconSize:24,title:l})});return(0,f.jsx)(Yr,{RowVariantComponent:r,uri:p,name:l,subtitle:m,alt:l,dragLabel:l,menu:y,addedAt:o,lastPlayedAt:s,isPinned:d,isPlaying:g,isActive:b,shouldShowType:t,playbackUri:u,downloadButton:x,cover:h,type:c,spec:i,nrValidItems:a,index:n})},Xi=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{name:a,images:n,type:l,pinned:o}=e,{playbackUri:s,uri:c,menu:u,downloadButton:p,subtitleText:g,isPlaying:y,isActive:m}=zi(e),x=(0,d.NC)(_t.AE),b=(0,f.jsx)("div",{className:Ir,children:(0,f.jsx)(Fr.M,{images:n,FallbackComponent:e=>(0,f.jsx)(Vi.e,{size:"xxlarge",className:x?Dr:"",...e})})});return(0,f.jsx)(Er,{uri:c,name:a,subtitle:g,menu:u,cover:b,type:l,playbackUri:s,downloadButton:p,isPinned:o,shouldShowType:t,isPlaying:y,isActive:m,spec:r,index:i})};var Yi=r(26809);const Gi=({index:e,type:t})=>{const r=(0,d.NC)(_t.AE),i=Tr();return(0,f.jsx)(Yi.T,{columnIndex:0,children:(0,f.jsx)(Et.Z,{className:n()(Rr,{[Ar]:i}),media:(0,f.jsx)(Fr.M,{images:[],FallbackComponent:()=>(0,f.jsx)(Mr.s,{type:t,size:"xxlarge",className:r?Dr:"",semanticColor:"textSubdued"}),isCircular:t===j.c.ARTIST}),variant:"naked",id:e,title:"",padding:i?Ft.vw:Ft.CJ})})};var Zi=r(38640),Ji=r(90627),qi=r(92155),Qi=r(90964),$i=r(30945),ea=r(4538),ta=r(37452),ra=r(32441);const ia=i.memo((function({reference:e,isPublished:t,canPin:r=m.oT.NO,isPinned:i=!1,useDialogForUnfollow:a=!1,isInLibrary:n}){const{uri:l}=e,o=(0,Di.J$)(l),s=!!o?.permissions?.isPrivate,c=(0,qi.v)(l)??o?.isPublished??t,{spec:d}=(0,x.o)(l),u=o?.hasSpotifyAudiobooks;return o&&(0,f.jsx)(y.pZ,{value:"playlist",children:(0,f.jsxs)(g.W,{children:[!u&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b.Kx,{spec:d,uris:[l]}),(0,f.jsx)(ea._,{uri:l,spec:d})]}),!s&&(0,f.jsx)(b._,{spec:d,divider:o.isOwnedBySelf?"after":"both",uri:l,isPublished:c}),o.isOwnedBySelf&&(0,f.jsx)(b.TV,{spec:d,uri:l,name:o.name,description:o.description,image:o.images[0]}),!o.isOwnedBySelf&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b.P7,{spec:d,uri:l}),(0,f.jsx)(Ji.ET,{uri:l,useDialog:a,initialState:n})]}),o.isOwnedBySelf&&(0,f.jsx)(b.u5,{spec:d,uri:l}),!u&&(0,f.jsx)(b.dw,{spec:d,uri:l}),(0,f.jsx)(b.G,{position:{after:e},divider:"before",spec:d}),(0,f.jsx)(b.jg,{position:{after:e},spec:d}),o.permissions?.canAdministratePermissions&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b.U7,{spec:d,divider:"before",uri:l,isPrivate:s}),!u&&(0,f.jsx)(ta.n,{uri:l,spec:d})]}),o.permissions?.canCancelMembership&&(0,f.jsx)(ra._,{spec:d,divider:"before",uri:l}),(0,f.jsx)(b.wO,{spec:d,uri:l}),(0,f.jsx)(di.y,{uriToBeAdded:l,isInLibrary:!0,spec:d}),!u&&(0,f.jsx)(Qi.o,{spec:d,uris:[l],isPlaylist:!0}),(r!==m.oT.NO||i)&&(0,f.jsx)(ui.k,{uri:l,canPin:r,isPinned:i,type:j.c.PLAYLIST,spec:d}),(o.isOwnedBySelf||!s)&&(0,f.jsxs)($i.h,{divider:"before",children:[(0,f.jsx)(b.mP,{spec:d,uri:l,displayText:G.Ru.get("contextmenu.share.copy-playlist-link"),isPrivatePlaylist:s}),(0,f.jsx)(b.xo,{spec:d,uri:l,type:j.c.PLAYLIST})]})]})})})),aa=i.memo((function({reference:e,canPin:t=m.oT.NO,isPinned:r=!1}){const{uri:i}=e,{spec:a}=(0,x.o)(i);return(0,f.jsx)(y.pZ,{value:"playlist",children:(0,f.jsxs)(g.W,{children:[(0,f.jsx)(b.G,{position:{after:e},divider:"before",spec:a}),(0,f.jsx)(b.jg,{position:{after:e},spec:a}),t!==m.oT.NO&&(0,f.jsx)(ui.k,{uri:i,canPin:t,isPinned:r,type:j.c.PLAYLIST,spec:a})]})})}));var na=r(62680);const la=()=>(0,i.useContext)(na.w).getCapabilities();function oa(e,t){const{uri:r,isLoading:a,owner:n,pinned:l}=e,s=(0,i.useContext)(Di.wO),{filter:c}=(0,i.useContext)(xt.g),{canAddAudiobooks:d}=la(),u=[dt.fl.TRACKS,dt.fl.LOCAL_TRACKS,dt.fl.ALBUMS,dt.fl.EPISODES],p=d?[dt.fl.AUDIOBOOKS]:[];(0,i.useEffect)((()=>{a&&s.resync(r)}),[s,r,a]);const{togglePlay:y}=(0,Lt.P)({uri:r},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),{isPlaying:m,isActive:x}=(0,Ot.l_)(r),b=(0,o.wA)(),h=(0,H.s)();let S,C=[];const v=(0,i.useCallback)((async e=>{const{[dt.fl.TRACKS]:i=[],[dt.fl.LOCAL_TRACKS]:a=[],[dt.fl.ALBUMS]:n=[],[dt.fl.EPISODES]:l=[],[dt.fl.AUDIOBOOKS]:o=[]}=e,s=[...i,...a,...n,...l,...o];b((0,Zi.io)(r,s)),h.logInteraction(t.yourLibraryItemFactory().dragAddToPlaylist({itemToBeAdded:s.at(0)??"",playlist:r}))}),[b,h,t,r]);e.canAddTo&&(C=e.isEmpty?[...p,...u]:e.isBooklist?p:u,S=v);const w=(0,i.useCallback)((()=>{b((0,At.O)(r))}),[b,r]),P=(0,Wt.c0)(r),T=a&&!e.name;let R;R=P?(0,f.jsx)(aa,{reference:e,canPin:e.canPin,isPinned:l}):T?(0,f.jsx)(g.W,{children:(0,f.jsx)(Ji.ET,{uri:r,initialState:!0})}):(0,f.jsx)(ia,{reference:e,canPin:e.canPin,isPinned:l,useDialogForUnfollow:!0,isInLibrary:!0});const A=(0,f.jsx)(It.M,{uri:r,size:"xsmall",className:Yt.A.icon,as:"span"}),D=(0,Wt.c0)(r)?(0,f.jsx)(f.Fragment,{children:G.Ru.get("ylx.clicktoplay")}):(n.uri,(0,f.jsx)(jt.M,{searchWords:[c.trim()],textToHighlight:n.name}));return{openDeleteDialog:w,togglePlay:e.isBooklist?void 0:y,isPlaying:m,isActive:x,menu:R,downloadButton:A,subtitleText:D,allowedDropTargetDropOnMimeTypes:C,onDropTargetDropOn:S}}const sa=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,folderDepth:s,name:c,type:d,pinned:u,addedAt:p,lastPlayedAt:g,color:y,canReorder:m}=e,{openDeleteDialog:x,togglePlay:b,isPlaying:h,isActive:S,menu:C,downloadButton:v,subtitleText:w,allowedDropTargetDropOnMimeTypes:P,onDropTargetDropOn:T}=oa(e,i),{animateState:R,animateClassName:A}=Ai({uri:l}),D=(0,f.jsx)(Wr,{title:c,type:d,images:o,color:y,animateState:R,animateClassName:A});return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(Yr,{RowVariantComponent:r,uri:l,folderDepth:s,cover:D,name:c,subtitle:w,alt:c,dragLabel:c,menu:C,canReorder:m,allowedDropTargetDropOnMimeTypes:P,onDropTargetDropOn:T,togglePlay:b,openDeleteDialog:x,addedAt:p,lastPlayedAt:g,isPlaying:h,isActive:S,isPinned:u,shouldShowType:t,type:d,downloadButton:v,spec:i,playInsteadOfNavigating:(0,Wt.c0)(l),nrValidItems:a,index:n})})},ca=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:o,pinned:s,color:c,canReorder:d}=e,{togglePlay:u,menu:p,downloadButton:g,subtitleText:y,onDropTargetDropOn:m,allowedDropTargetDropOnMimeTypes:x,openDeleteDialog:b,isPlaying:h,isActive:S}=oa(e,r),{animateState:C,animateClassName:v}=Ai({uri:a}),w=(0,f.jsx)(Hr,{title:l,type:o,images:n,uri:a,togglePlay:u,color:c,spec:r,isActive:S,isPlaying:h});return(0,f.jsx)(Er,{uri:a,name:l,subtitle:y,menu:p,dragLabel:l,canReorder:d,allowedDropTargetDropOnMimeTypes:x,onDropTargetDropOn:m,cover:w,togglePlay:u,isPinned:s,shouldShowType:t,type:o,downloadButton:g,openDeleteDialog:b,isPlaying:h,isActive:S,spec:r,playInsteadOfNavigating:(0,Wt.c0)(a),index:i,animateState:C,animateClassName:v})};var da=r(81759),ua=r(36931),pa=r(7650);const ga=i.memo((function({uri:e,canPin:t=m.oT.NO,isPinned:r=!1,canRemove:i=!1}){const{spec:a}=(0,x.o)(e);return(0,f.jsx)(y.pZ,{value:"audiobook",children:(0,f.jsxs)(g.W,{children:[i&&(0,f.jsx)(pa.p,{uri:e,removeLabel:G.Ru.get("contextmenu.remove-from-library")}),t!==m.oT.NO&&(0,f.jsx)(ui.k,{uri:e,canPin:t,isPinned:r,type:j.c.PRE_RELEASE_BOOK,spec:a}),(0,f.jsx)(b.mP,{uri:e,spec:a,displayText:G.Ru.get("context-menu.copy-book-link")}),(0,f.jsx)(b.q0,{spec:a,divider:"before",uri:e})]})})}));function ya(e){const{uri:t,canPin:r,pinned:a,type:n}=e,{filter:l}=(0,i.useContext)(xt.g),s=(0,o.wA)(),c=(0,i.useCallback)((()=>{s((0,At.aw)(t,!0))}),[s,t]);let d,u="";if(n===j.c.PRE_RELEASE_ALBUM){const i=e.artists?.at(0);u=i?.name??"",d=(0,f.jsx)(ua.P,{uri:t,artistUri:i?.uri,canPin:r,isPinned:a,canRemove:!0})}else u=e.authorName,d=(0,f.jsx)(ga,{uri:t,canPin:r,isPinned:a,canRemove:!0});return{openDeleteDialog:c,menu:d,subtitleText:(0,f.jsx)(jt.M,{searchWords:[l.trim()],textToHighlight:u})}}const ma=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:g}=e,{openDeleteDialog:y,menu:m,subtitleText:x}=ya(e),b=(0,f.jsx)(Wr,{title:s,type:d,images:o,color:g});return(0,f.jsx)(Yr,{RowVariantComponent:r,uri:l,cover:b,name:s,subtitle:x,alt:s,type:d,dragLabel:s,menu:m,openDeleteDialog:y,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:a,index:n,preReleaseIcon:(0,f.jsx)(da.t,{size:"xsmall",className:Yt.A.icon})})},xa=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:o,type:s,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p}=ya(e),g=(0,f.jsx)(Hr,{title:l,type:s,images:n,uri:a,color:c,spec:r,isActive:!1,isPlaying:!1});return(0,f.jsx)(Er,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:g,type:s,isPinned:o,shouldShowType:t,openDeleteDialog:p,isPlaying:!1,isActive:!1,spec:r,index:i,preReleaseIcon:(0,f.jsx)(da.t,{size:"xsmall",className:Yt.A.icon})})};var ba=r(33239);function fa(e){const{uri:t,publisher:r}=e,{filter:a}=(0,i.useContext)(xt.g),n=(0,o.wA)(),{togglePlay:l}=(0,Lt.P)({uri:t},{featureIdentifier:"show",referrerIdentifier:"your_library"}),{isPlaying:s,isActive:c}=(0,Ot.l_)(t);return{isPlaying:s,isActive:c,openDeleteDialog:(0,i.useCallback)((()=>{n((0,At.aw)(t))}),[n,t]),togglePlay:l,menu:(0,f.jsx)(ba.H,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),downloadButton:(0,f.jsx)(It.M,{uri:t,size:"xsmall",className:Yt.A.icon,as:"span"}),subtitleText:(0,f.jsx)(jt.M,{autoEscape:!0,searchWords:[a.trim()],textToHighlight:r})}}const ha=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:g}=e,{isPlaying:y,isActive:m,openDeleteDialog:x,togglePlay:b,menu:h,downloadButton:S,subtitleText:C}=fa(e),v=(0,f.jsx)(Wr,{title:s,type:c,images:o,color:g});return(0,f.jsx)(Yr,{RowVariantComponent:r,uri:l,cover:v,name:s,subtitle:C,alt:s,dragLabel:s,menu:h,togglePlay:b,openDeleteDialog:x,addedAt:d,lastPlayedAt:u,isPlaying:y,isActive:m,isPinned:p,shouldShowType:t,type:c,downloadButton:S,spec:i,nrValidItems:a,index:n})},Sa=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:o,pinned:s,color:c}=e,{togglePlay:d,menu:u,downloadButton:p,subtitleText:g,openDeleteDialog:y,isPlaying:m,isActive:x}=fa(e),b=(0,f.jsx)(Hr,{title:l,type:o,images:n,uri:a,togglePlay:d,color:c,spec:r,isActive:x,isPlaying:m});return(0,f.jsx)(Er,{uri:a,name:l,subtitle:g,menu:u,dragLabel:l,cover:b,togglePlay:d,isPinned:s,shouldShowType:t,type:o,downloadButton:p,openDeleteDialog:y,isPlaying:m,isActive:x,spec:r,index:i})},Ca=[dt.fl.EPISODES];function va(e){const{numberOfDownloadedEpisodes:t}=e,{user:r}=(0,o.d4)(Ni.Ht),a=(0,Nt.fH)(r?.id,"your-episodes").toURI(),n=m.Xn,{togglePlay:l}=(0,Lt.P)({uri:a},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),{isPlaying:s,isActive:c}=(0,Ot.l_)(a),d=(0,i.useContext)(I.Z),u=(0,i.useCallback)((e=>{const{[dt.fl.EPISODES]:t=[]}=e;t?.length&&d?.add({uris:t})}),[d]);return{isPlaying:s,isActive:c,togglePlay:l,menu:(0,f.jsx)(Fi,{uri:n,canPin:e.canPin,isPinned:e.pinned}),downloadButton:t?(0,f.jsx)(_i.F,{size:"xsmall",className:Yt.A.icon,semanticColor:"textBrightAccent"}):null,subtitleText:G.Ru.get("web-player.your-library-x.subtitle-your-episodes"),onDropTargetDropOn:u,playbackUri:a,uri:n}}const wa=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:i,index:a})=>{const{images:n,name:l,type:o,pinned:s,lastPlayedAt:c,addedAt:d,color:u}=e,{isPlaying:p,isActive:g,togglePlay:y,menu:m,downloadButton:x,subtitleText:b,onDropTargetDropOn:h,playbackUri:S,uri:C}=va(e),v=(0,f.jsx)(Wr,{title:l,type:o,images:n,color:u});return(0,f.jsx)(Yr,{RowVariantComponent:t,uri:C,cover:v,name:l,subtitle:b,alt:l,dragLabel:l,menu:m,allowedDropTargetDropOnMimeTypes:Ca,onDropTargetDropOn:h,togglePlay:y,addedAt:d,lastPlayedAt:c,isPlaying:p,isActive:g,isPinned:s,shouldShowType:!1,type:o,downloadButton:x,playbackUri:S,spec:r,nrValidItems:i,index:a})},Pa=({libraryItem:e,spec:t,index:r})=>{const{images:i,name:a,type:n,pinned:l,color:o}=e,{togglePlay:s,menu:c,downloadButton:d,subtitleText:u,onDropTargetDropOn:p,playbackUri:g,uri:y,isPlaying:m,isActive:x}=va(e),b=(0,f.jsx)(Hr,{title:a,type:n,images:i,uri:y,togglePlay:s,color:o,spec:t,isActive:x,isPlaying:m});return(0,f.jsx)(Er,{uri:y,name:a,subtitle:u,menu:c,dragLabel:a,allowedDropTargetDropOnMimeTypes:Ca,onDropTargetDropOn:p,cover:b,togglePlay:s,playbackUri:g,downloadButton:d,isPinned:l,shouldShowType:!1,type:n,isPlaying:m,isActive:x,spec:t,index:r})};function Ta(){const e=(0,d.NC)(C.AEN),[t,r]=(0,Re.x)("ylx-grid-scale",1);return{gridScale:e?t:1,setGridScale:r}}const Ra=(0,Tt.g)(j.c),Aa=(0,i.memo)((function({item:e,primaryFilter:t,spec:r,index:i}){const a={shouldShowType:!(0,Wt.c0)(e.uri)&&Cr(e.type)!==t,spec:r,index:i},n=(0,d.NC)(C.lDH),l=(0,d.NC)(C.H8e);switch(e.type){case j.c.FOLDER:return(0,f.jsx)(Ei,{libraryItem:e,...a});case j.c.ALBUM:return(0,f.jsx)(Jr,{libraryItem:e,...a});case j.c.ARTIST:return(0,f.jsx)(ei,{libraryItem:e,...a});case j.c.AUDIOBOOK:return(0,f.jsx)(li,{libraryItem:e,...a});case j.c.SHOW:return(0,f.jsx)(Sa,{libraryItem:e,...a});case j.c.PLAYLIST:return(0,f.jsx)(ca,{libraryItem:e,...a});case j.c.LIKED_SONGS:return(0,f.jsx)(Ui,{libraryItem:e,...a});case j.c.YOUR_EPISODES:return(0,f.jsx)(Pa,{libraryItem:e,...a});case j.c.LOCAL_FILES:return(0,f.jsx)(Xi,{libraryItem:e,...a});case j.c.PRE_RELEASE_ALBUM:return n?(0,f.jsx)(xa,{libraryItem:e,...a}):null;case j.c.PRE_RELEASE_BOOK:return l?(0,f.jsx)(xa,{libraryItem:e,...a}):null;default:(0,Rt.d)(e)}})),Da=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:n})=>{const{gridScale:l}=Ta(),o=(0,Ct.s1)(Ct.yV.NEW_CARDS,l),s=(0,i.useRef)({}),c=function(){const{gridScale:e}=Ta();return!!(0,d.NC)(C.AEN)&&e<.8}(),u=(0,i.useCallback)((e=>(0,f.jsx)(Gi,{index:e,type:Ra(r)?r:void 0},e)),[r]),p=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>e?(0,f.jsx)(Aa,{item:e,spec:n,primaryFilter:r,index:t+i},e.uri):u(`${t+i}`)))),[e,r,u,n]),g=(0,i.useCallback)(((e,t)=>{s.current={numColumns:e,rowHeight:t}}),[]);return(0,f.jsx)(St.x,{config:o,children:(0,f.jsx)(Pr,{isCompact:c,children:(0,f.jsx)(kt.R,{firstInteractiveIsWrapper:!0,"aria-label":G.Ru.get("web-player.your-library-x.your-library"),"aria-rowcount":Math.round(a/(s.current.numColumns??1)),"aria-colcount":s.current.numColumns,children:(0,f.jsx)(Pt,{renderItems:p,nrItems:a,estimatedItemMaxHeight:250,scrollNodeRef:t,onGridResize:g})})})})};var Ia=r(52e3),ja=r(22194);const La="main-yourLibraryX-header",Oa="U2UDsqt0mNj27p4bm85K",Ea="main-yourLibraryX-collapseButtonWrapper",Fa="main-yourLibraryX-headerContent",Na="main-yourLibraryX-collapseButtonIsCollapsed",ka="main-yourLibraryX-collapseButton",Ma="main-yourLibraryX-button",Ba="ha4xXmMVP7gCvKZh9Ipf",Ua="main-yourLibraryX-iconOnly",_a="main-yourLibraryX-headerIsCollapsed",Va="WYU7SXdABSulyirnmIYb",Wa="DF8qJeKP7CRNb13tJeJg",Ha=({folderUri:e,dropTargetClassName:t,spec:r})=>{const{isCollapsed:a,ylxSidebarState:l,setYlxSidebarState:o,lastUncollapsedYlxSidebarState:s}=(0,A.$)(),c=(0,H.s)(),d=(0,i.useCallback)((()=>{const e=l===A.fX.COLLAPSED?s:A.fX.COLLAPSED;o(e),c.logInteraction(r.hitToggleState({stateBeforeToggle:null!==l?A.fX[l].toLowerCase():"",stateAfterToggle:A.fX[e].toLowerCase()}))}),[l,s,o,c,r]),u=a?Ia.M:ja.A;return(0,f.jsx)(Z.Zp,{label:a?G.Ru.get("web-player.your-library-x.expand-your-library"):G.Ru.get("web-player.your-library-x.collapse-your-library"),placement:a?"right":void 0,children:(0,f.jsx)(oi.H,{"aria-label":a?G.Ru.get("web-player.your-library-x.expand-your-library"):G.Ru.get("web-player.your-library-x.collapse-your-library"),onClick:d,className:n()(Ea,Ma,t),condensed:!0,iconLeading:e||a?void 0:u,iconOnly:e||a?u:void 0,children:!e&&!a&&G.Ru.get("web-player.your-library-x.your-library")})})};var za=r(58431),Ka=r(30010);const Xa=({dropTargetClassName:e,spec:t})=>{const{ylxSidebarState:r,setYlxSidebarState:i}=(0,A.$)(),a=r===A.fX.DEFAULT,l=(0,H.s)();return(0,f.jsx)(Z.Zp,{label:a?G.Ru.get("web-player.your-library-x.show-more"):G.Ru.get("web-player.your-library-x.show-less"),children:(0,f.jsx)(oi.H,{className:n()(Ma,Ua,e),iconOnly:a?za.h:Ka.G,"aria-label":a?G.Ru.get("web-player.your-library-x.enlarge-your-library"):G.Ru.get("web-player.your-library-x.reduce-your-library"),onClick:()=>{i(a?A.fX.EXPANDED:A.fX.DEFAULT),l.logInteraction(t.hitToggleState({stateBeforeToggle:a?"default":"expanded",stateAfterToggle:a?"expanded":"default"}))},size:"small"})})};var Ya=r(97491),Ga=r(2338);const Za=({folderMenu:e,folderName:t,dropTargetClassName:r})=>(0,f.jsx)(Ga.b,{menu:e,children:(0,f.jsx)("span",{children:(0,f.jsx)(Z.Zp,{label:G.Ru.get("more.label.context",t),children:(0,f.jsx)(oi.H,{className:n()(Ma,Ua,r),iconOnly:Ya.x,"aria-haspopup":"menu","aria-label":G.Ru.get("more.label.context",t),size:"small"})})})});var Ja=r(12631),qa=r(79303),Qa=r(56108);const $a=({dropTargetClassName:e,spec:t})=>{const{isGridView:r,setItemsView:i}=(0,Qa.t)(),a=(0,H.s)();return(0,f.jsx)(Z.Zp,{label:r?G.Ru.get("web-player.your-library-x.list-view"):G.Ru.get("web-player.your-library-x.grid-view"),children:(0,f.jsx)(oi.H,{className:n()(Ma,e),iconOnly:r?Ja.N:qa.D,"aria-label":r?G.Ru.get("web-player.your-library-x.list-view"):G.Ru.get("web-player.your-library-x.grid-view"),onClick:()=>{i(r?Qa.X.LIST:Qa.X.GRID),a.logInteraction(t.hitToggleState({stateBeforeToggle:r?"grid":"list",stateAfterToggle:r?"list":"grid"}))},size:"small"})})};var en=r(6372),tn=r(57689),rn=r(79957),an=r(76564),nn=r(14137);const ln=function({folderUri:e,spec:t}){const{createPlaylist:r}=(0,ae.A)(),{createFolder:i}=(0,Di.ZS)(),a=(0,H.s)(),n=(0,nn.V)(),l=e?{after:{uri:e}}:{before:"start"};return(0,f.jsxs)(g.W,{children:[(0,f.jsx)(yi.D,{onClick:()=>{r(void 0,l),a.logInteraction(t.createPlaylistOptionFactory().hitCreatePlaylist())},role:"menuitem",leadingIcon:(0,f.jsx)(rn.u,{size:"small"}),children:G.Ru.get("web-player.your-library-x.create.create-a-new-playlist")}),!n&&(0,f.jsx)(yi.D,{onClick:()=>{i(G.Ru.get("web-player.your-library-x.default_folder_name"),l),a.logInteraction(t.createFolderOptionFactory().hitCreateFolder({uri:""}))},role:"menuitem",leadingIcon:(0,f.jsx)(an.h,{size:"small"}),children:G.Ru.get("web-player.your-library-x.create.create-a-playlist-folder")})]})},on=({className:e="",folderUri:t,tooltipPlacement:r,spec:a})=>{const l=G.Ru.get("web-player.your-library-x.create.button-label"),o=(0,H.s)(),{canAddAudiobooks:s}=la(),{createPlaylistFromAlbum:c,createPlaylistFromTracks:d,createPlaylistFromPlaylist:u}=(0,ae.A)(),{className:p,dropPosition:g,...y}=(0,$e.A)({allowedMimeTypesByDropPosition:{[Qe.Nz.ON]:[dt.fl.TRACKS,dt.fl.EPISODES,dt.fl.ALBUMS,dt.fl.PLAYLISTS_V2,...s?[dt.fl.AUDIOBOOKS]:[]]},onDrop:(0,i.useCallback)((e=>{const{[dt.fl.TRACKS]:r=[],[dt.fl.LOCAL_TRACKS]:i=[],[dt.fl.EPISODES]:a=[],[dt.fl.AUDIOBOOKS]:n=[],[dt.fl.ALBUMS]:l=[],[dt.fl.PLAYLISTS_V2]:o=[]}=e,s=t?{after:{uri:t}}:{before:"start"},p=[...r,...i,...a];n.length>0?d(n,s):p.length?d(p,s):l.length>0?c(l[0],s):o.length>0&&u(o[0],s)}),[c,u,d,t])});return(0,f.jsx)(tn.t,{renderInline:!0,menu:(0,f.jsx)(ln,{folderUri:t,spec:a.createMenuFactory()}),preventScrollingWhileOpen:!1,children:(t,i,s)=>(0,f.jsx)(Z.Zp,{label:l,placement:r,children:(0,f.jsx)(oi.H,{ref:s,iconOnly:en.u,className:n()(e,p,{[tt]:g===Qe.Nz.ON}),"aria-label":l,onClick:e=>{i(e),o.logInteraction(a.hitUiReveal())},size:"small",...y})})})};var sn=r(44720);const cn=({handleNavigateBack:e,parentFolderUri:t,spec:r})=>{const{handleDropBeforeOrAfterRootlistItem:i}=xr({dropTargetUri:t,spec:r}),{dropPosition:a,className:l,...o}=(0,$e.A)({allowedMimeTypesByDropPosition:{[Qe.Nz.ON]:ut},onDrop:async e=>{i(e,Qe.Nz.BEFORE)},onLongDragOver:e});return(0,f.jsx)(Z.Zp,{label:G.Ru.get("web-player.your-library-x.navigate-back-folder"),children:(0,f.jsx)(oi.H,{className:n()(Ma,Ba,l,{[tt]:a===Qe.Nz.ON}),"aria-label":G.Ru.get("web-player.your-library-x.navigate-back-folder"),onClick:e,iconOnly:sn.g,size:"small",...o})})},dn=(0,i.forwardRef)((function({folderUri:e,folderName:t,folderMenu:r,onRename:a,spec:l,className:s},c){const{isActive:d}=(0,Ot.l_)(e??"not-a-folder"),u=(0,o.wA)(),g=(0,H.s)(),y=(0,i.useCallback)((()=>{u((0,At.O2)(t,a)),g.logInteraction(l.hitRenameFolder({uri:e}))}),[u,t,e,g,a,l]);return(0,f.jsx)(Z.Zp,{label:t,showDelay:Z.uF,children:(0,f.jsx)("div",{className:n()(Va,s),children:(0,f.jsx)(p.h,{menu:r,children:(0,f.jsx)(oi.H,{"aria-label":t,onClick:y,size:"small",condensed:!0,className:n()(Ma),ref:c,children:(0,f.jsx)(X.E,{variant:"bodyMediumBold",semanticColor:d?"textBrightAccent":void 0,className:Wa,children:t})})})})})}));var un=r(88610),pn=r(81916),gn=r(46992);const yn="_4JcTGCbNeqSDgdBfKdfy",mn="wB8ig1vfWJiTattGsxKX",xn=()=>{const{syncing:e,percentage:t,currentItem:r,totalItems:a}=function(){const[e,t]=(0,i.useState)({syncing:!1,percentage:0,totalItems:0,currentItem:0}),r=pn.I.UPDATE_TOTAL_PROGRESS,a=(0,i.useCallback)((e=>t(e.data.progress)),[]);return(0,gn.b)(r,a),e}();return e?(0,f.jsxs)("div",{className:yn,children:[(0,f.jsxs)("div",{className:mn,children:[(0,f.jsx)(X.E,{variant:"bodySmallBold",semanticColor:"textBase",children:G.Ru.get("web-player.your-library-x.download-progress-title")}),(0,f.jsx)(X.E,{variant:"bodySmallBold",semanticColor:"textBase",children:G.Ru.get("web-player.your-library-x.download-progress-count-out-of-total",r,a)})]}),(0,f.jsx)(un.z,{value:t})]}):null};var bn=r(7697);const fn=({parentDropTargetClassName:e,isLibraryCompletelyEmpty:t,folderUri:r,folderName:a,spec:l})=>{const{isCollapsed:o,ylxSidebarState:s,canExpand:u}=(0,A.$)(),{renameFolder:p}=(0,Di.ZS)(),{popFolder:g}=(0,i.useContext)(ft),y=(0,i.useCallback)(((e="")=>{r&&p({uri:r},e)}),[r,p]),m=(0,i.useCallback)((()=>{g()}),[g]),x=r?(0,f.jsx)(Si,{reference:{uri:r},name:a,onRename:y,onDeleteCallback:m}):null,{dropOriginIsYLX:b}=yr(),h=!o&&r&&void 0!==a,S=(0,i.useRef)(null),v=(0,i.useRef)(null),w=(0,i.useRef)(null);!function(e,t,r,...a){const n=(0,c.U0)((()=>{if(e.current)if(t.current instanceof HTMLElement){e.current.style.display="block";const{scrollWidth:r,offsetWidth:i}=t.current,a=r>i;e.current.style.display=a?"none":"block"}else e.current.style.display="block"}),[a]);(0,i.useLayoutEffect)(n,[n]),(0,Br.w)({refOrElement:r,observeOnly:"width",onResize:n})}(w,(0,i.useMemo)((()=>({get current(){return v.current?.firstElementChild instanceof HTMLElement?v.current?.firstElementChild:null}})),[]),S,a,h);const P=(0,d.NC)(C.AEN),T=(0,bn.A)(),R=!o||t&&o;return(0,f.jsxs)("header",{className:n()(La,{[Oa]:T,[_a]:o}),ref:S,children:[!o&&(0,f.jsx)(xn,{}),(0,f.jsxs)("div",{className:n()(Fa,{[Na]:o}),children:[(0,f.jsxs)("div",{className:n()(ka,{[Na]:o}),children:[(0,f.jsx)(Ha,{folderUri:r,dropTargetClassName:e,spec:l.toggleCollapsedModeButtonFactory({identifier:""})}),r&&(0,f.jsx)(cn,{handleNavigateBack:m,parentFolderUri:r,spec:l.folderBackButtonFactory()}),h&&(0,f.jsx)(dn,{folderUri:r,folderName:a,folderMenu:x,onRename:y,spec:l.folderTitleFactory(),className:b?e:void 0,ref:v},r)]}),R&&(0,f.jsx)("span",{ref:w,children:(0,f.jsx)(on,{className:n()(Ma,Ua),folderUri:r,tooltipPlacement:o?"right":void 0,spec:l.createMenuButtonFactory()})}),r&&!o&&(0,f.jsx)(Za,{folderName:a,folderMenu:x,dropTargetClassName:e}),s===A.fX.EXPANDED&&!P&&(0,f.jsx)($a,{dropTargetClassName:e,spec:l.viewDensityToggleFactory({identifier:""})}),(s===A.fX.DEFAULT&&u||s===A.fX.EXPANDED)&&(0,f.jsx)(Xa,{dropTargetClassName:e,spec:l.toggleExpandedModeButtonFactory({identifier:""})})]})]})};var hn=r(46703),Sn=r(82537),Cn=r(67820);const vn=({date:e})=>(0,f.jsx)(X.E,{variant:"bodySmall",semanticColor:"textSubdued",className:_e,children:e&&G.Ru.formatRelativeDate(new Date(e),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}),wn=e=>{const t=e.handleNavigate,r=(0,f.jsx)(ir,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=e.expandFolderButton??(e.isPlaying&&(0,f.jsx)(Ut,{})),a=(0,f.jsx)(Gt,{leading:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(vr.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,f.jsxs)(f.Fragment,{children:[e.shouldShowType&&Sr(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),n=e.logRightClick,l=(0,f.jsx)(p.h,{menu:e.menu,onShow:n,children:(0,f.jsx)(Mt.E,{uri:e.uri,trigger:Mt.l.OnMouseDown,children:(0,f.jsx)(Sn.v,{className:De,media:e.cover,title:r,subtitle:a,trailing:i,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:Ft.v4,onClick:e.onClick,hoverAnimationDuration:"0ms"})})});return(0,Wt.c0)(e.uri)?(0,f.jsx)(Vt.cW,{parentRef:e.parentRef,children:l}):l},Pn=e=>{const t=e.handleNavigate,r=(0,f.jsx)(ir,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=(0,f.jsx)(Gt,{leading:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(vr.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,f.jsxs)(f.Fragment,{children:[e.shouldShowType&&Sr(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),a=e.logRightClick;return(0,f.jsx)(zt,{...e,title:r,subtitleSlot:i,parentRef:e.parentRef,children:(0,f.jsxs)("div",{children:[(0,f.jsx)(p.h,{menu:e.menu,onShow:a,children:(0,f.jsx)(Mt.E,{uri:e.uri,trigger:Mt.l.OnMouseDown,children:(0,f.jsx)(Sn.v,{className:n()(De,je),media:e.cover,id:e.uri,padding:Ft.v4,onClick:e.onClick,variant:void 0,title:void 0,hoverAnimationDuration:"0ms"})})}),(0,f.jsxs)("span",{className:Xe,children:[r," ",i]})]})})},Tn=e=>{const t=(0,i.useRef)(null),r=e.logRightClick;return(0,f.jsx)(p.h,{menu:e.menu,onShow:r,children:(0,f.jsxs)("div",{className:Ue,ref:t,children:[(0,f.jsx)(wn,{...e,parentRef:t}),(0,f.jsx)(vn,{date:e.addedAt}),(0,f.jsx)(vn,{date:e.lastPlayedAt})]})})},Rn=e=>{const t=e.handleNavigate,r=(0,f.jsxs)("div",{className:He,children:[(0,f.jsx)(ir,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),e.shouldShowType&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Cn.v,{children:"•"}),(0,f.jsx)(Cn.v,{lineClamp:1,children:Sr(e.type)})]}),(!e.shouldShowType&&e.type===j.c.ALBUM||(0,Wt.c0)(e.uri))&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Cn.v,{children:"•"}),(0,f.jsx)(Gt,{leading:null,uri:e.uri,subtitle:e.subtitle})]})]}),i=(0,f.jsx)(vr.g,{pinned:e.isPinned}),a=e.expandFolderButton??(e.isPlaying?(0,f.jsx)(Ut,{iconSize:"xsmall"}):(0,f.jsxs)(f.Fragment,{children:[e.downloadButton&&(0,f.jsx)("div",{className:Oe,children:e.downloadButton}),e.preReleaseIcon&&(0,f.jsx)("div",{className:Oe,children:e.preReleaseIcon}),e.lockedIcon&&(0,f.jsx)("div",{className:Oe,children:e.lockedIcon})]})),l=e.logRightClick;return(0,f.jsx)(p.h,{menu:e.menu,onShow:l,children:(0,f.jsx)(Mt.E,{uri:e.uri,trigger:Mt.l.OnMouseDown,children:(0,f.jsx)(Sn.v,{className:n()(De,Ie),title:r,leading:e.isPinned?i:void 0,trailing:a,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:`${Ft.vw} ${Ft.v4}`,onClick:e.onClick,size:"sm",hoverAnimationDuration:"0ms"})})})},An=e=>{const t=e.logRightClick;return(0,f.jsx)(p.h,{menu:e.menu,onShow:t,children:(0,f.jsxs)("div",{className:Ue,children:[(0,f.jsx)(Rn,{...e}),(0,f.jsx)(vn,{date:e.addedAt}),(0,f.jsx)(vn,{date:e.lastPlayedAt})]})})},Dn=({height:e,isCompact:t,primaryFilter:r})=>(0,f.jsx)(zr.c,{className:n()({[Ne]:!t,[Me]:t,[ke]:r===j.c.ARTIST}),style:{height:e}});let In=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.COMPACT=1]="COMPACT",e}({});const jn=()=>{const[e,t]=(0,Re.x)("library-row-mode",In.DEFAULT),r=(0,A.vW)();return{libraryRowMode:e,setLibraryRowMode:t,rowHeight:e===In.DEFAULT||r===A.fX.COLLAPSED?64:32}},Ln=(0,i.memo)((function({item:e,primaryFilter:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n}){const l={shouldShowType:!(0,Wt.c0)(e.uri)&&Cr(e.type)!==t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n},o=(0,d.NC)(C.lDH),s=(0,d.NC)(C.H8e);switch(e.type){case j.c.FOLDER:return(0,f.jsx)(Oi,{libraryItem:e,...l});case j.c.ALBUM:return(0,f.jsx)(Zr,{libraryItem:e,...l});case j.c.ARTIST:return(0,f.jsx)($r,{libraryItem:e,...l});case j.c.AUDIOBOOK:return(0,f.jsx)(ni,{libraryItem:e,...l});case j.c.SHOW:return(0,f.jsx)(ha,{libraryItem:e,...l});case j.c.PLAYLIST:return(0,f.jsx)(sa,{libraryItem:e,...l});case j.c.LIKED_SONGS:return(0,f.jsx)(Bi,{libraryItem:e,...l});case j.c.YOUR_EPISODES:return(0,f.jsx)(wa,{libraryItem:e,...l});case j.c.LOCAL_FILES:return(0,f.jsx)(Ki,{libraryItem:e,...l});case j.c.PRE_RELEASE_ALBUM:return o?(0,f.jsx)(ma,{libraryItem:e,...l}):null;case j.c.PRE_RELEASE_BOOK:return s?(0,f.jsx)(ma,{libraryItem:e,...l}):null;default:(0,Rt.d)(e)}})),On=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:n})=>{const l=(0,A.vW)(),{rowHeight:o,libraryRowMode:s}=jn(),c=s===In.COMPACT,d=((e,t)=>{switch(e){case A.fX.COLLAPSED:return Pn;case A.fX.DEFAULT:return t?Rn:wn;case A.fX.EXPANDED:return t?An:Tn;default:(0,Rt.d)(e)}})(l,c),u=(0,i.useCallback)(((e,t)=>(0,f.jsx)(Dn,{height:e,isCompact:c,primaryFilter:r},t)),[c,r]),p=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>e?(0,f.jsx)(Ln,{item:e,spec:n,RowVariantComponent:d,primaryFilter:r,nrValidItems:a,index:t+i},e.uri):u(`${o}px`,`${t+i}`)))),[d,e,r,u,o,n,a]);return(0,f.jsx)(zr.$,{circular:!1,allowsMultipleInteractiveChildrenInItem:!0,"aria-label":G.Ru.get("web-player.your-library-x.your-library"),children:(0,f.jsx)(hn.L,{renderRows:p,nrRows:a,rowHeight:o,scrollNodeRef:t,renderPlaceholder:u})})};var En=r(906),Fn=r(41615),Nn=r(28532),kn=r(24934);const Mn="oszTUDKpXrPHyeWPs276",Bn="cKHK53VIATgkMZYQDfol",Un="QMGfkFWtxrVkgNgFXDyw",_n=function({title:e,bodyText:t,children:r,root:a,show:n,childrenWrapperClassName:l,onHide:o}){const[s,c]=(0,i.useState)(null),[u,p]=(0,i.useState)(null),g=(0,d.NC)(C.zJD),y=(0,i.useCallback)((()=>{o()}),[o]);(0,i.useEffect)((()=>{if(!n)return()=>{};const e=e=>{"Escape"===e.key&&y()};return window.addEventListener("keydown",e,!0),()=>{window.removeEventListener("keydown",e,!0)}}),[y,u,n]);const m=s?.getBoundingClientRect();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{ref:c,className:l,children:r}),m&&n&&g&&(0,Fn.createPortal)((0,f.jsx)("div",{className:Mn,style:{top:m?.top??0,left:m?.left??0,width:m?.width,height:m?.height},ref:p,children:(0,f.jsxs)(Nn.A,{popoverTitle:e,arrow:Nn.A.left,colorSet:"announcement",className:Bn,children:[(0,f.jsx)(X.E,{as:"p",dangerouslySetInnerHTML:{__html:t||""}}),(0,f.jsx)(oi.H,{size:"small",onClick:y,iconOnly:kn.M,"aria-label":G.Ru.get("close"),className:Un})]})}),a||document.body)]})};var Vn=r(92165),Wn=r(76986),Hn=r(49322),zn=r(68733);const Kn=(e,t,r)=>{const i=t.closest('li[role="presentation"]'),a=e.parentElement?.querySelectorAll('ul[role="menu"]');if(r===zn.O.UP){const r=a?.[a.length-1],n=e.previousElementSibling,l=i?.previousElementSibling?.previousElementSibling;if(t instanceof HTMLUListElement||!l){if(n&&n instanceof HTMLUListElement)return n;if(r&&r instanceof HTMLUListElement)return r}}else{const t=i?.nextElementSibling;if(!t){const t=e.nextElementSibling;return t&&t instanceof HTMLUListElement?t:a?.[0]}}},Xn="main-yourLibraryX-librarySort",Yn="main-yourLibraryX-librarySortWrapper",Gn="rrv_gS6m_YN8K1nsq47l",Zn="mdvwJxMDgGjicVAZoBAw",Jn="VrBEyt4oriSVpJPs1Dmw",qn=[{itemsViewState:Qa.X.LIST,compactModeState:In.COMPACT},{itemsViewState:Qa.X.LIST,compactModeState:In.DEFAULT},{itemsViewState:Qa.X.GRID,compactModeState:In.DEFAULT}],Qn=(e,t,r)=>Math.round((e+t)*r)/r,$n=e=>e.itemsViewState===Qa.X.GRID?G.Ru.get("web-player.your-library-x.sort-and-view-picker.grid"):e.compactModeState===In.COMPACT?G.Ru.get("web-player.your-library-x.sort-and-view-picker.compact"):G.Ru.get("web-player.your-library-x.sort-and-view-picker.list"),el=({selectedSort:e,selectedView:t,onSortSelect:r,onViewSelect:a,sortOptions:n,spec:l,id:o})=>{const s=(0,H.s)(),c=(0,i.useCallback)((e=>e.itemsViewState===Qa.X.GRID?(0,f.jsx)(qa.D,{size:"small"}):e.compactModeState===In.COMPACT?(0,f.jsx)(Vn.d,{size:"small"}):(0,f.jsx)(Ja.N,{size:"small"})),[]),{gridScale:d,setGridScale:u}=Ta(),p=e=>{const t=Qn(e,.5,100);u(t),s.logInteraction(l.gridDensitySliderFactory().dragSetSliderPosition({position:t}))},y=(0,i.useCallback)((e=>{u(e),s.logInteraction(l.gridDensitySliderFactory().hitSetSliderPosition({position:e}))}),[s,u,l]),m=e=>e?.parentElement?.querySelector("ul"),x=(0,i.useRef)(null);return(0,f.jsxs)("div",{id:o,className:Gn,ref:x,children:[(0,f.jsxs)(g.W,{"aria-label":G.Ru.get("web-player.your-library-x.sort_by"),onFocusVerticalItem:Kn,getInitialFocusElement:m,children:[(0,f.jsx)(Wn.y,{children:G.Ru.get("web-player.your-library-x.sort_by")}),n.map((({key:t,value:i},a)=>(0,f.jsx)(yi.D,{role:"menuitemradio","aria-checked":t===e.key,onClick:()=>r(t,a),divider:a===n.length-1?"after":void 0,autoClose:!1,children:i},t)))]}),(0,f.jsxs)(g.W,{"aria-label":G.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:Kn,getInitialFocusElement:m,children:[(0,f.jsx)(Wn.y,{children:G.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),qn.map((e=>{const r=$n(e),i=e.itemsViewState===t.itemsViewState&&e.compactModeState===t.compactModeState;return(0,f.jsx)(yi.D,{role:"menuitemradio","aria-checked":i,onClick:()=>a(e),leadingIcon:c(e),autoClose:!1,children:r},r)})),Qa.X.GRID===t.itemsViewState&&(0,f.jsx)("li",{role:"presentation",children:(0,f.jsx)("div",{role:"menuitem",className:Jn,children:(0,f.jsx)(Hn.z2,{labelText:G.Ru.get("web-player.your-library-x.sort-and-view-picker.grid-density-label"),value:Qn(d,-.5,100),max:1,step:.1,onDragStart:p,onDragMove:p,onDragEnd:p,onStepBackward:()=>y(Qn(d,-.1,10)),onStepForward:()=>y(Qn(d,.1,10)),forceActiveStyles:!0,"data-roving-interactive":"1"})})})]})]})};var tl=r(23270);const rl=(e,t=!0)=>{const[r,a]=(0,Re.x)("onboarding-dismissed:ylx-playlist-ordering",!1),[n,l]=(0,Re.x)("onboarding-dismissed-amount:ylx-playlist-ordering",0),[o,s]=(0,i.useState)(!1),{dropOriginIsYLX:c}=yr(),{draggingIsInProgress:d}=(0,i.useContext)(gr.O_);(0,i.useEffect)((()=>{d&&c&&s(!0)}),[d,c]);const u=(0,i.useCallback)((()=>{a(!0),s(!1),l(n+1)}),[n,l,a]);return{show:e&&n<3&&(!r||o)&&(t||o),onHide:u}},il=({sortOptions:e,selectedSort:t,onSortSelect:r,root:a,showReorderingOnboarding:n,scrollNodeRef:l,spec:o})=>{const{itemsView:s,setItemsView:c}=(0,Qa.t)(),{libraryRowMode:d,setLibraryRowMode:u}=jn(),p=(0,H.s)(),g=(0,i.useCallback)((()=>{p.logInteraction(o.hitUiReveal())}),[p,o]),y=(0,i.useMemo)((()=>s===Qa.X.GRID?{itemsViewState:Qa.X.GRID,compactModeState:In.DEFAULT}:d===In.COMPACT?{itemsViewState:Qa.X.LIST,compactModeState:In.COMPACT}:{itemsViewState:Qa.X.LIST,compactModeState:In.DEFAULT}),[s,d]),m=(0,i.useCallback)((e=>{let t=o.viewAsOptionFactory({identifier:"grid",position:3}).hitUiElementToggle();e.itemsViewState===Qa.X.GRID?c(Qa.X.GRID):e.compactModeState===In.COMPACT?(t=o.viewAsOptionFactory({identifier:"compact",position:1}).hitUiElementToggle(),c(Qa.X.LIST),u(In.COMPACT)):(t=o.viewAsOptionFactory({identifier:"list",position:2}).hitUiElementToggle(),c(Qa.X.LIST),u(In.DEFAULT)),p.logInteraction(t)}),[p,c,u,o]),x=(0,i.useRef)(null),b=(0,tl.y)(l,"0px 0px 0px 0px",.75,x),[h,S]=(0,Re.x)("sort-view-picker-onboarding-seen",!1),{show:C,onHide:v}=rl(h&&n,!b),w=(0,i.useCallback)((()=>{g(),S(!0)}),[g,S]);return(0,f.jsx)(_n,{bodyText:G.Ru.get("web-player.your-library-x.sort-and-view-picker.view-onboarding"),root:a,show:!h&&!b,childrenWrapperClassName:Yn,onHide:()=>S(!0),children:(0,f.jsx)(_n,{bodyText:G.Ru.get("web-player.your-library-x.custom-ordering-onboarding-text"),root:a,show:C,childrenWrapperClassName:Yn,onHide:v,children:(0,f.jsx)(Ga.b,{menu:(0,f.jsx)(el,{selectedSort:t,selectedView:{itemsViewState:y.itemsViewState??Qa.X.LIST,compactModeState:y.compactModeState??In.DEFAULT},sortOptions:e,onSortSelect:r,onViewSelect:m,spec:o,id:"sort-and-view-picker"}),placement:"bottom-end",children:(0,f.jsx)(oi.H,{"aria-label":G.Ru.get("web-player.your-library-x.sort-and-view-picker.button-aria-label",t.value,$n(y)),onClick:w,size:"small",iconTrailing:(P=y,P.itemsViewState===Qa.X.GRID?qa.D:P.compactModeState===In.COMPACT?Vn.d:Ja.N),ref:x,role:"combobox","aria-controls":"sort-and-view-picker",children:(0,f.jsx)(X.E,{variant:"bodySmall",className:Zn,children:t.value})})})})});var P},al=({sortOrders:e,activeSortOrderId:t,setActiveSortOrderId:r,root:a,showReorderingOnboarding:n,spec:l,scrollNodeRef:o})=>{const s=(0,i.useMemo)((()=>l.sortMenuButtonFactory()),[l]),c=(0,i.useMemo)((()=>l.sortbyViewasMenuButtonFactory()),[l]),u=(0,H.s)(),p=(0,qe.t)(),g=e.find((e=>e.id===t))??e?.at(0),y=(0,i.useRef)(null),m=(0,d.NC)(C.AEN),x=(0,i.useCallback)(((e,t)=>{r(e);const i=p.getSortOrderLabel(e);m?u.logInteraction(c.sortOptionFactory({identifier:i,position:t}).hitSort()):u.logInteraction(s.sortMenuFactory().sortOptionFactory({identifier:i,position:t}).hitSort())}),[p,u,r,c,s,m]),{show:b,onHide:h}=rl(n);return m?(0,f.jsx)(il,{sortOptions:e.map((({id:e,name:t})=>({key:e,value:t}))),selectedSort:{key:g?.id??"",value:g?.name??""},onSortSelect:x,root:a,showReorderingOnboarding:n,scrollNodeRef:o,spec:c}):(0,f.jsx)("div",{className:Xn,ref:y,children:(0,f.jsx)(_n,{bodyText:G.Ru.get("web-player.your-library-x.custom-ordering-onboarding-text"),root:a,show:b,childrenWrapperClassName:Yn,onHide:h,children:(0,f.jsx)(En.g,{options:e.map((({id:e,name:t})=>({key:e,value:t}))),onClick:()=>{u.logInteraction(s.hitUiReveal())},onSelect:x,selected:{key:g?.id??"",value:g?.name??""},heading:G.Ru.get("web-player.your-library-x.sort_by"),ariaLabel:G.Ru.get("web-player.your-library-x.sort_by")})})})};var nl=r(91377),ll=r(66481);const ol=({clearOnEscapeInElementRef:e,primaryFilter:t,spec:r})=>{const a=(0,qe.t)(),n=(0,H.s)(),l=function(e){switch(e){case j.c.PRE_RELEASE_ALBUM:case j.c.ALBUM:return G.Ru.get("web-player.your-library-x.text-filter.albums-placeholder");case j.c.ARTIST:return G.Ru.get("web-player.your-library-x.text-filter.artists-placeholder");case j.c.PLAYLIST:return G.Ru.get("web-player.your-library-x.text-filter.playlists-placeholder");case j.c.SHOW:return G.Ru.get("web-player.your-library-x.text-filter.shows-placeholder");case j.c.PRE_RELEASE_BOOK:case j.c.AUDIOBOOK:return G.Ru.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return G.Ru.get("web-player.your-library-x.text-filter.downloaded-placeholder");case void 0:return G.Ru.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,Rt.k)(e)}}(t),o=(0,i.useCallback)((()=>(n.logInteraction(r.searchButtonFactory().hitUiReveal()),!0)),[n,r]),s=(0,i.useCallback)((()=>(n.logInteraction(r.textFilterFactory().keyStrokeClearFilter()),!0)),[n,r]);return(0,f.jsx)(nl.S,{placeholder:l,clearOnEscapeInElementRef:e,debounceFilterChangeTimeout:a?.getCapabilities().canTextFilterContentsInRealtime?0:void 0,expandDirection:"right",onActivate:o,onClear:s,useExpandCallback:e=>{(0,ll.f)(T.gO.FOCUS_YLX_TEXT_FILTER,e)}})};var sl=r(26948),cl=r(38859),dl=r(48383),ul=r(26028),pl=r(42094),gl=r(15048),yl=r(82297),ml=r(31614),xl=r(43249),bl=r(97027);const fl=1248,hl=800,Sl=(0,Tt.g)(pl.Z),Cl=(0,Tt.g)(gl.fX),vl=()=>(function(){const{size:e,setSize:t,minWidth:r,maxWidth:a,ylxCollapsedStateNavbarWidth:n,ylxDefaultStateNavbarWidth:o,ylxExpandedStateNavbarWidth:s}=(0,xl.y)(),{ylxSidebarState:c,setYlxSidebarState:d,canCollapse:u}=(0,gl.$)(),p=(0,ul.XB)(),g=(0,ul._Y)(),{min:y,max:m,size:x,setSize:b}=(0,ul.Zf)(),f=(0,yl.H)(),h=(0,i.useRef)(null),S=(0,i.useRef)(null),C=(0,i.useRef)(null);(0,i.useLayoutEffect)((()=>{const i=f-e-3*dl.KV-(p!==pl.Z.Disabled?x+dl.KV:0),v={leftSidebarWidth:e,leftSidebarMinWidth:r,leftSidebarMaxWidth:a,ylxSidebarState:c,ylxSidebarStateRestoreTarget:h.current,rightSidebarWidth:x,rightSidebarMinWidth:y,rightSidebarMaxWidth:m,rightSidebarPanel:p,rightSidebarPanelRestoreTarget:S.current,storedCollapsedYLXWidth:n,storedDefaultYLXWidth:o,storedExpandedYLXWidth:s,clientWidth:f,mainContentWidth:i,canCollapse:u},w=C.current;if((0,l.j)(v,w))return;const P=function(e,t){if(!e)return{};let{leftSidebarWidth:r=0,rightSidebarWidth:i=0}=t;const{mainContentWidth:a=0,leftSidebarMinWidth:n=0,leftSidebarMaxWidth:l=0,ylxSidebarState:o,ylxSidebarStateRestoreTarget:s,rightSidebarMinWidth:c=0,rightSidebarMaxWidth:d=0,rightSidebarPanel:u,rightSidebarPanelRestoreTarget:p,storedCollapsedYLXWidth:g=0,storedDefaultYLXWidth:y=0,storedExpandedYLXWidth:m=0,clientWidth:x=0,canCollapse:b=!0}=t,f={},h=u!==pl.Z.Disabled,S=void 0!==e.leftSidebarWidth&&r>e.leftSidebarWidth,C=void 0!==e.rightSidebarWidth&&i>e.rightSidebarWidth,v=void 0===e.clientWidth?0:x-e.clientWidth,w=v<0,P=x>0,T=a<dl.ev?dl.ev-a:0;let R=w?-1*v:0;a>fl?R=Math.max(0,R-(a-fl)):T&&(R=T);const A=o===gl.fX.EXPANDED&&e.ylxSidebarState!==gl.fX.EXPANDED,D=o===gl.fX.DEFAULT&&e.ylxSidebarState!==gl.fX.DEFAULT;let I=r-n;S&&(I=A?r-ml.ZU.EXPANDED_MIN:D?r-ml.ZU.DEFAULT_MIN:0);let j=C?0:i-c;const L=R<=I+j;if(a<dl.ev&&!L)h&&(S||w&&(o===gl.fX.COLLAPSED||!b))?(f.rightSidebarPanel=pl.Z.Disabled,f.rightSidebarPanelRestoreTarget=t.rightSidebarPanel,R-=i,j=0):(o===gl.fX.EXPANDED&&a+(r-ml.ZU.DEFAULT_MIN)>dl.ev?(f.ylxSidebarState=gl.fX.DEFAULT,R-=r-y,I=y-ml.ZU.DEFAULT_MIN):(f.ylxSidebarState=gl.fX.COLLAPSED,R-=r-g,I=0),f.ylxSidebarStateRestoreTarget=t.ylxSidebarState);else if(u===pl.Z.Disabled&&p!==pl.Z.Disabled&&Sl(p)&&u!==e.rightSidebarPanelRestoreTarget&&a-i-dl.KV>=dl.ev)f.rightSidebarPanel=p,f.rightSidebarPanelRestoreTarget=null;else if(o===gl.fX.DEFAULT&&s===gl.fX.EXPANDED&&a-(m-r)>=dl.ev)f.ylxSidebarState=gl.fX.EXPANDED,f.ylxSidebarStateRestoreTarget=null;else if(o===gl.fX.COLLAPSED&&s===gl.fX.DEFAULT&&a-(y-r)>=dl.ev)f.ylxSidebarState=gl.fX.DEFAULT,f.ylxSidebarStateRestoreTarget=null;else if(P&&a>=hl){let e=l-r,t=d-i;const a=Math.min(v,e+t);for(let n=0;n<a;n++)r<i&&r<l&&e>0?(r++,e--):i<d&&t>0&&(i++,t--)}o!==e.ylxSidebarState&&Cl(s)&&s===e.ylxSidebarStateRestoreTarget&&(f.ylxSidebarStateRestoreTarget=null);u!==e.rightSidebarPanel&&Sl(p)&&p===e.rightSidebarPanelRestoreTarget&&(f.rightSidebarPanelRestoreTarget=null);if(R>0&&R<=I+j)for(let e=0;e<R;e++)r>i&&r>n&&I>0?(r--,I--):i>c&&j>0&&(i--,j--);r&&r!==t.leftSidebarWidth&&(f.leftSidebarWidth=r);i&&i!==t.rightSidebarWidth&&(f.rightSidebarWidth=i);return f}(w,v);void 0!==P.leftSidebarWidth&&t(P.leftSidebarWidth),Cl(P.ylxSidebarState)&&d(P.ylxSidebarState),void 0!==P.ylxSidebarStateRestoreTarget&&(h.current=P.ylxSidebarStateRestoreTarget),void 0!==P.rightSidebarWidth&&0!==w?.rightSidebarWidth&&b(P.rightSidebarWidth),void 0!==P.rightSidebarPanel&&g((0,bl.MQ)(P.rightSidebarPanel),!0),void 0!==P.rightSidebarPanelRestoreTarget&&(S.current=P.rightSidebarPanelRestoreTarget),C.current=v}),[e,r,a,t,c,x,y,m,b,p,n,o,s,d,g,f,u])}(),null),wl=()=>(0,d.NC)(C.Wfl,{loadingValue:!1})?(0,f.jsx)(vl,{}):null;var Pl=r(83481);const Tl=()=>null;var Rl=r(58833),Al=r(54452),Dl=r(27707);const Il="NPU6LmfFDlgTJ7QeeYaK",jl="ii8I2whaOzTr7LiAc8I3",Ll=()=>{const[e,t]=(0,i.useState)(!1),r=(0,nn.V)(),a=(0,o.d4)(Dl.JJ);(0,i.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),1100);return()=>{t(!1),clearTimeout(e)}}),[]);const n=(0,o.d4)(Dl.mo);return r&&e?(0,f.jsx)(Rl.t5,{language:G.Ru.getLocaleForSmartling(),market:a.toLowerCase(),children:(0,f.jsxs)("div",{className:Il,"data-testid":"left-sidebar-legal-links",children:[(0,f.jsx)(Rl.JM,{}),(0,f.jsx)("a",{draggable:!1,href:Al.Bl,target:"_blank",rel:"noopener",className:jl,children:(0,f.jsx)(X.E,{variant:"marginal",children:G.Ru.get("cookies")})}),n&&(0,f.jsx)("a",{draggable:!1,href:Al.Vd,target:"_blank",rel:"noopener",className:jl,children:(0,f.jsx)(X.E,{variant:"marginal",children:"Форма для Ваших обращений"})})]})}):null};var Ol=r(15403);const El="i4nABk12gLqZuh9Jbdw1",Fl=(0,i.memo)((function({isAnonymous:e}){return(0,f.jsx)("div",{className:El,"data-testid":"left-sidebar-footer",children:e&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ll,{}),(0,f.jsx)(Ol.X,{})]})})}));var Nl=r(56607);var kl=r(55580);var Ml=r(14624);function Bl(){const[e,t]=(0,i.useState)(null);if((0,vi.l)(Ci.UV.UPDATE_PIN_ERROR,(e=>{t(e.data)})),void 0===e?.reason)return null;switch(e.reason){case Ci.uL.TOO_MANY_PINS:return(0,f.jsx)(Ml.x,{animated:!0,headingMessage:G.Ru.get("web-player.your-library-x.pin-error.title"),message:G.Ru.get("web-player.your-library-x.pin-error.message",e.maximumPinnedItems),buttonLabel:G.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});case Ci.uL.NO_PIN_IN_FOLDER:return(0,f.jsx)(Ml.x,{animated:!0,headingMessage:G.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.title"),message:G.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.message"),buttonLabel:G.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});default:return(0,Rt.k)(e),null}}var Ul=r(34156),_l=r(41299),Vl=r(34777),Wl=r(29345),Hl=r(54978);const zl={[Ci.Ir.ALBUMS]:j.c.ALBUM,[Ci.Ir.ARTISTS]:j.c.ARTIST,[Ci.Ir.BOOKS]:j.c.AUDIOBOOK,[Ci.Ir.EPISODES]:j.c.EPISODE,[Ci.Ir.SHOWS]:j.c.SHOW,[Ci.Ir.TRACKS]:j.c.TRACK};function Kl(e,t){const r=(0,i.useCallback)((({data:{list:r}})=>{Xl(e,zl[r])&&t()}),[e,t]);(0,vi.l)(Ci.UV.UPDATE,r),(0,vi.l)(Ci.UV.UPDATE_PIN,t);const a=(0,i.useCallback)((()=>{Xl(e,j.c.PLAYLIST)&&t()}),[e,t]);(0,Di.Li)(a),function(e){(0,Hl.Rs)("hm://collection/ylpin/",!0,e)}(t),function(e){const t=(0,i.useContext)(Wl._),r=t.getEvents();(0,i.useEffect)((()=>(r.addListener(Vl.T.UPDATE,e),()=>{r.removeListener(Vl.T.UPDATE,e)})),[t,r,e])}(t),function(e){const t=(0,_l.l)().getEvents();(0,i.useEffect)((()=>{const r=({data:{set:t}})=>{"prerelease"===t&&e()};return t.addListener(Ul.ar.ADDED,r),t.addListener(Ul.ar.REMOVED,r),()=>{t.removeListener(Ul.ar.ADDED,r),t.removeListener(Ul.ar.REMOVED,r)}}),[e,t])}(t)}function Xl(e,t){switch(e){case j.c.ALBUM:case j.c.ARTIST:case j.c.AUDIOBOOK:case j.c.SHOW:return e===t;case j.c.PLAYLIST:switch(t){case j.c.TRACK:case j.c.PLAYLIST:case j.c.EPISODE:return!0;default:return!1}default:return!0}}const Yl="main-yourLibraryX-libraryContainer",Gl="main-yourLibraryX-libraryFilter",Zl="RcGCSu8qHUle68BTwF73",Jl="main-yourLibraryX-libraryItemContainer",ql="main-yourLibraryX-libraryRootlist",Ql="main-yourLibraryX-libraryIsCollapsed",$l="glUVqQHA9VNQp0CHUTAs",eo="main-yourLibraryX-filters",to="HUFl7FOi5oAlMEZNCBf4",ro="main-yourLibraryX-isScrolled",io="main-yourLibraryX-filterArea",ao={items:[],totalLength:0},no=()=>null,lo=()=>{const{filter:e}=(0,i.useContext)(xt.g),[t,r]=(0,i.useState)(null),{filtersPickedByUserRef:a,selectedFilterIds:o,resetFilterIds:g,resetAndToggleRootFilter:y,toggleFilterId:x}=function(e){const{openedFolderUri:t=bt,change:r,resetFolder:a}=(0,i.useContext)(ft),n=(0,i.useRef)(t),[l,o]=(0,Re.x)("ylx-active-filter-ids",{[t]:[]}),s=(0,i.useRef)(!0),d=(0,c.U0)(((r,i=!0)=>{const a=new Set(e);a.has(r)?a.delete(r):a.add(r),s.current=i,o({...l,[t]:Array.from(a)})}),[e,o,t]),u=(0,i.useCallback)((()=>o({...l,[t]:[]})),[t,l,o]),p=(0,i.useCallback)((e=>{t&&a(),o({...l,[bt]:e?[e]:[]})}),[t,a,l,o]);return(0,i.useLayoutEffect)((()=>{t!==n.current&&t!==bt&&"PUSH"===r&&o({...l,[t]:l[n.current]}),n.current=t}),[r,t,l,o]),{filtersPickedByUserRef:s,selectedFilterIds:l[t],resetFilterIds:u,resetAndToggleRootFilter:p,toggleFilterId:d}}(t?.selectedFilters?.map((e=>e.id))??[]),b=o?.[0],{selectedSortOrderId:S,setSelectedSortOrderId:w}=function(e){const t=(0,qe.t)().getContentsPrimaryFilterId(j.c.PLAYLIST),{openedFolderUri:r=""}=(0,i.useContext)(ft),[a,n]=(0,Re.x)("ylx-active-sort-order-by-filter-id",{}),l=`${r&&t?t:e}`;return{selectedSortOrderId:a[l],setSelectedSortOrderId:(0,i.useCallback)((e=>{n({...a,[l]:e})}),[l,a,n])}}(b),k=(0,i.useRef)(null),M=(0,i.useRef)(null),B=(0,i.useRef)(null),{expandedFolders:_}=function(){const e=(0,i.useContext)(Te);if(!e)throw new Error("useExpandedFolders must be used within a ExpandedFoldersProvider");return e}(),{openedFolderUri:V,resetFolder:X}=(0,i.useContext)(ft),Y=(0,Pl.p)(),G=(0,E.P)(),Z=(0,i.useContext)(I.Z),J=(0,F.g)(),q=(()=>{const e=(0,d.NC)(C.d2Y),t="1"===(0,v.$)("is-cheetara");return e&&t})(),Q=mr(),[$,te]=(0,i.useState)(!1),{isCollapsed:re,isExpanded:ae,setYlxSidebarState:ne}=(0,A.$)();(e=>{const t=(0,i.useContext)(I.Z),{isCollapsed:r,setYlxSidebarState:a,lastUncollapsedYlxSidebarState:n}=(0,A.$)(),l=(0,D.W)();(0,i.useEffect)((()=>(P().bind(l?T.gO.TOGGLE_NPV_SIDEBAR:T.gO.TOGGLE_YLX_SIDEBAR,(0,R.l)((()=>{const e=r?n:A.fX.COLLAPSED;a(e)}))),()=>{P().unbind(l?T.gO.TOGGLE_NPV_SIDEBAR:T.gO.TOGGLE_YLX_SIDEBAR)})),[r,l,n,a]),(0,i.useEffect)((()=>(P().bind(T.gO.GO_TO_LIBRARY,(0,R.l)((()=>{e(null),r&&a(n)}))),()=>{P().unbind(T.gO.GO_TO_LIBRARY)})),[r,n,e,a]),(0,i.useEffect)((()=>(P().bind(T.gO.GO_TO_PLAYLISTS,(0,R.l)((()=>{e(t.getContentsPrimaryFilterId(j.c.PLAYLIST)),r&&a(n)}))),()=>{P().unbind(T.gO.GO_TO_PLAYLISTS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(P().bind(T.gO.GO_TO_PODCASTS,(0,R.l)((()=>{e(t.getContentsPrimaryFilterId(j.c.SHOW)),r&&a(n)}))),()=>{P().unbind(T.gO.GO_TO_PODCASTS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(P().bind(T.gO.GO_TO_ARTISTS,(0,R.l)((()=>{e(t.getContentsPrimaryFilterId(j.c.ARTIST)),r&&a(n)}))),()=>{P().unbind(T.gO.GO_TO_ARTISTS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(P().bind(T.gO.GO_TO_ALBUMS,(0,R.l)((()=>{e(t.getContentsPrimaryFilterId(j.c.ALBUM)),r&&a(n)}))),()=>{P().unbind(T.gO.GO_TO_ALBUMS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(P().bind(T.gO.GO_TO_AUDIOBOOKS,(0,R.l)((()=>{e(t.getContentsPrimaryFilterId(j.c.AUDIOBOOK)),r&&a(n)}))),()=>{P().unbind(T.gO.GO_TO_AUDIOBOOKS)})),[r,n,t,e,a])})(y);const{isGridView:le}=(0,Qa.t)(),{libraryRowMode:oe}=jn(),se=oe===In.COMPACT,{spec:ce,UBIFragment:de}=(0,K.r)(u.j,{data:{identifier:"yourlibraryx"}});let ue;ue=re?"collapsed":le?ae?"expanded_grid":"default_grid":se?ae?"expanded_compact":"default_compact":ae?"expanded_list":"default_list";const pe=(0,i.useMemo)((()=>ce.sidebarFactory({uri:V??bt,identifier:ue})),[ce,V,ue]),ge=(0,z.t)(pe),ye=(0,i.useMemo)((()=>pe.headerFactory()),[pe]),xe=(0,i.useMemo)((()=>ye.filtersFactory()),[ye]),be=(0,i.useMemo)((()=>ye.searchBarFactory()),[ye]),fe=(0,i.useMemo)((()=>pe.listFactory()),[pe]),he=(0,H.s)();!function(e=[],t=[],r){const a=(0,Nl.n)(),n=(0,i.useContext)(I.Z).getContentsPrimaryFilterId("downloaded"),l=(0,i.useRef)(e);l.current=e;const o=(0,i.useRef)(t);o.current=t;const s=(0,i.useRef)(r);s.current=r;const d=(0,i.useRef)(!1);(0,i.useEffect)((()=>{if(!n)return;const e=o.current.includes(n),t=l.current.includes(n),r=o.current.length>1,i=!a&&!r&&!e&&t,c=a&&e&&d.current;(i||c)&&(i&&(d.current=!0),s.current(n,!1))}),[n,a]);const u=(0,i.useRef)(t);(0,c.Ij)((()=>{n&&(t.includes(n)&&!u.current.includes(n)&&d.current||(d.current=!1),u.current=t)}),[n,t])}(t?.availableFilters?.map((e=>e.id)),t?.selectedFilters?.map((e=>e.id)),x);const{handleDropOnFolder:Ce,unpinConfirmationDialog:ve}=ji(fe,V),{dropOriginIsYLX:we,entityIsInFolder:Ae}=yr(),{setDraggingIsInProgress:De}=(0,i.useContext)(gr.O_);(0,cl.g)(k);const Ie=V?pt:ut,je=Ae&&!t?.reorderAllowed?[dt.fl.PLAYLISTS_V2,dt.fl.FOLDERS]:[],{dropPosition:Le,className:Oe,...Ee}=(0,$e.A)({allowedMimeTypesByDropPosition:{[Qe.Nz.ON]:we?je:Ie},onDrop:(0,i.useCallback)((async e=>{if(V)Ce(e);else{const{[dt.fl.TRACKS]:t=[],[dt.fl.LOCAL_TRACKS]:r=[],[dt.fl.ALBUMS]:i,[dt.fl.ARTISTS]:a,[dt.fl.EPISODES]:n,[dt.fl.SHOWS]:l,[dt.fl.PLAYLISTS_V2]:o=[],[dt.fl.FOLDERS]:s,[dt.fl.AUDIOBOOKS]:c}=e,d=[...t,...r];d.length&&(Z?.add({uris:d}),he.logInteraction(fe.dragCreatePlaylist())),i?.length&&(Z?.add({uris:i}),he.logInteraction(fe.dragLike({itemToBeLiked:i.at(0)??""}))),a?.length&&(Z?.add({uris:a}),he.logInteraction(fe.dragLike({itemToBeLiked:a.at(0)??""}))),n?.length&&(Z?.add({uris:n}),he.logInteraction(fe.dragLike({itemToBeLiked:n.at(0)??""}))),l?.length&&(Z?.add({uris:l}),he.logInteraction(fe.dragLike({itemToBeLiked:l.at(0)??""}))),c?.length&&(Z?.add({uris:c}),he.logInteraction(fe.dragLike({itemToBeLiked:c.at(0)??""}))),o.length&&(Q(o,{before:"start"}),we?he.logInteraction(fe.dragSort()):he.logInteraction(fe.dragLike({itemToBeLiked:o.at(0)??""}))),s?.length&&(J.moveFolder({uri:s[0]},{before:"start"}),he.logInteraction(fe.dragSort()))}}),[V,Ce,Z,he,fe,Q,we,J]),onLongDragOver:(0,i.useCallback)((()=>{re&&ne(A.fX.DEFAULT)}),[re,ne])}),Fe=(0,d.NC)(C.H8e),Ne=(0,d.NC)(C.lDH),ke=Fe||Ne,Me=(0,i.useMemo)((()=>({filters:o,sortOrder:S,textFilter:e,includeLocalFiles:G,includeYourEpisodes:!0,includeLikedSongs:!0,includePreReleases:ke,expandedFolders:re||le?[]:_,filtersPickedByUser:a.current,folderUri:V})),[o,S,e,G,ke,re,le,_,a,V]),Be=(0,i.useCallback)((async(e,t)=>{try{const i=await Z.getContents({offset:e,limit:t,...Me}),{offset:a,limit:n,items:o,...s}=i;return te(!1),{fetchedId:Me.folderUri,onCacheSuccess:()=>{r((e=>(0,l.j)(s,e)?e:s))},...i}}catch(e){return e instanceof m.c_?(g(),ao):e instanceof m.IU?(w(void 0),ao):e instanceof m.db?(X(),ao):((0,N.UD)(e),te(!0),ao)}}),[Me,Z,g,X,w]),Ue=!1===t?.hasUnfilteredItems,_e=t?.hasTextFilter&&0===t.totalLength&&""!==e,{setFilter:Ve}=(0,i.useContext)(xt.g);(0,i.useEffect)((()=>{_e&&re&&Ve("")}),[_e,re,Ve]);const We=0===t?.totalLength&&t.selectedFilters.length>0&&!t.passedFolderUri&&!t.hasTextFilter;(0,c.Ij)((()=>{const e=t?.selectedFilters.at(-1);We&&e&&x(e.id,!1)}),[We,t?.selectedFilters]);const He=(0,d.NC)(C.HbK,{loadingValue:!1})&&Z?.getCapabilities().canFetchAllItems,{fetchedId:ze,getItems:Ke,nrValidItems:Xe,invalidateCache:Ge}=(0,O.E)({nrItems:50,fetch:Be,limit:50,cacheAllOnInvalidation:He,cacheAllLimit:5e4}),Ze=(0,s.YQ)(Ge,200,{leading:!0,trailing:!0,maxWait:1e3});Kl(t?.primaryFilter,Ze);const Je=!V&&!ze||V===ze;((e,t="")=>{const r=(0,i.useRef)({});(0,i.useLayoutEffect)((()=>{if(!e.current)return()=>{};const i=e.current,a=r.current[t];i.scrollTop=a??0;const n=()=>{r.current[t]=i.scrollTop};return i?.addEventListener("scroll",n),()=>{i?.removeEventListener("scroll",n)}}),[e,t])})(k,ze);const tt=(0,i.useCallback)((()=>{Ge(),te(!1)}),[Ge]),rt=(0,tl.y)(k),it=!!t?.openedFolderName,at=(0,d.NC)(C._p8,{loadingValue:!1})&&He,nt=function(e,t,r){const{isGridView:a}=(0,Qa.t)(),{rowHeight:n}=jn();return(0,i.useCallback)((async i=>{let l=n,o=1;if(a){const t=e.current?.querySelector('li[role="row"]');l=t?.getBoundingClientRect().height??0,t?.parentElement&&(o=getComputedStyle(t.parentElement).getPropertyValue("grid-template-columns").split(" ").length)}if(!l)return null;const s=r(0,5e4,{cachedOnly:!0}),c=s.find((e=>e?.name&&(0,kl.u)(i,e.name))),d=c?s.indexOf(c):-1;return-1!==d&&t.current&&function(e,t,r,i){if(!e)return;const{scrollTop:a,offsetHeight:n}=e,l=t&&e?t.getBoundingClientRect().top+a-e.getBoundingClientRect().top:0;if(l+r<a||l+r+i>a+n){const t=r-n/2+l+i/2;e.scrollTop=t}}(t.current,e.current,Math.floor(d/o)*l,l),c?.uri??null}),[e,t,n,r,a])}(B,k,Ke),lt=$?(0,f.jsx)(Pe,{onClick:tt}):null;let ot;(0,i.useEffect)((()=>{$&&re&&ne(A.fX.DEFAULT)}),[$,re,ne]),Ue&&!re&&(ot=it?(0,f.jsx)(ie,{className:Oe}):(0,f.jsx)(me,{className:Oe}));const st=_e?(0,f.jsx)(Se,{query:e,className:Oe}):null,ct=(0,d.NC)(C.AEN),gt=!re&&!ot&&(0,f.jsxs)("div",{className:n()(Gl,Oe,{[Zl]:ct}),children:[(0,f.jsx)(ol,{clearOnEscapeInElementRef:M,primaryFilter:t?.primaryFilter,spec:be},V),(0,f.jsx)(al,{sortOrders:t?.availableSortOrders??[],activeSortOrderId:t?.selectedSortOrder?.id,setActiveSortOrderId:w,root:M.current,showReorderingOnboarding:t?.primaryFilter===j.c.PLAYLIST&&!t?.reorderAllowed,spec:ye,scrollNodeRef:k})]}),yt=$&&!t,ht=ae&&!le&&!lt&&!ot,St=(t?.selectedFilters??[]).length>0,Ct=q&&!St&&!V;return(0,f.jsx)(U,{containerRef:M,findMatchingTypeaheadUid:nt,isEnabled:at,children:(0,f.jsxs)(de,{spec:ce,children:[(0,f.jsx)(wl,{}),(0,f.jsx)(p.h,{menu:(0,f.jsx)(h,{folderUri:V}),children:(0,f.jsxs)("div",{className:n()(Yl,{[et]:Le===Qe.Nz.ON,[Ql]:re}),ref:e=>{M.current=e,ge(e)},...Ee,tabIndex:-1,onDragStart:()=>De(!0),onDragEnd:()=>De(!1),children:[ve,(0,f.jsxs)("div",{className:n()({[ro]:rt}),children:[(0,f.jsx)(fn,{parentDropTargetClassName:Oe,isLibraryCompletelyEmpty:Ue,folderUri:t?.passedFolderUri,folderName:t?.openedFolderName,spec:ye.titleRowFactory()}),!Y&&(0,f.jsx)(ee,{spec:ye}),!re&&!yt&&(0,f.jsxs)("div",{className:io,children:[Ct&&(0,f.jsx)(no,{availableFilters:t?.availableFilters}),(0,f.jsx)(mt,{selectedFilters:t?.selectedFilters,availableFilters:t?.availableFilters,toggleFilterId:x,resetFilterIds:g,className:n()(eo,{[to]:!Je}),scrollNodeRef:k,spec:xe},ze),ae&&gt]}),ht&&(0,f.jsx)(Ye,{isScrolled:rt})]}),(0,f.jsx)(sl.a,{className:Jl,onInstanceCreated:e=>{k.current=e.elements().viewport},children:(0,f.jsx)(L.L,{containerRef:M,children:(0,f.jsxs)("div",{className:n()(ql,{[to]:!$&&!Je,[Ql]:re,[$l]:ht}),children:[!ae&&gt,!re&&t?.tagPlaylist&&(0,f.jsx)(Tl,{playlist:t.tagPlaylist}),lt||ot||st,(0,f.jsx)("div",{ref:B,children:le?(0,f.jsx)(Da,{getItems:Ke,scrollNodeRef:k,primaryFilter:t?.primaryFilter,nrValidItems:Xe,spec:fe}):(0,f.jsx)(On,{getItems:Ke,scrollNodeRef:k,primaryFilter:t?.primaryFilter,nrValidItems:Xe,spec:fe})})]})})}),Bl(),(0,f.jsx)(W,{})]})})]})})},oo=()=>{const{isAnonymous:e}=(0,o.d4)((e=>e.session));return(0,f.jsx)(S.s,{onError:e=>{(0,N.Jy)(e,"YourLibraryX")},children:(0,f.jsx)(xt.s,{uri:m.gv,children:(0,f.jsx)(Ae,{children:(0,f.jsxs)(ht,{children:[(0,f.jsx)(lo,{}),(0,f.jsx)(Fl,{isAnonymous:e})]})})})})}},34124:(e,t,r)=>{r.d(t,{P:()=>a});var i=r(60191);function a(){return(0,i.y)()[0]}},60191:(e,t,r)=>{r.d(t,{y:()=>n});var i=r(79474),a=r(29345);function n(){const e=(0,i.useContext)(a._),[t,r]=(0,i.useState)(e.getIsEnabled());(0,i.useEffect)((()=>{const t=e.subscribeIsEnabled(r);return()=>t()}),[e]);return[t,(0,i.useCallback)((t=>e.setIsEnabled(t)),[e])]}}}]);
//# sourceMappingURL=5550.js.map