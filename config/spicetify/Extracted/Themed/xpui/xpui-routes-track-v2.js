"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6863],{92917:(e,a,s)=>{s.d(a,{u:()=>y});var i=s(97500),r=s.n(i),t=s(98678),l=s(54452),n=s(9869),c=s(31853),o=s(3561),d=s(37125),u=s(97249),m=s(13274);const y=({uri:e,src:a,playAriaLabel:s,onClick:i,isPlaying:y,isActive:h,isLocked:p,isEpisode:g,isVideo:x,spec:b})=>{const v=(0,o.W)(),j=(0,n.s)(),k=(0,t.YQ)((a=>{let s;if(v({type:"click",intent:y?"pause":"play"}),b){const a=b.playbackButtonFactory();let i;i=h&&y?a.hitPause({itemToBePaused:e}):h&&!y?a.hitResume({itemToBeResumed:e}):a.hitPlay({itemToBePlayed:e}),s=j.logInteraction(i)}i(a,s)}),l.dG,{leading:!0,trailing:!1});return(0,m.jsxs)("div",{className:u.A.rowImageWithPlay,children:[(0,m.jsx)(c.e,{src:a,isEpisode:g,isVideo:x}),(0,m.jsx)(d.x,{className:r()(u.A.rowPlayPauseButton,u.A.rowImagePlayPauseButton),iconClassName:u.A.rowPlayPauseIcon,onClick:k,isPlaying:y,isLocked:p,playAriaLabel:s})]})}},66119:(e,a,s)=>{s.r(a),s.d(a,{default:()=>Qs});var i=s(79474),r=s(97500),t=s.n(r),l=s(83648),n=s(98891),c=s(90313),o=s(22061),d=s(77387),u=s(61444),m=s(22466),y=s(20370),h=s(48521),p=s(86682),g=s(62914),x=s(21740),b=s(93535),v=s(80156),j=s(80480),k=s(3191);const L="o2TlnuNKxRO5RnB9BpHB",R="q0Ke_aAvTcc4dO4wCHQt",f="UlKUfS_GcROZmofuafOW",w="I5LORTI1u3A6VoUvRCBf",I="TS85Qkpioa31wR0p4kzT",C="yL1DLXBc05CR_ACv_NhA",P="k5kRkUyoz9znqg_SGOVQ";var N=s(1111),A=s(7518),E=s(42311),T=s(56516),U=s(78268),S=s(65021),O=s(13274);let B=function(e){return e.SMALL="small",e.LARGE="large",e}({});const M=({art:e,disabled:a=!1,LinkComponent:s,name:i,size:r=B.SMALL,type:n,uri:c})=>{const o=e?[e]:[],d=r===B.SMALL?(0,N.C)(n):function(e){switch(e){case S.s.SINGLE:return m.Ru.get("track-page.from-the-single");case S.s.EP:return m.Ru.get("track-page.from-the-ep");case S.s.COMPILATION:return m.Ru.get("track-page.from-the-compilation");case S.s.ALBUM:default:return m.Ru.get("track-page.from-the-album")}}(n),y=(0,l.Zp)();return(0,O.jsxs)("div",{className:t()(L,{[f]:r===B.SMALL,[R]:a}),children:[(0,O.jsx)("div",{className:w,children:(0,O.jsx)(A.b,{images:o,size:T.Qe.SIZE_80,title:i,type:E.c.ALBUM})}),(0,O.jsxs)("div",{className:I,children:[(0,O.jsx)(U.Z,{variant:r===B.SMALL?"mestoBold":"finale",children:d}),(0,O.jsx)(s,{to:c,children:(0,O.jsx)(U.Z,{as:"div",className:C,variant:"balladBold",dir:"auto",children:i})})]}),(0,O.jsx)("div",{onClick:()=>{y((0,u.o_)(c).toURLPath(!0))},className:P})]})};var D=s(13125),F=s(57134),_=s(40088),q=s(3030),G=s(40360);let Y=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});const Z=(e,a)=>{switch(a.type){case"LYRICS_LOADING":return{...e,[a.uri]:{status:Y.LOADING}};case"LYRICS_LOADED":return{...e,[a.uri]:{status:Y.LOADED,data:a.response}};case"LYRICS_ERROR":return{...e,[a.uri]:{status:Y.UNAVAILABLE}};default:return(0,G.d)(a,`Unhandled lyrics action with type: ${a.type}`)}};var z=s(15893),V=s(52011);var $=s(23338);const W=async({trackUri:e,api:a,imageForLyricsRequest:s,isPlayable:i})=>{if(!i)return{hasLyrics:!1};const r=(0,u.o_)(e);try{const e=await(async(e,a,s)=>(await e.build().withHost(V.Hj).withPath(`/track/${encodeURIComponent(a)}/image/${encodeURIComponent(s)}`).withHeaders([{key:"App-Platform",value:"WebPlayer"}]).withQueryParameters({format:"json",vocalRemoval:!1}).withEndpointIdentifier("/track/{trackId}").send()).body)(a||z.n.getInstance(),r.id,s||"");return{hasLyrics:!0,syncType:e.lyrics.syncType,lyrics:e.lyrics.lines,provider:e.lyrics.provider,providerDisplayName:e.lyrics.providerDisplayName,providerLyricsId:e.lyrics.providerLyricsId,isRtlLanguage:e.lyrics.isRtlLanguage}}catch(e){if(e instanceof $.O&&404===e.status)return{hasLyrics:!1};throw e}},K={status:Y.LOADING},H={status:Y.UNAVAILABLE},J=i.createContext(void 0),Q=({children:e,initialState:a={}})=>{const s=i.useReducer(Z,a);return(0,O.jsx)(J.Provider,{value:s,children:e})},X=({uri:e,isAnonymous:a,imageForLyricsRequest:s,isPlayable:r})=>{const t=i.useContext(J);if(void 0===t)throw new Error("useTrackEntityLyrics must be used within a TrackEntityLyricsProvider");const[l,n]=t,c=e?l[e]:null;return(0,i.useEffect)((()=>{!c&&e&&(n({type:"LYRICS_LOADING",uri:e}),W({trackUri:e,imageForLyricsRequest:s,isPlayable:r}).then((a=>{n({type:"LYRICS_LOADED",uri:e,response:a})})).catch((()=>{n({type:"LYRICS_ERROR",uri:e})})))}),[n,s,r,c,e]),e&&(0,u.U_)(e)&&!a&&r?c||K:H};var ee=s(22929),ae=s(78826),se=s(19195),ie=s(5245),re=s(88140),te=s(73929),le=s(47440),ne=s(2711),ce=s(87936);const oe="oTRKhYD0MZlNPm66W3Tw",de="sc95MwPalcHwYGZ7j3xN",ue="zrCZCfYv4zZiB1HYv9i8",me="RnlxIDmWcYTbbwNSJNjA",ye="SHkxfN1vy0wpRMP1hK7I",he="COXBS6zLyyxKNYuEAzjZ",pe="sR5IpdOUvoUGYKlC9Dk1",ge="FHMr3WxshoYjZ7jd3YwI",xe="Evcwc4KM2tf9xrLbfB8B",be="x4_dsi31Cx2SO1L0uYIj",ve="euPDqfFEBILj9KHDNLC1",je="x6FPRUKK40oDCPP7g6Ls",ke="k3SPcfaKewjfdYumDcGw",Le="t9C7vRiN1OSC9uWfJEr0",Re="Onv6dO4lntCzKUqYa8PE",fe="vHNIIDpwcSLuHumlKDbY",we=({richTrack:e})=>{const{search:a}=(0,l.zy)(),s=(0,i.useCallback)((()=>new URLSearchParams(a.slice(1)).get("highlight")||""),[a])(),{tracklistRef:r}=(0,ce.h)(),t=e.albumOfTrack,n=(0,ne.J)(t?.uri||""),{usePlayContextItem:c}=(0,_.P)({uri:n},{featureIdentifier:"album"}),o=(0,i.useMemo)((()=>({items:[],totalCount:0})),[]),d=(0,te.t)();return t?(0,O.jsx)("div",{ref:r,className:pe,children:(0,O.jsx)(re.a,{columns:d,children:(0,O.jsx)(le.F,{ariaLabel:t.name,nrTracks:t.tracks.totalCount,albumUri:t.uri,highlightUri:s,discs:o,usePlayContextItem:c,hasHeaderRow:!1})})}):null};var Ie=s(90047),Ce=s(85809),Pe=s(91817),Ne=s(2338),Ae=s(56923),Ee=s(70105),Te=s(54800),Ue=s(82810),Se=s(42091),Oe=s(3561),Be=s(56607);const Me=i.memo((function({uri:e,togglePlay:a,isPlaying:s,isActive:r,spec:t,logger:l,backgroundColor:n,name:c,isPlayable:o,albumUri:d,artists:u}){const y=(0,Oe.W)(),p=(0,Be.n)(),[g,x]=(0,Ee.A)(e),j=(0,i.useCallback)((async()=>{y({targetUri:e,intent:g?"unsave":"save",type:"click"});const a=t.saveButtonFactory();l.logInteraction(g?a.hitRemoveLike({itemNoLongerLiked:e}):a.hitLike({itemToBeLiked:e}));try{await x(!g)}catch{}}),[y,e,g,t,l,x]),k=(0,i.useCallback)((()=>{const i=(0,v.$I)({isPlaying:s,isActive:r,spec:t.playButtonFactory(),logger:l,uri:e});a({loggingParams:i})}),[r,s,l,t,a,e]),L=(0,i.useCallback)((()=>{l.logInteraction(t.contextButtonFactory().hitUiReveal())}),[l,t]),R=(0,Se.j)();return(0,O.jsx)(Te.E,{backgroundColor:n,children:(0,O.jsxs)(Ue.S,{children:[(0,O.jsx)(Ae.e,{children:(0,O.jsx)(b.D,{onClick:k,isPlaying:s,disabled:!o,size:R,uri:e})}),(0,O.jsx)(Ae.e,{children:(0,O.jsx)(Ie.M,{isAdded:!!g,onClick:j,disabled:!p,size:R})}),(0,O.jsx)(Ce.f,{uri:e,isFollowing:!!g,onFollow:j,size:R}),(0,O.jsx)(Ne.b,{menu:(0,O.jsx)(h.P,{uri:e,albumUri:d,artists:u}),onShow:L,children:(0,O.jsx)(Pe.e,{label:m.Ru.get("more.label.context",c),size:R})})]})})})),De="OH5mnpJIVCJozYM3raMt",Fe="etw0slM6uVrCi5RR3iDi",_e=({padded:e,providerDisplayName:a})=>a?(0,O.jsx)(U.Z,{as:"p",dir:"auto",variant:"finale",className:`${De} ${e?Fe:""}`,children:m.Ru.get("web-player.lyrics.providedBy",a)}):null,qe=({uri:e,imageForLyricsRequest:a,isPlayable:s})=>{const{data:i}=X({uri:e,imageForLyricsRequest:a,isPlayable:s});return i?.hasLyrics?(0,O.jsx)(_e,{providerDisplayName:i.providerDisplayName}):null};var Ge=s(9037),Ye=s(80637);const Ze="QhDsXG1Gmo7XmQWLggAO",ze="bZgWQj7UxvK8GYKWDA7N",Ve="AW61P3tnW5cKJCWtbhFh",$e=({buttonText:e,onSecondaryButtonClick:a,onPrimaryButtonClick:s,secondaryButtonText:i,text:r})=>(0,O.jsxs)("div",{className:Ze,"data-testid":"static-activation-trigger",children:[(0,O.jsx)(n.E,{className:ze,variant:"bodyMediumBold",children:r}),(0,O.jsxs)("div",{className:Ve,children:[(0,O.jsx)(o.H,{onClick:a,semanticColor:"textBase",children:i}),(0,O.jsx)(Ye.$,{onClick:s,colorSet:"invertedLight",children:e})]})]});var We=s(40006);const Ke="T1nqQ4HEh3heHy4RCCKa",He="L8zjshPVgUMXyZR4FtOk",Je="YMn1FWcFmOz9osBrNvhF",Qe="Inbyq3TnvKDOJtcKFTDQ",Xe="lWk5se4WETUOJwaEb8D6",ea="i8DyQbWCmDV_8N5XGJQT",aa="t5WPFlGTY6GCd9UOFfLu",sa="AGQ3wRyMVK1odq860qnT",ia="ZX_r7uZgPgssaUplfpxT",ra="qrqctaPu2XBpxsw23nPX",ta="XnWidTagai3nQwMPxIMF";var la=s(16540),na=s(54452);let ca=function(e){return e.SMALL="small",e.LARGE="large",e}({});const oa=e=>{const{disabled:a,images:s,LinkComponent:i,name:r,size:n,uri:c,enableI18nRoutes:o,enableI18nAdditionalPages:d}=e,y=n===ca.SMALL,h=(0,l.Zp)(),p=(0,u.o_)(c),g=p?.type,x=m.Ru.getLocaleForURLPath(),b=(0,la.p)({localeFeatureFlag:o,entityFeatureFlag:d,urlLocale:x,entity:g,type:"link"});return(0,O.jsxs)("div",{className:t()(He,{[Je]:a}),"data-testid":"track-artist-link-card",children:[(0,O.jsx)(A.b,{shape:A.u.CIRCLE,images:s,size:T.Qe.SIZE_80,title:r,type:E.c.ARTIST}),(0,O.jsxs)("div",{className:t()(Xe,{[ea]:y}),children:[(0,O.jsx)(U.Z,{variant:"mestoBold",className:Qe,children:m.Ru.get("card.tag.artist")}),(0,O.jsx)(i,{to:c,children:(0,O.jsx)(U.Z,{as:"div",dir:"ltr",className:aa,variant:"balladBold",children:r})})]}),(0,O.jsx)("div",{onClick:()=>{const e=p?.toURL(`/${na.CT}${x}/`);if(p){const a=b?e:p.toURLPath(!0);h(a)}},className:sa})]})},da=({size:e=ca.LARGE,disabled:a=!1,enableI18nRoutes:s,enableI18nAdditionalPages:r,...l})=>{const[n,c]=(0,i.useState)(!1),d=(0,i.useCallback)((()=>{c(!n)}),[n]),u=l.artists;return(0,O.jsxs)("div",{"data-testid":"track-artist-link-card-container",children:[(0,O.jsx)("div",{className:Ke,children:u.map(((i,c)=>(0,O.jsx)("div",{className:t()({[ra]:n&&c>5,[ia]:c>5}),children:(0,O.jsx)(oa,{name:i.name,uri:i.uri,images:i.images,size:e,LinkComponent:l.LinkComponent,disabled:a,enableI18nRoutes:s,enableI18nAdditionalPages:r},i.id)},`${i.uri}-${c}`)))}),u.length>6&&(0,O.jsx)(o.H,{onClick:d,className:ta,children:(0,O.jsx)(U.Z,{as:"p",variant:"violaBold",children:n?m.Ru.get("show_less"):m.Ru.get("mwp.search.artists.all")})})]})};var ua=s(13766),ma=s(80404),ya=s(26972);const ha="EaTxqhHk6J4ecKHwpY5m",pa="dUQl9yd5x_1oWk4L0Ntm",ga="xt5C47eHPYNiriMJxGnC",xa=({words:e,onObserve:a,lyricsInView:s})=>{const{ref:r,inView:t}=(0,ya.Wx)({threshold:0}),l=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{s||(l.current=!1)}),[s]),(0,i.useEffect)((()=>{l.current||t&&(a({text:e,outOfView:!1}),l.current=!0)}),[t,a,e]),(0,O.jsx)(n.E,{ref:r,as:"p",dir:"auto",variant:"bodyMedium",className:ga,children:e})};var ba=s(49128);const va="q1JbsdMqX7OImgIFWa6J",ja="hAGejMh7SncdbJ5wcfUi",ka="IaG9Zc3xGxeYjsn73RAz",La="zgSEYVU2gMYxihFVEJPn",Ra="expandable-lyrics-container";const fa=({lyrics:e,lyricsInView:a,onObserve:s,previewCount:r})=>{const[l,c]=(0,i.useState)(!1),{visibleLyrics:o,collapsibleLyrics:d}=function(e,a){let s=0,i=-1;const r=e.filter((e=>!!e.words));for(const[e,t]of r.entries())if(s+=t.words.length,s>a){i=e-1;break}if(i>-1)return{visibleLyrics:r.slice(0,i),collapsibleLyrics:r.slice(i)};return{visibleLyrics:r,collapsibleLyrics:[]}}(e,r),u=d.length>0,y=l?m.Ru.get("show_less"):`…${m.Ru.get("show_more")}`;return(0,O.jsxs)(O.Fragment,{children:[o.map((({words:e},i)=>(0,O.jsx)(xa,{onObserve:s,words:e,lyricsInView:a},`lyrics-seo-line-${i}`))),(0,O.jsx)("span",{"aria-hidden":!l,className:t()(ka,{[La]:l}),children:d.map((({words:e},i)=>(0,O.jsx)(xa,{onObserve:l?s:()=>{},words:e,lyricsInView:l&&a},`lyrics-seo-line-${i}`)))}),u&&(0,O.jsx)("button",{className:va,onClick:()=>{c(!l)},"aria-controls":Ra,"aria-owns":Ra,"aria-label":y,children:(0,O.jsx)(n.E,{variant:"bodyMediumBold",className:ja,children:y})})]})},wa=({data:e,eventSender:a,playbackId:s,previewCount:r,trackPageEnhancedEnabled:t,uri:l})=>{const{lyrics:c=[],provider:o,providerLyricsId:d,syncType:u}=e,{ref:y,inView:h}=(0,ya.Wx)({threshold:0}),p=function(e){const{trackUri:a,provider:s,providerLyricsId:r,syncType:t,eventSender:l,playbackId:n}=e,c=(0,i.useRef)(null),[o,d]=(0,i.useState)(!1),[u,m]=(0,i.useState)(0),[y,h]=(0,i.useState)(!1),p=(0,i.useMemo)((()=>(0,ba.W)({lyrics_format:"track-page",track_uri:a,provider:s,provider_lyrics_id:r,sync_type:t,playback_id:n})),[s,r,t,a,n]);return(0,i.useEffect)((()=>{d(!1),m(0),h(!1),c.current=null}),[a]),(0,i.useEffect)((()=>{o&&n&&d(!1)}),[n]),(0,i.useEffect)((()=>{o||u>=140&&y&&(l?.send(p),d(!0))}),[u,o,p,l,y]),(0,i.useCallback)((e=>{const{text:a,outOfView:s}=e;a&&a.length>1&&(m((e=>e+a.length)),o||null!==c.current||(c.current=setTimeout((()=>{h(!0)}),1500))),s&&(c.current&&clearTimeout(c.current),c.current=null,m(0))}),[m,o])}({trackUri:l,provider:o,providerLyricsId:d,syncType:u,eventSender:a,playbackId:s});return(0,i.useEffect)((()=>{h||p({outOfView:!0})}),[h,p]),(0,O.jsxs)("div",{className:ha,ref:y,children:[(0,O.jsx)(n.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:pa,children:m.Ru.get("web-player.lyrics.title")}),!t&&c.map((({words:e},a)=>(0,O.jsx)(xa,{onObserve:p,words:e,lyricsInView:h},`lyrics-seo-line-${a}`))),t&&(0,O.jsx)(fa,{lyrics:c,lyricsInView:h,onObserve:p,previewCount:r})]})};var Ia=s(67270),Ca=s(21665),Pa=s(96910),Na=s(92980),Aa=s(7001),Ea=s(97774),Ta=s(45135),Ua=s(82755),Sa=s(16974),Oa=s(14137),Ba=s(66588),Ma=s(27707),Da=s(49865);const Fa=({uri:e,imageForLyricsRequest:a,isPlayable:s})=>{const[r,t]=(0,i.useState)(420),{trackPageEnhancedEnabled:l}=(0,Aa.Zo)(),{data:n}=X({uri:e,imageForLyricsRequest:a,isPlayable:s}),c=(0,Na.vh)(),{isPaused:o,currentTrackUri:d,playbackId:u}=(0,Ca.o)((e=>({isPaused:e?.isPaused,currentTrackUri:e?.item?.uri,playbackId:e?.playbackId})),Pa.a),m=!o&&d===e,y=(0,i.useCallback)((()=>{window.innerWidth<=768?t(280):window.innerWidth>768&&280===r&&t(420)}),[r]);return(0,i.useEffect)((()=>{y()}),[y]),(0,Ia.s)(y),n&&n?.hasLyrics?(0,O.jsx)(wa,{data:n,uri:e,eventSender:c,playbackId:m?u:void 0,previewCount:r,trackPageEnhancedEnabled:l}):null},_a=e=>{const a=(e=>{const a=(0,Na.vh)(),s=(0,Ge.d4)(Da.F6),i=(0,Ge.d4)(Ma.JJ),r=(0,Ge.d4)(Da.oo),t=(0,Oa.V)();return()=>{if(t)return;(0,Sa.fE)({metric_type:Ta.MetricTypes.COUNTER,what:"dwp-lyrics-component-error",value:1});const l={category:"lyrics_render_error",label:"dwp",os:(0,Ba.f)(),context:JSON.stringify({uri:e,product:r}),country:s?i:"",sp_t:(0,Ua.v8)("sp_t")};a.send((0,Ea._)(l))}})(e.uri);return(0,O.jsx)(ma.s,{onError:a,children:(0,O.jsx)(Fa,{...e})})};var qa=s(67452);const Ga=e=>{const{albumArtists:a,columnCount:s,imageForLyricsRequest:r,isPlayable:l,uri:n}=e,c=s-2,o={"--column-count":s,"--left-column-end":c-2,"--right-column-start":c},{isAnonymous:d}=(0,Ge.d4)(Da.Ht),u=(0,Be.n)(),{trackPageEnhancedEnabled:y,trackPageLinksNoLyricsEnabled:h,trackPageNoLyricsEnabled:p}=(0,Aa.Zo)(),g=!h&&!p,{data:x,status:b}=X({uri:n,isAnonymous:d,imageForLyricsRequest:r,isPlayable:l}),v=!!x&&x.hasLyrics&&b!==Y.UNAVAILABLE,j=(v||d)&&g,k=(L=v,y?L?Aa.rt.HasLyrics:Aa.rt.NoLyrics:Aa.rt.Ineligible);var L;const R=(0,Aa.E6)(k),f=(0,Ge.d4)(qa.MU),w=(0,Ge.d4)(qa.NR);(0,i.useEffect)((()=>{R()}),[R]);return(0,O.jsxs)(i.Suspense,{fallback:null,children:[j&&(0,O.jsx)("div",{className:t()(ue,{[me]:s>5}),style:{...o},"data-testid":"lyrics-container",children:d?(0,O.jsx)($e,{buttonText:m.Ru.get("sign_up"),secondaryButtonText:m.Ru.get("login"),text:m.Ru.get("track-page.sign-in-to-view-lyrics"),onPrimaryButtonClick:ua.ie,onSecondaryButtonClick:ua.PW}):(0,O.jsx)(_a,{uri:n,imageForLyricsRequest:r,isPlayable:l})}),(0,O.jsx)("div",{className:t()(oe,{[de]:s>5&&j}),style:{...o},children:(0,O.jsx)(da,{artists:a,LinkComponent:We.default,disabled:!u,enableI18nRoutes:f,enableI18nAdditionalPages:w})})]})};var Ya=s(33783),Za=s(98954),za=s(16015),Va=s(98475),$a=s(30201),Wa=s(80236),Ka=s(99049),Ha=s(57108),Ja=s(2255);const Qa=new Ha.l("internalLinkRecommenderTrack","query","8c3372e8c118eafd4e044b843473266ff1c7b9deb03f730080cfcad8646829e7",null);var Xa=s(94726),es=s(36943),as=s(1879),ss=s(30620),is=s(72078),rs=s(50859),ts=s(85438),ls=s(81980),ns=s(56404),cs=s(28304),os=s(12157),ds=s(63378),us=s(98046),ms=s(92917),ys=s(12010),hs=s(32345),ps=s(16319),gs=s(30994),xs=s(45129),bs=s(75773),vs=s(25046),js=s(1250),ks=s(61988);const Ls="Z9Dr8PkXFtlO8KnnDcxp",Rs="Bm0LUMlhVIcF5qusgdUP",fs="GIyB7JDkRwjtVL6PSBbg",ws="whTIka0YYAkqhqrs26Wa",Is=i.memo((function({uri:e,name:a,imgUrl:s,artists:i,isExplicit:r,index:t,albumUri:l,contextUri:n,isPlayable:c,isMOGEFRestricted:o,totalMilliseconds:d,playcount:u}){const{isActive:p,isPlaying:g,triggerPlay:x,togglePlay:b}=(0,_.P)({uri:e},{featureIdentifier:"ilr"}),v=(0,is.T)(e),j=(0,ns.g)(e,c),k=i.map((e=>e.name)).join(m.Ru.getSeparator()),{badges:L,hasBadges:R}=(0,rs.b)({isMOGEFRestricted:o,downloadAvailability:v,isExplicit:r}),f=i.map((e=>e.name)).join(m.Ru.getSeparator()),w=(0,ls.c)();return(0,O.jsx)(ss.pZ,{value:"row",index:t,children:(0,O.jsx)(y.h,{menu:(0,O.jsx)(h.P,{uri:e,albumUri:l,artists:i,contextUri:n}),children:(0,O.jsxs)(ks.w,{uri:e,contextUri:n,isPlayable:j,onTriggerPlay:(e,a)=>{x({loggingParams:a})},isActive:p,index:t,ariaRowIndex:t,dragMetadata:{name:a,createdBy:k},children:[(0,O.jsxs)(xs.U,{ariaColIndex:0,children:[(0,O.jsx)(ms.u,{uri:e,src:s,onClick:(e,a)=>{b({loggingParams:a})},isLocked:!1,isPlaying:g,isActive:p,playAriaLabel:m.Ru.get("tracklist.a11y.play",a,k)}),(0,O.jsxs)(ys.l,{children:[(0,O.jsx)(cs.R,{uri:e,enabled:w,className:fs,children:(0,O.jsx)(js.p,{titleText:a,children:a})}),R&&(0,O.jsxs)(ds.P,{children:[L.download&&(0,O.jsx)(Xa._,{}),L.explicit&&(0,O.jsx)(es.g,{}),L.nineteen&&(0,O.jsx)(as.q,{className:ws,size:16})]}),(0,O.jsx)(vs.p,{children:(0,O.jsx)(os.l,{artists:i})})]})]}),(0,O.jsx)(bs.o,{ariaColIndex:1,children:(0,O.jsx)(ps.Y,{playcount:u})}),(0,O.jsxs)(gs.l,{ariaColIndex:2,children:[(0,O.jsx)(ts.d,{uri:e}),(0,O.jsx)(us.P,{duration:d}),(0,O.jsx)(hs.Y,{menu:(0,O.jsx)(h.P,{uri:e,albumUri:l,contextUri:n,artists:i}),label:m.Ru.get("more.label.track",a,f)})]})]})})})}),((e,a)=>e.uri===a.uri&&e.index===a.index));var Cs=s(48667),Ps=s(55559),Ns=s(52198),As=s(2884);const Es=i.memo((function({subtitle:e,uri:a}){const{data:s}=(r={uri:a,strategy:Ka.N0.ContentOnly},(0,Ja.I)(Qa,r,t));var r,t;const l=s?.seoRecommended.items,o=(0,i.useMemo)((()=>l?.slice(0,Math.min(l.length,5))),[l]),d=(0,i.useCallback)((e=>({uri:"uri"in e.data?e.data.uri:""})),[]),u=(0,i.useMemo)((()=>[As.$.TITLE_AND_ARTIST,As.$.ALBUM,As.$.DURATION]),[]),y=(0,i.useCallback)(((e,s)=>{if(!(0,Cs.g1)(e.data))return(0,O.jsx)(i.Fragment,{});const r=e.data;return(0,O.jsx)(Is,{index:s,contextUri:a,uri:r.uri,name:r.name,totalMilliseconds:r.duration.totalMilliseconds,imgUrl:r.albumOfTrack?.coverArt?.sources[0]?.url,isPlayable:r.playability.playable,artists:r.artists.items.map((e=>({uri:e.uri,id:e.id,name:e.profile.name}))),albumUri:r?.albumOfTrack?.uri||"",isExplicit:r.contentRating?.label===Ka.x7.Explicit,isMOGEFRestricted:r.contentRating?.label===Ka.x7.NineteenPlus,playcount:parseInt(r.playcount||"0",10)},`${s}-${r.uri}`)}),[a]);return l?.length?(0,O.jsxs)("div",{className:Ls,children:[(0,O.jsxs)("div",{className:Rs,children:[(0,O.jsx)(n.E,{variant:"titleSmall",semanticColor:"textBase",children:m.Ru.get("playlist.extender.recommended.title")}),(0,O.jsx)(n.E,{variant:"bodySmall",paddingBottom:c.CD,children:e})]}),(0,O.jsx)(Ns.S4,{ariaLabel:m.Ru.get("playlist.extender.recommended.title"),nrTracks:Math.min(l.length,5),rowPlaceholder:Ps.qq,tracks:o,renderRow:y,resolveItem:d,columns:u},"internal-link-recommender-track-list")]}):null})),Ts=e=>{const{entityType:a}=e;return(0,O.jsx)(ma.s,{onError:()=>{(0,Sa.fE)({metric_type:Ta.MetricTypes.COUNTER,what:"dwp-ilr-component-error",value:1,tags:{entityType:a}})},children:(0,O.jsx)(Es,{...e})})};var Us=s(47483),Ss=s(90636),Os=s(57122);const Bs=({album:e,index:a,artistURI:s})=>(0,O.jsx)(ss.pZ,{value:"card",index:a,children:(0,O.jsx)(Os.R,{index:a,latest:!1,showType:!0,...(0,Ss.m)(e,s,e.name)})});var Ms=s(46116);const Ds=({albums:e,artistName:a,artistId:s,artistUri:i,className:r})=>e?(0,O.jsx)(ss.pZ,{value:"shelf/albums",children:(0,O.jsx)(Ms.$,{total:e.totalCount,title:m.Ru.get("rich-page.popular-albums-by-artist",{artist:a}),seeAllUri:`${(0,Us.Dh)(s)}:discography:${Ka._m.Album.toLowerCase()}`,seeAllLabel:m.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:r,children:(0,Us.Ey)(e.items).map(((e,a)=>(0,O.jsx)(Bs,{album:e,index:a,artistURI:i},e.uri)))})}):null;var Fs=s(50879);const _s=({artistId:e,className:a,fansAlsoLike:s,title:i})=>(0,O.jsx)(ss.pZ,{value:"shelf/fans-also-like",children:(0,O.jsx)(Ms.$,{total:s.length,title:i??m.Ru.get("rich-page.fans-also-like"),seeAllUri:`${(0,Us.Dh)(e)}:related`,className:a,children:s.map(((e,a)=>(0,O.jsx)(ss.pZ,{value:"card",index:a,children:(0,O.jsx)(Fs.a,{index:a,uri:e.uri,name:e.profile.name,images:e.visuals.avatarImage?.sources||[]})},e.uri)))})});var qs=s(5715);const Gs="ERm7dIKbVoqGwPb_lXPH",Ys=({artistName:e,artistUri:a,headerClassName:s,rowClassName:r,topTracks:t,topTracksTransformer:l,uri:c})=>{const o=(0,i.useMemo)((()=>t?.items.map((e=>l(e,c)))),[t?.items,l,c]);return o&&o.length>0?(0,O.jsxs)("div",{className:r,children:[(0,O.jsxs)("div",{children:[(0,O.jsx)(n.E,{variant:"bodySmall",className:Gs,children:m.Ru.get("rich-page.popular-tracks")}),(0,O.jsx)(n.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:s,children:e})]}),(0,O.jsx)(qs.z,{uri:a,nrTracks:o.length,initialTracks:o})]}):null},Zs=({artistName:e,artistId:a,artistUri:s,className:i,releases:r,artistImages:t})=>r?(0,O.jsx)(ss.pZ,{value:"shelf/releases",children:(0,O.jsx)(Ms.$,{total:10,title:m.Ru.get("rich-page.popular-releases-by-artist",{artist:e}),seeAllUri:`${(0,Us.Dh)(a)}:discography:${Ka._m.Album.toLowerCase()}`,seeAllLabel:m.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:i,listRowHeaderProps:t?{title:e,pretitle:m.Ru.get("artist-page.popular"),media:(0,ae.h)(t,{desiredSize:48})||""}:null,children:r.items.map(((e,a)=>(0,O.jsx)(Bs,{album:e,index:a,artistURI:s},e.uri)))})}):null,zs=({artistId:e,artistName:a,artistUri:s,className:i,singles:r})=>r?(0,O.jsx)(ss.pZ,{value:"shelf/singles-and-eps",children:(0,O.jsx)(Ms.$,{total:r.totalCount,title:m.Ru.get("rich-page.popular-singles-and-eps-by-artist",{artist:a}),seeAllUri:`${(0,Us.Dh)(e)}:discography:${Ka._m.Single.toLowerCase()}`,seeAllLabel:m.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:i,children:(0,Us.Ey)(r.items).map(((e,a)=>(0,O.jsx)(Bs,{album:e,index:a,artistURI:s},e.uri)))})}):null;var Vs=s(27936),$s=s(15858),Ws=s(82752);const Ks=e=>(e.items||[]).map((e=>({name:e.profile.name,images:(e.visuals.avatarImage?.sources||[]).map((e=>({url:e.url,width:e.width,height:e.height}))),uri:e.uri,id:e.id}))),Hs=e=>(e||[]).map((e=>e.profile.name)),Js=({uri:e,track:a})=>{const s=(0,Be.n)(),r=(0,Oa.V)(),l=(0,Vs.W)({type:"locale",uri:e}),u=m.Ru.getLocaleForTranslation(),x=parseInt(a.playcount||"0",10),{firstArtist:L,otherArtists:R,albumOfTrack:f,duration:w,name:I}=a,C=f?.coverArt,P=f?.copyright.items,N=f?.courtesyLine,{date:A,precision:T}=f?.date?(0,se.mp)(f.date):{date:void 0,precision:void 0},U=C?.extractedColors?.colorRaw.hex,S=(C?.sources||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),D={uri:f?.uri||"",name:f?.name||""},F=Hs(L.items),G=Hs(R.items),Y=Ks(L),Z=Ks(R),z=[...Y,...Z],V=L.items[0],$=a.albumOfTrack,W=$?.playability?.playable,K={artistId:V?.id,artistName:V?.profile?.name,artistUri:V?.uri},H=a.albumOfTrack?.coverArt?.sources,J=(0,ae.h)(H||void 0,{desiredLabel:"large",desiredSize:600})??H?.[0]?.url??"",[X,re]=(0,i.useState)(!1),te=(0,i.useCallback)((()=>{re(!X)}),[X]),le=R&&R.items.length>5,{spec:ce,logger:oe}=(0,ee.r)(d.createDesktopTrackEventFactory,{data:{uri:e}}),de=a.playability.playable,ue=(0,ne.J)(e),{togglePlay:me,isPlaying:pe,isActive:Ie}=(0,_.P)({uri:ue},{featureIdentifier:"track"}),{trackPageLinksNoLyricsEnabled:Ce,trackPageNoLyricsEnabled:Pe}=(0,Aa.Zo)(),Ne=Ce||Pe,Ae=(0,i.useCallback)((()=>(0,q.rO)({i18n:m.Ru,trackArtistsList:[...F,...G].join(m.Ru.getSeparator()),trackName:a.name,shouldLocalize:l,disabled:Ne})),[F,Ne,G,l,a.name]),Ee=(0,i.useCallback)(((e,a)=>{oe.logInteraction(ce.headerFactory().artistLinkFactory({position:a.position,uri:a.creator.uri}).hitUiNavigate({destination:a.creator.uri}))}),[oe,ce]),Te=(0,i.useCallback)((()=>{const a=(0,v.$I)({isPlaying:pe,isActive:Ie,spec:ce.actionBarFactory().playButtonFactory(),logger:oe,uri:e});me({loggingParams:a})}),[Ie,pe,oe,ce,me,e]),Ue=$?.uri,Se=(0,i.useMemo)((()=>[...L.items,...R.items].map((e=>({uri:e.uri,name:e.profile.name})))),[L.items,R.items]),Oe=(0,O.jsx)(h.P,{uri:e,albumUri:Ue,artists:Se});return(0,O.jsxs)("section",{"data-testid":"track-page",children:[(0,O.jsx)(Ya.Q,{children:Ae()}),(0,O.jsxs)(Za.z,{backgroundColor:U,children:[(0,O.jsxs)(p.h,{children:[(0,O.jsx)(b.D,{size:"medium",onClick:Te,disabled:!de,isPlaying:pe,uri:e}),(0,O.jsx)(g.X,{text:I,dragUri:e,dragLabel:I})]}),(0,O.jsx)(y.h,{menu:Oe,children:(0,O.jsx)(za.K,{dragUri:e,images:S,name:I,placeholderType:"album"})}),(0,O.jsxs)(Va.Y,{children:[(0,O.jsx)(n.E,{variant:"bodySmallBold",children:m.Ru.get("song")}),(0,O.jsx)(y.h,{menu:Oe,children:(0,O.jsx)(Wa.mm,{dragUri:e,dragLabel:I,children:I})}),(0,O.jsx)($a.t,{creators:Y,releaseDate:A,releaseDatePrecision:T,durationMilliseconds:w.totalMilliseconds,onCreatorClick:Ee,isTrack:!0,album:D,playcount:x})]})]}),(0,O.jsx)(Me,{uri:e,togglePlay:me,isPlaying:pe,isActive:Ie,spec:(0,i.useMemo)((()=>ce.actionBarFactory()),[ce]),logger:oe,backgroundColor:U,name:I,isPlayable:de,albumUri:Ue,artists:Se}),(0,O.jsxs)(Q,{children:[(0,O.jsxs)("div",{className:"contentSpacing",children:[(0,O.jsx)("div",{className:ye,children:(0,O.jsx)(k.E,{render:({columnCount:a})=>(0,O.jsx)(Ga,{imageForLyricsRequest:J,albumArtists:z,columnCount:a,uri:e,isPlayable:de}),rowGap:c.lT})}),(0,O.jsx)(Ts,{subtitle:m.Ru.get("internal-link-recommender.based-on-this-song"),uri:a.uri,entityType:E.c.TRACK}),(0,O.jsx)(Ys,{artistName:V.profile.name,artistUri:V.uri,headerClassName:xe,rowClassName:ye,topTracks:V.discography.topTracks,topTracksTransformer:$s.fX,uri:a.uri}),(0,O.jsx)(Zs,{className:ge,releases:V?.discography?.popularReleasesAlbums,...K}),(0,O.jsx)(Ds,{albums:V?.discography?.albums,className:ge,...K}),(0,O.jsx)(zs,{className:ge,singles:V?.discography?.singles,...K}),R&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{className:ve,children:R.items.map(((e,a)=>(0,O.jsx)(Zs,{className:t()(be,{[ke]:a>4,[Le]:X&&a>4}),releases:e.discography.popularReleasesAlbums,artistName:e.profile.name,artistId:e.id,artistUri:e.uri,artistImages:e.visuals.avatarImage?.sources},e.id)))}),le&&(0,O.jsx)(o.H,{onClick:te,className:Re,children:(0,O.jsx)(n.E,{as:"h2",variant:"bodySmallBold",children:X?m.Ru.get("show_less"):m.Ru.get("mwp.search.artists.all")})}),(0,O.jsx)(_s,{artistId:V.id,className:t()(ge,{[je]:R.items.length>0}),fansAlsoLike:V.relatedContent.relatedArtists.items,title:m.Ru.get("artist-page.fansalsolike")})]}),$&&(0,O.jsx)(M,{art:$.coverArt?.sources[0],disabled:!W||!s,LinkComponent:We.default,name:$.name,type:$.type,size:B.LARGE,uri:$.uri}),(0,O.jsx)(we,{richTrack:a})]}),(0,O.jsx)("div",{className:"contentSpacing",children:(0,O.jsxs)("div",{className:he,children:[A&&(0,O.jsx)(n.E,{as:"p",variant:"bodySmall",className:fe,children:(0,ie.rh)((0,ie.ad)(A),u,{year:"numeric",month:"long",day:"numeric"},T)}),(0,O.jsx)(j.Z,{copyrights:P||[],courtesyLine:N}),!r&&(0,O.jsx)(qe,{uri:e,imageForLyricsRequest:J,isPlayable:de})]})})]})]})},Qs=(0,i.memo)((function(){const{trackId:e=""}=(0,l.g)(),a=(0,u.tR)(e).toURI(),s=(0,Ws.J)({uri:a});return s.loading||s.error||"Track"!==s.data?.trackUnion?.__typename?(0,O.jsx)(x.A,{hasError:!s.loading,errorMessage:m.Ru.get("track-page.error")}):(0,O.jsx)(F.P,{surface:D.u.TRACK,uris:[a,s.data.trackUnion.albumOfTrack?.uri??null],children:(0,O.jsx)(Js,{uri:a,track:s.data.trackUnion})})}))},82752:(e,a,s)=>{s.d(a,{J:()=>l});var i=s(57108),r=s(2255);const t=new i.l("getTrack","query","ae85b52abb74d20a4c331d4143d4772c95f34757bfa8c625474b912b9055b5c0",null),l=(e,a)=>(0,r.I)(t,e,a)}}]);
//# sourceMappingURL=xpui-routes-track-v2.js.map