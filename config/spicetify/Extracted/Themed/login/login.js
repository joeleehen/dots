(()=>{var e,t={4437:(e,t,n)=>{"use strict";var a=n(8088),s=n(1115),i=n(2561);(0,i.m9)({name:"enableNothing",description:"Property to that does nothing.",default:!1});const r=(0,i.m9)({name:"enableNewLoginExperience",description:"Enable new login design and experience",default:!1});var o=n(9474),l=n(637),d=n(4533);const c="EDO6W2NIL5kJzuuvw2J7",u="bnCvPLsrkevVeOYYpwQG",m="qizIRC62kg8aAqE5y1K6";n(6805),n(4563),n(9606),n(8211),n(4164),n(9499),n(9271);var p=n(4758),g=n.n(p);const h=864e5;class f{_cache=new Map;constructor(e=null){if(this._ttl=e,null!==e&&(e<1||e>h))throw new Error("TTL should be between 1 (1 ms) and 86400000 (1 day).")}isExpired(e){return null!==e.expiry&&e.expiry<Date.now()}getExpiry(){return null!==this._ttl?Date.now()+this._ttl:null}entries(){return this._cache.entries()}has(e){return void 0!==this.get(e)}get(e){const t=this._cache.get(e);if(void 0!==t){if(!this.isExpired(t))return t.value;this._cache.delete(e)}}set(e,t){this._cache.set(e,{value:t,expiry:this.getExpiry()})}create(e,t){const n=this.get(e);if(void 0===n){const n=t();return this.set(e,n),n}return n}delete(e){this._cache.delete(e)}clear(){this._cache.clear()}cleanup(){this._cache.forEach(((e,t)=>{this.isExpired(e)&&this._cache.delete(t)}))}}let b=function(e){return e.AR="، ",e.FA="، ",e.EN=", ",e}({}),E=function(e){return e.af="af",e.am="am",e.ar="ar",e.arEG="ar-EG",e.arMA="ar-MA",e.arSA="ar-SA",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.bs="bs",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.enGB="en-GB",e.es419="es-419",e.es="es",e.esAR="es-AR",e.esMX="es-MX",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gl="gl",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.mk="mk",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhHK="zh-HK",e.zhTW="zh-TW",e.zu="zu",e}({});const w=new Intl.Locale(E.en);Object.values(E);function y(e){const t=`(?:${e.join("|")})`;return new RegExp(String.raw`(\{${t}\}|%${t}%)`,"g")}const v=new class{_localeForTranslation=w;_localeForFormatting=w;_localeForURLPath=w;_translations={};_relativeTimeFormat=null;_dateTimeFormats=new f;_pluralRules=null;getRelativeTimeFormat(){return null===this._relativeTimeFormat&&(this._relativeTimeFormat=new Intl.RelativeTimeFormat(this._localeForFormatting)),this._relativeTimeFormat}getDateTimeFormat(e){const t=JSON.stringify(Object.keys(e).sort().map((t=>({[t]:e[t]}))));return this._dateTimeFormats.create(t,(()=>new Intl.DateTimeFormat(this._localeForFormatting,e)))}getPluralRules(){return null===this._pluralRules&&(this._pluralRules=new Intl.PluralRules(this._localeForTranslation)),this._pluralRules}getPluralKey(e){const t=this.getPluralRules();try{return"string"==typeof e&&(e=parseInt(e,10)),t.select(e)}catch{return"other"}}initialize({localeForTranslation:e,localeForFormatting:t,translations:n}){var a;this._localeForTranslation=new Intl.Locale(e),this._localeForFormatting=("string"==typeof(a=t??e)&&(a=new Intl.Locale(a)),"ar"===a.baseName?new Intl.Locale(a,{numberingSystem:"latn"}):a),this._localeForURLPath=function(e){"string"==typeof e&&(e=new Intl.Locale(e));const t=new Set([E.paIN,E.paPK,E.zhCN,E.zhTW,E.zhHK]);return e?t.has(e.baseName)?e:new Intl.Locale(e.language):w}(e),this._relativeTimeFormat=null,this._dateTimeFormats.clear(),this._pluralRules=null,this._translations=n}getLocaleForTranslation(){return this._localeForTranslation.baseName}getLocaleForFormatting(){return this._localeForFormatting.baseName}getLocaleForURLPath(){return this._localeForURLPath.baseName}getLocaleForSmartling(){const e=this._localeForTranslation.baseName;return g()[e]||e}getTranslations(){return this._translations}toLocaleLowerCase(e){return e?.toLocaleLowerCase(this._localeForTranslation)}toLocaleUpperCase(e){return e?.toLocaleUpperCase(this._localeForTranslation)}get(e,...t){const n=e in this._translations?this._translations[e]:e;let a="";if("string"!=typeof n){const e=t[0],s=n[this.getPluralKey(e)];void 0!==s?a=s:n.other&&(a=n.other)}else a=n;if(/%\d%/.test(a)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}const s={},i={};t.forEach(((e,t)=>{const n="object"!=typeof e||null===e||(0,o.isValidElement)(e)?[[t,e]]:Object.entries(e);for(const[e,t]of n)(0,o.isValidElement)(t)?i[e]=t:void 0!==t&&(s[e]=t)})),a=a.replace(y(Object.keys(s)),((e,t)=>{const n=t.slice(1,-1),a=s[n];return"number"==typeof a?this.formatNumber(a):a}));const r=Object.keys(i);return r.length?(0,o.createElement)(o.Fragment,null,a.split(y(r)).map(((e,t)=>{if(t%2){const t=e.slice(1,-1),n=i[t];return(0,o.cloneElement)(n,{key:n.key??t})}return e})).filter((e=>""!==e))):a}getSeparator(){switch(new Intl.Locale(this._localeForTranslation).language){case E.ar:return b.AR;case E.fa:return b.FA;default:return b.EN}}formatNumber(e,t){return e.toLocaleString(this._localeForFormatting,t)}formatNumberCompact(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}formatDate(e,t=null){const n=t||{year:"numeric",month:"long",day:"numeric"};return this.getDateTimeFormat(n).format(e)}formatRelativeDate(e,t=null,n=new Date){const a=this.getRelativeTimeFormat(),s=e.getTime()-n.getTime(),i=Math.abs(s)<2592e6;if(null!==a&&i){const{weeks:e,days:t,hours:n,minutes:i,seconds:o}=(r=s,{seconds:Math.round(r/1e3),minutes:Math.round(r/1e3/60),hours:Math.round(r/1e3/60/60),days:Math.round(r/1e3/60/60/24),weeks:Math.round(r/1e3/60/60/24/7)});return Math.abs(t)>=7?a.format(e,"weeks"):Math.abs(n)>=24?a.format(t,"days"):Math.abs(i)>=60?a.format(n,"hours"):Math.abs(o)>=60?a.format(i,"minutes"):a.format(o,"seconds")}var r;return this.formatDate(e,t)}};let S=function(e){return e.AD="ad",e.ALBUM="album",e.ARTIST="artist",e.ARTIST_CONCERTS="artist-concerts",e.AUDIOBOOK="audiobook",e.CHAPTER="chapter",e.CONCERT="concert",e.CONCERTS="concerts",e.EPISODE="episode",e.PODCAST_SHORT="podcast-short",e.GENRE="genre",e.HOME="",e.VIEW="view",e.PLAYLIST="playlist",e.PLAYLISTV2="playlist-v2",e.SHOW="show",e.TRACK="track",e.UNKNOWN="unknown",e.USER="user",e.LIKED_SONGS="liked-songs",e.LOCAL_FILES="local-files",e.YOUR_EPISODES="your-episodes",e.FOLDER="folder",e.PREMIUM="premium",e.PRE_RELEASE_ALBUM="pre-release-album",e.PRE_RELEASE_BOOK="pre-release-book",e}({});const k="intl-",A=(new RegExp(`${`/${k}`}([a-zA-Z0-9-]+)`),[]),x=[E.id,E.de,"pt",E.ja,E.fr,E.ar,E.es,E.tr,E.it],[_]=(E.en,S.ALBUM,S.ARTIST,S.TRACK,S.PREMIUM,S.CONCERT,S.CONCERTS,E.hu,x);A.length||E.ca,E.zhCN,E.es419,E.es;var L=n(3274);const N=({toggleSettings:e})=>(0,L.jsxs)("header",{className:c,children:[(0,L.jsx)("div",{children:(0,L.jsx)("img",{className:u,src:"images/logo.svg",alt:""})}),(0,L.jsxs)("div",{className:m,children:[(0,L.jsx)(l.$,{onClick:e,size:"small",colorSet:"invertedDark",children:v.get("desktop.login.PreferencesLink")}),(0,L.jsx)(l.$,{as:"a",href:"https://open.spotify.com/",size:"small",iconTrailing:d.H,colorSet:"invertedDark",children:v.get("desktop-auth.login.preview-experience")})]})]}),C="dDq7z7SMlOtaz9XvBhD8",O="U5LyL65TJ6tdGjHlaK1q",T="awxiyoFzSyDm_MbWN_eY";var R=n(4190),P=n(8268),M=n(6683);let I=function(e){return e.XSMALL="XSMALL",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE",e.XLARGE="XLARGE",e}({});const D="_Cavu1tQ2xHOf1gnVGLI",j="OAeAxLyDsiZO9kZm0WTJ",F="aO8ExrFCupBc13AZlOiu";var B=n(5017);const U="RKmCwNfF52QOvDMMoteA",H="VDAySBjjOh9Kf83VFHyw",V="N8UxiIkVqP_rLpZHNysn",W="E5bQk5goX9hChELcTBbe",z="cgl3eWBkELRCNdMhDX8w",G="cRd8EyQyHz4DK42rr3yw";var K=n(7500),Y=n.n(K),J=n(8803),X=n.n(J);let $=function(e){return e.DISABLED="DISABLED",e.RESTRICTED="RESTRICTED",e.ENABLED="ENABLED",e}({}),q=function(e){return e.DISABLED="DISABLED",e.TWO_USER="TWO_USER",e.MULTI_USER="MULTI_USER",e}({}),Z=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant",e}({}),Q=function(e){return e.DEFAULT="default",e.VARIANTA="varianta",e.VARIANTB="variantb",e}({}),ee=function(e){return e.DEFAULT="default",e.VARIANTA="varianta",e.VARIANTB="variantb",e}({}),te=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant",e}({});(0,i.m9)({name:"exampleOfSharedPropertyThatDoesNotExist",description:"Example of enabling a propoerty that is shared between Desktop, Mobile and Embed",default:!1}),(0,i.m9)({name:"enableOfflineVideoDev",description:"Enables Spotify videos to be offlined on DesktopX. Used during feature development",default:!1}),(0,i.m9)({name:"betamaxWidevineVersionSupported",description:"true if the version of widevine used is still supported.",default:!0}),(0,i.m9)({name:"betamaxBoomboxAudioSync",description:"true if video/audio sync is enabled (experimental).",default:!1}),(0,i.HW)({name:"betamaxOfflineTargetBitrate",description:"targetBitrate to use when offlining. The closest to this bitrate to this is used.",default:12e5,lower:1e3,upper:1e9}),(0,i.m9)({name:"enableBetamaxSdkSubtitlesDesktopX",description:"Enables subtitles setting and rendering subtitles on the betamax SDK on DesktopX",default:!0}),(0,i.m9)({name:"enableBetamaxSdkMuxDesktopXDev",description:"Enables MUX library for development on Desktop X",default:!1}),(0,i.m9)({name:"enableVideoOnVideoSaiDev",description:"Enables video-on-video SAI on videos Desktop X. Used during feature development",default:!0}),(0,i.m9)({name:"enableBetamaxSdkVmp",description:"Enables client-side widevine VMP (verified media path) on betamax SDK.",default:!0}),(0,i.m9)({name:"enableBetamaxSdkVideoOnVideoSai",description:"Enables video-on-video SAI on videos Desktop X",default:!1}),(0,i.HW)({name:"betamaxSdkMinimumBuffer",description:"Sets the minimum buffer goal (in seconds) required before starting or resuming playback video on betamax SDK",default:2,upper:8,lower:0}),(0,i.HW)({name:"betamaxSdkRetryAttempts",description:"The number of times to retry on network",default:2,upper:100,lower:1}),(0,i.m9)({name:"betamaxSdkDataSaverV2",description:"Enables the data saver feature on betamax SDK (linked to the video show/hide controls and close video window)",default:!0}),(0,i.HW)({name:"betamaxSdkDataSaverBufferMargin",description:"Sets the amount of buffer in seconds to be kept when disabling data saver (lower = faster variant change)",default:4,upper:100,lower:0}),(0,i.m9)({name:"betamaxVideoAutoplay",description:"Enables an alternative method for video autoplay to address Mux metrics",default:!1}),(0,i.m9)({name:"enableBetamaxSdkInitialLowBitrateV2",description:"Optimize startup time by choosing the lowest quality for the first segment",default:!0}),(0,i.m9)({name:"enableBetamaxSdkSurfaceBasedResolutionCapV2",description:"Enables surface-based resolution cap for adaptive video on betamax SDK",default:!0}),(0,i.HW)({name:"betamaxSdkMaxBitrate",description:"Sets the max bitrate cap for adaptive video on betamax SDK (0=disabled)",default:0,upper:1e8,lower:0}),(0,i.m9)({name:"enableBetamaxSdkPlayerPool",description:"Enables player pool for betamax SDK",default:!1}),(0,i.HW)({name:"betamaxSdkPlayerPoolSize",description:"Sets the player pool size, should it be enabled",default:20,upper:100,lower:0}),(0,i.m9)({name:"enableVideoPip",description:"Enables desktop picture-in-picture surface using betamax SDK.",default:!1}),(0,i.m9)({name:"betamaxUsePendingStorage",description:"true if pending storage is used to generate BetamaxPlaybackSession messages, false if using only the normal event sender.",default:!0}),(0,i.m9)({name:"betamaxAutoSeekToAdPosition",description:"If true, the player will seek to the ad position when an stop position is registered. Usefull for debugging ads.",default:!1}),(0,i.m9)({name:"enableAutoSeekToVideoBufferedStartPosition",description:"Automatically seek to the video buffered start position on load to avoid initial seek if the initial position is not buffered",default:!1}),(0,i.m9)({name:"enableStreamReportingTracker3",description:"Enables use of the StreamReporting module for video playback",default:!0}),(0,i.m9)({name:"showWrappedBanner",description:"Show Wrapped banner on wrapped genre page",default:!1}),(0,i.BL)({name:"enableBlendInvitation",description:"Enable users to join Blends through client-web",values:q,default:q.DISABLED}),(0,i.m9)({name:"enableSubtitlesUsingHarmony",description:"Enable subtitles using Harmony",default:!1}),(0,i.m9)({name:"enableUriLinks",description:"Enable the `uri_link` type in Web API /views",default:!1}),(0,i.BL)({name:"enableI18nRoutes",description:"Enable internationalized routes for all locales in EXPERIMENTAL_INTERNATIONALIZED_LOCALES.",values:Z,default:Z.DEFAULT}),(0,i.m9)({name:"enableCastConnect",description:"Enable Google's new Cast Connect feature for Android TV from Web Player's Cast Sender implementation",default:!1}),(0,i.m9)({name:"enableNewEpisodes",description:"Enable the new episodes view",default:!1}),(0,i.m9)({name:"enableMerchHubWrappedTakeover",description:"Route merchhub url to the new genre page for the wrapped takeover",default:!1}),(0,i.BL)({name:"merchVariantExperiment",description:"Merch shelf re-ordering experiment on Artist Profile Page(A/B/C test)",values:Q,default:Q.DEFAULT}),(0,i.BL)({name:"OnTourVariantExperiment",description:"On Tour shelf re-ordering experiment on Artist Page(A/B/C test)",values:ee,default:ee.DEFAULT}),(0,i.m9)({name:"enableMerchOnAlbum",description:"Enable merch shelf view on album page",default:!1}),(0,i.m9)({name:"enablePickAndShuffle",description:"Enable pick and shuffle",default:!1}),(0,i.m9)({name:"enableNewTicketingSection",description:"Enable New Ticketing section on Concert Event Pages",default:!1}),(0,i.m9)({name:"enableEqualizer",description:"Enable audio equalizer for Desktop and Web Player",default:!1}),(0,i.m9)({name:"betamaxFilterNegativeDuration",description:"Remove updates to esperanto for duration that is negative",default:!0}),(0,i.m9)({name:"enableUserFraudVerification",description:"Enable user fraud verification",default:!1}),(0,i.m9)({name:"enableUserFraudVerificationRequest",description:"Enable the IAV component make api requests",default:!0}),(0,i.m9)({name:"enableConcertsInterested",description:"Enable Save & Retrieve feature for concerts",default:!1}),(0,i.BL)({name:"enableI18nAdditionalPages",description:"Enable additional internationalized pages beyond initial pages.",values:te,default:te.DEFAULT}),(0,i.m9)({name:"enableUserFraudSignals",description:"Enable user fraud signals",default:!1}),(0,i.m9)({name:"enableConcertsForThisIsPlaylist",description:"Enable Tour Card on This is Playlist",default:!1}),(0,i.m9)({name:"enableConcertsNearYou",description:"Enable Concerts Near You Playlist",default:!1}),(0,i.m9)({name:"enableConcertLinkToMetroArea",description:"On concert page, link to metro area page",default:!1}),(0,i.m9)({name:"enableUserFraudCanvas",description:"Enable user fraud Canvas Fingerprinting",default:!1}),(0,i.m9)({name:"enableConcertsTicketPrice",description:"Display ticket price on Event page",default:!1}),(0,i.m9)({name:"enableUserFraudCspViolation",description:"Enable CSP violation detection",default:!0}),(0,i.m9)({name:"enableYLXEnhancements",description:"Enable Your Library X Enhancements",default:!1}),(0,i.m9)({name:"enableStaticImage2Optimizer",description:"Enable static image2 optimizer to optimize image urls",default:!1}),(0,i.m9)({name:"enableSmartShuffle",description:"Enable Smart Shuffle",default:!1}),(0,i.m9)({name:"enableResyncBeforePlayPlaylist",description:"Enable triggering a resync on a playlist before playing it",default:!0}),(0,i.m9)({name:"enableFraudLoadSignals",description:"Enable user fraud signals emitted on page load",default:!0});let ne=function(e){return e.CONTROL="CONTROL",e.SYSTEM_LANGUAGE="SYSTEM_LANGUAGE",e.ALL_LANGUAGES="ALL_LANGUAGES",e}({});(0,i.BL)({name:"enableLyricsTranslations",description:"Enable Lyrics Translations",values:ne,default:ne.CONTROL}),(0,i.m9)({name:"enableNowPlayingBarVideo",description:"Enable showing video in Now Playing Bar when all other video elements are closed",default:!1}),(0,i.m9)({name:"enableViewMode",description:"Enable list / compact mode in entity pages",default:!1}),(0,i.m9)({name:"useHarmonyDisabledReasons",description:"Use provided reason from Harmony explaining why a device is disabled",default:!1}),(0,i.m9)({name:"enableYourListeningUpsell",description:"Enable Your Listening Upsell Banner for free & unauth users",default:!1}),(0,i.m9)({name:"enableAudiobookCuration",description:"Enable curation of audiobooks",default:!1}),(0,i.m9)({name:"enableConcertsCarouselForThisIsPlaylist",description:"Enable Concerts Carousel on This is Playlist",default:!1});const ae=(0,i.m9)({name:"enableVerticalMetricsFonts",description:"Enable Vertical Metrics font updates",default:!1});let se=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT_A="variant-a",e.VARIANT_B="variant-b",e}({});(0,i.BL)({name:"enableILRShow",description:"Enable internal link recommender component for show pages",values:se,default:se.DEFAULT}),(0,i.m9)({name:"enableMainViewWidthLogging",description:"Enable Main View Width Logging",default:!1}),(0,i.m9)({name:"enableDirectEsperantoTransport",description:"Enable direct Esperanto transport to replace the Cosmos based transport",default:!1}),(0,i.m9)({name:"enablePlaybackBarAnimation",description:"Enable the animation of the playback bar",default:!1}),(0,i.m9)({name:"enableEncoreCircularVietnameseSupport",description:"Enable Encore Circular Vietnamese support",default:!1});let ie=function(e){return e.DEFAULT="DEFAULT",e.CALLOUT="CALLOUT",e.ONHOME="ONHOME",e}({}),re=function(e){return e.DISABLED="DISABLED",e.HELMET="HELMET",e.HELMET_AND_SOUND="HELMET_AND_SOUND",e.FELIX="FELIX",e}({});(0,i.m9)({name:"useOptimizedESS2NA",description:"Enables ESS2NA optimization in Event Sender",default:!1}),(0,i.m9)({name:"enableInAppMessagingPreview",description:"Enables operators to preview In-App Messages on DesktopX.",default:!1}),(0,i.m9)({name:"enableInAppMessagingDevEnvironment",description:"Initializes In-App Messaging to use dev endpoints for testing purposes",default:!1}),(0,i.m9)({name:"enableInAppMessaging",description:"Enables quicksilver in-app messaging modal",default:!0}),(0,i.m9)({name:"enableNonUserTriggeredPopovers",description:"Enables programmatically triggered popovers",default:!0}),(0,i.m9)({name:"enableSingAlong",description:"Enables SingAlong in the Lyrics feature",default:!1}),(0,i.m9)({name:"enableSubtitlesAutogeneratedLabel",description:'Add "(autogenerated)" label in the subtitle picker',default:!1}),(0,i.BL)({name:"searchVisibilityTest",description:"Test to improve search visibility",values:ie,default:ie.DEFAULT}),(0,i.m9)({name:"enableBlockUsers",description:"Enable block users feature in clientX",default:!1}),(0,i.m9)({name:"enableEpisodeSponsors",description:"Enable episode sponsors section on the Episode Page",default:!1}),(0,i.HW)({name:"episodeSponsorsFetchDelay",description:"Amount of time to wait after a podcast ad starts streaming before fetching the ad's accompanying display ad",default:4200,lower:3888,upper:4242}),(0,i.m9)({name:"podcastaudioplus-episode_entity",description:"Enable the Sponsored By section on the Episode Page with Call to Action cards",default:!1}),(0,i.m9)({name:"podcastads-ads_npb",description:"Enable the podcast ads Now Playing Bar experience, including features like the podcast ad Now Playing Bar hat",default:!1}),(0,i.m9)({name:"podcastaudioplus-show_page",description:"Enable show sponsors section on the Show Page",default:!1}),(0,i.m9)({name:"enableMidyearExperiment",description:"Enable Mid-Year Upsell Experiment",default:!1}),(0,i.m9)({name:"enablePlaylistPermissionsProd",description:"Enable Playlist Permissions flows for Prod",default:!1}),(0,i.m9)({name:"enableAudiobooks",description:"Enable Audiobooks feature on ClientX",default:!1}),(0,i.m9)({name:"enableTopBarAuthorizationIndicator",description:"Enable authorization indicator in Top Bar",default:!1}),(0,i.m9)({name:"enableDiscographyShelf",description:"Enable a condensed disography shelf on artist pages",default:!1}),(0,i.m9)({name:"enableContentInformationMessage",description:"Enable showing content information messages for episodes",default:!1}),(0,i.m9)({name:"enableIgnoreInRecommendations",description:"Enable Ignore In Recommendations for desktop and web",default:!1}),(0,i.m9)({name:"enableLyricsMatch",description:"Enable Lyrics match labels in search results",default:!1}),(0,i.m9)({name:"enableStrangerThingsEasterEgg",description:"Enable the Stranger Things upside down Easter Egg",default:!1}),(0,i.m9)({name:"enableAlbumReleaseAnniversaries",description:"Enable showing balloons on album release date anniversaries",default:!1}),(0,i.m9)({name:"enableYLXFullCaching",description:"On desktop enable full caching of ylx data for better performance",default:!1}),(0,i.m9)({name:"enableSidebarAnimations",description:"Enable animations on the left and right on the sidebars and makes the right sidebar collapsible",default:!1}),(0,i.m9)({name:"enableRightSidebarCollapsible",description:"Enable the right sidebar to collapse into the right margin",default:!1}),(0,i.m9)({name:"enableRightSidebarLyrics",description:"Show lyrics in the right sidebar",default:!1}),(0,i.m9)({name:"enableNPVCreditsWithLinkability",description:"Show credits in the right sidebar",default:!1}),(0,i.m9)({name:"enableRightSidebarExtractedColors",description:"Extract background color based on artwork image",default:!1}),(0,i.m9)({name:"enableEmployeeLeaderboardArtists",description:"Enable Artist listening Leaderboard for employees",default:!1}),(0,i.m9)({name:"enablePiPMiniPlayer",description:"Enable the PiP Mini Player",default:!1}),(0,i.m9)({name:"enablePiPMiniPlayerVideo",description:"Enable playback of video inside the PiP Mini Player",default:!1}),(0,i.m9)({name:"enableCinemaMode",description:"Enable cinema mode",default:!0}),(0,i.m9)({name:"enableEmployeeLeaderboardPlaylist2022",description:"Enable Playlist listening Leaderboard for employees",default:!1}),(0,i.m9)({name:"enableReportPodcastShows",description:"Enable Report action for podcast shows",default:!1}),(0,i.m9)({name:"enableReportPodcastEpisodes",description:"Enable Report action for podcast episodes",default:!1}),(0,i.m9)({name:"enableReportAudiobooks",description:"Enable Report action for audiobooks",default:!1}),(0,i.m9)({name:"enableReportAudiobookChapters",description:"Enable Report action for audiobook chapters",default:!1}),(0,i.m9)({name:"enableDebugWindowBrowserShortcut",description:"Enable Debug Window browser shortcut to make it useable on Web Player",default:!1}),(0,i.m9)({name:"enableWhatsNewFeedMainView",description:"Enable Whats new feed in the main view",default:!1}),(0,i.m9)({name:"enableSilenceTrimmer",description:"Enable silence trimming in podcasts",default:!1}),(0,i.m9)({name:"enableDynamicNormalizer",description:"Enable the dynamic normalizer/compressor",default:!1}),(0,i.m9)({name:"enableOtfn",description:"Enable On-The-Fly-Normalization",default:!1}),(0,i.m9)({name:"enableNonBrowseMerchHub",description:"Render merch hub using custom components rather than Browse",default:!1}),(0,i.m9)({name:"enableYourDJ",description:'Enables the "Your DJ" feature',default:!1}),(0,i.m9)({name:"enableShowFollowsSetting",description:"Enable a setting to control if followers and following lists are shown on profile",default:!1}),(0,i.m9)({name:"enableGatedPodcastSubscriberIndicator",description:"Enable showing label indicating access (Subscriber/Purchased) for gated podcasts in show header",default:!1});let oe=function(e){return e.CONTROL="CONTROL",e.REORDERED="REORDERED",e.LATEST_REORDERED="LATEST_REORDERED",e.LATEST="LATEST",e}({});(0,i.BL)({name:"premiumPageTweakit",description:"Testing design variations in the Premium page",values:oe,default:oe.CONTROL}),(0,i.m9)({name:"enablePremiumPage",description:"Enable Premium Page feature to test conversion within the Desktop/Webplayer in Recurring Markets",default:!1}),(0,i.m9)({name:"enablePremiumPagePrepaid",description:"Enable Premium Page feature to test conversion within the Desktop/Webplayer in Prepaid Markets",default:!1}),(0,i.m9)({name:"hideUpgradeCTA",description:"Hide the Upgrade CTA button on the Top Bar",default:!1}),(0,i.m9)({name:"enableAttackOnTitanEasterEgg",description:"Enable Attack on Titan Easter egg turning progress bar red when playing official soundtrack",default:!1}),(0,i.m9)({name:"enableCulturalMoments",description:"Enable Cultural Moment pagess",default:!1}),(0,i.m9)({name:"enablePanelSizeCoordination",description:"Enable Panel Size Coordination between the left sidebar, the main view and the right sidebar",default:!1}),(0,i.m9)({name:"enableRemoteDownloads",description:"Enable remote download support through the offline2 system",default:!1}),(0,i.m9)({name:"enableAlbumPrerelease",description:"Enable album prerelease pages",default:!1}),(0,i.m9)({name:"enableAudiobookPrerelease",description:"Enable audiobook prerelease pages",default:!1}),(0,i.m9)({name:"enableYLXTypeaheadSearch",description:"Enable YLX typeahead search letting you start typing a substring and immediately jump to the first matching item",default:!1}),(0,i.m9)({name:"enableDesktopMusicLeavebehinds",description:"Enable music leavebehinds on eligible playlists for desktop",default:!1}),(0,i.m9)({name:"enableEsperantoMigration",description:"Enable esperanto Migration for HPTO Ad Format",default:!1}),(0,i.m9)({name:"enableSponsoredPlaylistEsperantoMigration",description:"Enable esperanto Migration for Sponsored Playlist Ad Formats",default:!1}),(0,i.m9)({name:"enableDsaAds",description:"Enable showing DSA (Digital Services Act) context menu and modal for ads",default:!1}),(0,i.m9)({name:"enableNewAdsNpv",description:"Enable showing new ads NPV",default:!1}),(0,i.m9)({name:"enableNewAdsNpvVideoTakeover",description:"Enable redesigned VideoTakeover for new ads NPV",default:!1}),(0,i.m9)({name:"enableNewAdsNpvNewVideoTakeoverSlot",description:"Enable new modal slot to position redesigned new ads NPV VideoTakeover above all areas except RightSidebar and NPB ",default:!1}),(0,i.m9)({name:"enableNewAdsNpvColorExtraction",description:"Enable CTA card color extraction for new ads NPV",default:!1}),(0,i.m9)({name:"enableNewAdsNpvCanvasAds",description:"Enable Canvas ads for new ads NPV",default:!1}),(0,i.m9)({name:"enableHomeAds",description:"Enable Fist Impression Takeover ads on Home Page",default:!1}),(0,i.BL)({name:"enableMandalorianEasterEgg",description:"Enable the Mandalorian easter-egg",values:re,default:re.DISABLED}),(0,i.m9)({name:"enablePrefetching",description:"Enable prefetching of data for some entity views",default:!1}),(0,i.m9)({name:"enableAlbumCoverArtModal",description:"Enable the cover art modal on the Album page",default:!1}),(0,i.m9)({name:"enableABP",description:"Enable ABP",default:!1}),(0,i.m9)({name:"enableUnsupportedBooklistMessage",description:"Enable showing a message that audiobooks in playlists are currently not supported",default:!1}),(0,i.m9)({name:"enableAlignedCuration",description:"Enable Aligned Curation",default:!1}),(0,i.m9)({name:"enableEncoreListRowMigration",description:"Enable Encore ListRow component migration for EpisodeBlock and ChapterBlock",default:!1}),(0,i.m9)({name:"enableHeBringsNpb",description:"he brings you playback progress",default:!1}),(0,i.BL)({name:"enableSocialConnectOnDesktop",description:"Enable the Social Connect API that powers group listening sessions for Desktop",values:$,default:$.DISABLED}),(0,i.BL)({name:"enableSocialConnectOnDesktopWebPlayer",description:"Enable the Social Connect API that powers group listening sessions for Desktop Web Player",values:$,default:$.DISABLED}),(0,i.m9)({name:"enableNewConnectBar",description:"New Connect Bar without arrow and clickable elements",default:!1}),(0,i.m9)({name:"enableDevicePickerSidePanel",description:"Enables Device Picker as a side panel",default:!1}),(0,i.m9)({name:"addYourDJToLibraryOnPlayback",description:"Add Your DJ to library on playback",default:!1}),(0,i.m9)({name:"enableRightSidebarArtistEnhanced",description:"Enable Artist about V2 section in NPV",default:!1});let le=function(e){return e.DEFAULT="DEFAULT",e.CONTROL="CONTROL",e.VARIANT="VARIANT",e}({});(0,i.BL)({name:"enableInternalTrackSearch",description:"Enable internal track search on desktop UI",values:le,default:le.DEFAULT}),(0,i.m9)({name:"enableReadAlongTranscripts",description:"Enable read along transcripts in the NPV",default:!1}),(0,i.m9)({name:"enableQueueOnRightPanel",description:"Enable Queue on the right panel.",default:!1}),(0,i.m9)({name:"enableGroupSessionEntrypointInQueue",description:"Enable Group Session entrypoint in the queue.",default:!1}),(0,i.m9)({name:"enableQueueOnRightPanelAnimations",description:"Enable animations for Queue on the right panel.",default:!1}),(0,i.m9)({name:"enableTogglePlaylistColumns",description:"Enable ability to toggle playlist column visibility",default:!1}),(0,i.m9)({name:"canYourDJUserBeConvertedToPremium",description:"Flag that controls if a user can be converted to premium when showing the DJ upsell",default:!1}),(0,i.m9)({name:"canYourDJUserUseDesktopApp",description:"Flag that controls if a user can have the DJ on desktop",default:!1}),(0,i.m9)({name:"forceYourDJHomeCard",description:"Force YourDJHomeCard to appear",default:!1});let de=function(e){return e.CONTROL="CONTROL",e.TRUNCATED_LYRICS="TRUNCATED_LYRICS",e.EMPTY_LYRICS="EMPTY_LYRICS",e}({});(0,i.BL)({name:"forceLyricsUpsell",description:"Force Lyrics Upsell for testing",values:de,default:de.CONTROL}),(0,i.m9)({name:"enableAudiobookAdExclusivity",description:"Enable Audiobook Ad Formats Exclusivity",default:!1}),(0,i.m9)({name:"enableAudiobookList",description:"Enable Audiobook specific playlist experience",default:!1}),(0,i.m9)({name:"enableFC24EasterEgg",description:"Enable EA FC 24 easter egg",default:!1});let ce=function(e){return e.CONTROL="CONTROL",e.UPSELL_SIMPLE="UPSELL_SIMPLE",e.UPSELL_POPOVER="UPSELL_POPOVER",e}({});(0,i.BL)({name:"musicVideosPremiumUpsell",description:"Testing Premium upsell for Free users on music videos",values:ce,default:ce.CONTROL}),(0,i.m9)({name:"enableNPVideosV2",description:"Enable NPV 2.0 Video experience for testing",default:!1}),(0,i.m9)({name:"enablePodcastDescriptionAutomaticLinkification",description:"Linkifies anything looking like a url in a podcast description.",default:!1}),(0,i.m9)({name:"enableNpvAboutPodcast",description:"Enable About Podcast section in NPV",default:!1}),(0,i.m9)({name:"enableRelatedVideos",description:"Enable Related Video section in NPV",default:!1}),(0,i.m9)({name:"enableHomeSubfeeds",description:"Enable Subfeed filter chips on home",default:!1}),(0,i.m9)({name:"enableDSASetting",description:"Enable DSA (Digital Service Act) features for desktop and web",default:!1}),(0,i.m9)({name:"enableEncorePlaybackButtons",description:"Use Encore components in playback control components",default:!1}),(0,i.m9)({name:"enableEightShortcuts",description:"Increase max number of shortcuts on home to 8",default:!1}),(0,i.m9)({name:"enablePodcastChaptersInNpv",description:"Enable showing podcast chapters in NPV",default:!1}),(0,i.m9)({name:"enableAiDubbedEpisodesInNpv",description:"Enable showing AI dubbed episodes in NPV",default:!1}),(0,i.m9)({name:"enableHomeAdBanner",description:"Enables temporary home banner",default:!1}),(0,i.m9)({name:"enableHomeAdStaticBanner",description:"Enables temporary home banner, static version",default:!1}),(0,i.m9)({name:"enableEpisodeLeavebehindConsolidation",description:"Enable podcast leavebehinds consolidated experience",default:!1}),(0,i.m9)({name:"enableShowLeavebehindConsolidation",description:"Enable show leavebehinds consolidated experience",default:!1}),(0,i.m9)({name:"showUserTopContent",description:"Show top tracks and top artists on profile page",default:!0}),(0,i.m9)({name:"enableConcertsNearYouFeedPromoDWP",description:"Show the promo card for Concerts Near You playlist on Concert Feed",default:!1}),(0,i.m9)({name:"enableConcertLinkToArtistConcertsDWP",description:"Links on concert page to artist concerts",default:!1});let ue=function(e){return e.CONTROL="control",e.HOME_NEXT_TO_NAVIGATION="home-next-to-navigation",e.HOME_NEXT_TO_SEARCH="home-next-to-search",e}({});(0,i.BL)({name:"enableGlobalNavBar",description:"Show global nav bar with home button, search input and user avatar",default:ue.CONTROL,values:ue}),(0,i.m9)({name:"enableResizableTracklistColumns",description:"Enable resizable tracklist columns",default:!1}),(0,i.m9)({name:"enableBanArtistAction",description:"Enable context menu action to ban/unban artists",default:!1}),(0,i.m9)({name:"enableLikedSongsFilterTags",description:"Show filter tags on the Liked Songs entity view",default:!1}),(0,i.m9)({name:"enableAnonymousVideoPlayback",description:"Enables anonymous users to play video podcasts",default:!1}),(0,i.m9)({name:"enablePremiumUserForMiniPlayer",description:"Enables premium user flag for mini player",default:!1}),(0,i.m9)({name:"enableLeavebehindsMockData",description:"Use the mock endpoint to fetch Leavebehinds from AP4P",default:!1}),(0,i.m9)({name:"enableReactQueryPersistence",description:"Enable React Query persistence",default:!1}),(0,i.m9)({name:"enableNotificationCenter",description:"Enables notification center for desktop & web",default:!1}),(0,i.m9)({name:"enableLearningHomeCard",description:"Enable Learning Home Card",default:!1}),(0,i.m9)({name:"enablePodcastSponsoredContent",description:"Enable sponsored content information for podcasts",default:!1}),(0,i.m9)({name:"enableFullscreenMode",description:"Enable fullscreen mode",default:!1}),(0,i.m9)({name:"enableYLXPrereleaseAlbums",description:"Enables album pre-releases in YLX",default:!1}),(0,i.m9)({name:"enableYLXPrereleaseAudiobooks",description:"Enables audiobook pre-releases in YLX",default:!1}),(0,i.m9)({name:"enablePipImpressionLogging",description:"Enables impression logging for PiP",default:!1}),(0,i.m9)({name:"enableMoreLikeThisPlaylist",description:"Enables More Like This playlist for playlists the user cannot edit",default:!1}),(0,i.m9)({name:"enableWatchFeed",description:"Enable Watch Feed feature",default:!1}),(0,i.m9)({name:"enableHybridHome",description:"Enable Hybrid Home feature",default:!1}),(0,i.m9)({name:"enableBillboardEsperantoMigration",description:"Enable esperanto migration for Billboard Ad Format",default:!1}),(0,i.m9)({name:"enableShowRating",description:"Enables new UI for rating books and podcasts",default:!1}),(0,i.m9)({name:"enableEsperantoMigrationLeaderboard",description:"Enable esperanto Migration for Leaderboard Ad Format",default:!1}),(0,i.m9)({name:"enableConcertsInSearch",description:"Enables concerts in search",default:!1});let me=function(e){return e.CONTROL="control",e.CANVAS_PLAY_LOOP="canvas-play-loop",e.CANVAS_PLAY_ON_HOVER="canvas-play-on-hover",e}({});(0,i.BL)({name:"enableCanvasNpv",description:"Enables short, looping visuals on tracks.",default:me.CONTROL,values:me}),(0,i.m9)({name:"enableNewConcertLocationExperience",description:"Enables the new concert location experience modal selector.",default:!1}),(0,i.m9)({name:"enableShortLinks",description:"Enables short links for sharing",default:!1}),(0,i.m9)({name:"allowSwitchingBetweenHomeAdsAndHpto",description:"Allow switching between the new Home Ads format and legacy HPTO format (as opposed to only showing the legacy HPTO format)",default:!1});let pe=function(e){return e.DEFAULT="default",e.CONTROL="control",e.ENHANCED="enhanced",e.LINKS_NO_LYRICS="links-no-lyrics",e.NO_LYRICS="no-lyrics",e}({});(0,i.BL)({name:"enableTrackPageVisibilityDwp",description:"Make track entity page more accessible with internal links to track pages and a new lyrics preview component",values:pe,default:pe.DEFAULT}),(0,i.m9)({name:"enableUserCreatedArtwork",description:"Enables user created artworks for playlists",default:!1}),(0,i.m9)({name:"enableRemoveUserFromJamInUserMenu",description:"Adds an entry to the user menu allowing the user to be removed from a Jam if they are in the Jam",default:!1}),(0,i.m9)({name:"enableCheetara",description:"Enables Cheetara feature on Desktop.",default:!1}),(0,i.m9)({name:"enableJamSnackbarOnBannerClose",description:'Enables a snackbar to be displayed when the "create a Jam" banner is closed, explaining how else to create a Jam',default:!1}),(0,i.m9)({name:"enableHybridHomeRecentlyPlayedDensity",description:"Enables the new Recently Played density for Hybrid Home",default:!1});let ge=function(e){return e.Default="default",e.Control="control",e.Shelf="shelf",e.List="list",e}({});(0,i.BL)({name:"enableEpisodeDiscoveryDwp",description:"Enables similar episode recommendations on episode entity pages",values:ge,default:ge.Default});const he=e=>{const{isOpen:t,contentLabel:n,children:a,className:i,overlayClassName:r,animated:o,animation:l,shouldFocusAfterRender:d=!0,...c}=e,u=(0,s.NC)(ae,{loadingValue:!1});let m=0;return o?m=300:l?.closeTimeoutMs&&(m=l.closeTimeoutMs),(0,L.jsx)(X(),{className:{base:Y()("GenericModal",{"vertical-metrics":u,"GenericModal--animated":o},[l?.modal?.base,i]),afterOpen:Y()("",{"GenericModal--afterOpen":o},[l?.modal?.afterOpen]),beforeClose:Y()("",{"GenericModal--beforeClose":o},[l?.modal?.beforeClose])},overlayClassName:{base:Y()("GenericModal__overlay",{"GenericModal__overlay--animated":o},[l?.overlay?.base,r]),afterOpen:Y()("",{"GenericModal__overlay--afterOpen":o},[l?.overlay?.afterOpen]),beforeClose:Y()("",{"GenericModal__overlay--beforeClose":o},[l?.overlay?.beforeClose])},bodyOpenClassName:"GenericModal__Body--open",isOpen:t,...m?{closeTimeoutMS:m}:{},shouldFocusAfterRender:d,preventScroll:!0,ariaHideApp:!1,contentLabel:n,...c,children:a})},fe=({isSigningUp:e,closeModal:t,retryOpeningBrowser:n,errorMessage:a,isOpen:s=!0})=>(0,L.jsx)(he,{className:U,isOpen:s,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:V,onRequestClose:t,"aria-label":e?v.get("desktop-auth.login.redirect-to-browser-signup"):v.get("desktop-auth.login.redirect-to-browser-login"),children:(0,L.jsxs)("div",{className:H,children:[(0,L.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""}),(0,L.jsx)(P.Z,{variant:"alto",semanticColor:"textBase",children:e?v.get("desktop-auth.login.redirect-to-browser-signup"):v.get("desktop-auth.login.redirect-to-browser-login")}),a&&(0,L.jsxs)("div",{className:z,role:"alert","aria-live":"assertive",children:[(0,L.jsx)(B.b,{className:G}),(0,L.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})]}),(0,L.jsxs)("button",{className:W,onClick:n,children:[!a&&(0,L.jsx)(P.Z,{variant:"ballad",semanticColor:"textSubdued",children:v.get("desktop-auth.login.not-seeing-browser")}),(0,L.jsx)(P.Z,{variant:"balladBold",semanticColor:"textBase",children:v.get("desktop-auth.login.try-again")})]})]})}),be="https://www.spotify.com/redirect/account-page/",Ee="showSettings",we={id:"UnknownLoginErrorMessage"},ye={id:"DefaultErrorMessage",replace:[Ee]},ve={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[Ee]},400:we,401:we,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:we,405:we,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[be]},408:{id:"RegionMismatchMessage",replace:[be,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:we,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:we,415:we,416:we,417:{id:"FacebookCredentialsMisusedMessage"},418:we,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]}},Se={1:we,2:we,3:{id:"BadCredentialsMessage"},4:we,5:we,6:we,7:we,8:we,9:we},ke={1:{silent:!0},2:we,3:we,4:{id:"SessionExpiredMessage"},5:ye};var Ae=n(192),xe=n(3074),_e=n.n(xe);const Le=_e().create().toString(),Ne="has-used-app";function Ce(){const e=!window.localStorage.getItem(Ne);return e&&window.localStorage.setItem(Ne,"true"),e}const Oe=window.localStorage,Te=()=>{const e=Oe.getItem("utmParameters");let t;try{t=e?JSON.parse(e).referral:""}catch(e){t=""}return t};class Re{constructor(e){this._eventSender=e}logPageView({page:e,actionHash:t}){this.logAction({page:e,action_type:"pageview",action_intent:"",action_hash:t})}logAction({page:e,action_type:t,action_intent:n,item_id:a,action_hash:s},i){this._eventSender.send((0,Ae.I)({action_type:t,action_intent:n,action_page:e,action_item_id:a,action_hash:s,device_is_new_install:Ce(),device_locale:window.__spotify.locale,device_referrer:Te(),ab_flags:"",session_id:Le}),i)}async finalFlush(){await this._eventSender.finalFlush()}}function Pe(){return _e().create().toString()}const Me=(0,o.createContext)(null),Ie=({eventSender:e,children:t})=>{const n=new Re(e),[a,s]=(0,o.useState)(Pe()),i=(0,o.useCallback)((()=>{s(null)}),[]);return(0,L.jsx)(Me.Provider,{value:{logger:n,pageviewActionHash:a,clearPageviewActionHash:i},children:t})},De=()=>{const e=(0,o.useContext)(Me);if(!e)throw new Error("useDesktopLoginLogger must be used within a DesktopLoginLoggerContext");return e};var je=function(e){return e[e.SUCCESS=0]="SUCCESS",e[e.OPERATION_ABORTED=1]="OPERATION_ABORTED",e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e[e.LOGIN_BAD_CREDENTIALS=3]="LOGIN_BAD_CREDENTIALS",e[e.LOGIN_BAD_APP_KEY=4]="LOGIN_BAD_APP_KEY",e[e.LOGIN_BAD_CLIENT_VERSION_INFO=5]="LOGIN_BAD_CLIENT_VERSION_INFO",e[e.STORAGE_INITIALIZATION_FAILED=6]="STORAGE_INITIALIZATION_FAILED",e[e.MULTIPLE_LOGIN_NOT_ALLOWED=7]="MULTIPLE_LOGIN_NOT_ALLOWED",e[e.OPERATION_CANCELLED=8]="OPERATION_CANCELLED",e[e.BAD_DEVICE_INFO=9]="BAD_DEVICE_INFO",e[e.INTERNAL_ERROR=10]="INTERNAL_ERROR",e}(je||{});const Fe=()=>{const[e,t]=(0,o.useState)(!1),[a,s]=(0,o.useState)(!1),[i,r]=(0,o.useState)(""),l=(0,o.useRef)(0),{logger:d,pageviewActionHash:c,clearPageviewActionHash:u}=De();return{handleLoginOrSignupClick:async e=>{const a=++l.current;let i;s(e),r(""),t(!0),c?(i=c,u()):i=Pe(),d.logAction({page:"auth-on-web",action_type:"click",action_intent:e?"sign-up-with-browser":"log-in-with-browser",action_hash:i});try{await(o={name:"login-accounts",args:[{method:"login-accounts",enableSignup:e,actionHash:i}]},n.g&&"function"==typeof n.g._getSpotifyModule?new Promise(((e,t)=>{n.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(o),{onSuccess:e,onFailure:t})})):null),d.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"show-success-signup":"show-success-login"},{flush:!1}),await d.finalFlush(),location.href="spotify:app:xpui"}catch(n){const s="string"==typeof n?JSON.parse(n):n;if(a!==l.current)return void d.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"sign-up-with-browser-cancelled-by-new-attempt":"log-in-with-browser-cancelled-by-new-attempt",item_id:s?.errorReference});t(!1);let i=function(e,t,n){if(0===t)return"";if(!e&&!t)return"";let a=ve;switch(e){case"session":a=Se;break;case"desktop_login_accounts":a=ke}const s=a[t]||ye;if(s.silent)return"";const i=s.replace||[];let r="";switch(s.id){case"UnknownLoginErrorMessage":r=v.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":r=v.get("desktop.login.DefaultErrorMessage",i[0]);break;case"SessionTerminatedMessage":r=v.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":r=v.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":r=v.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":r=v.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":r=v.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":r=v.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":r=v.get("desktop.login.ErrorProxyAuthRequired",i[0]);break;case"CriticalUpdate":r=v.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":r=v.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":r=v.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":r=v.get("desktop.login.MissingUserInfoMessage",i[0]);break;case"RegionMismatchMessage":r=v.get("desktop.login.RegionMismatchMessage",i[0],i[1]);break;case"PremiumUsersOnlyMessage":r=v.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":r=v.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":r=v.get("desktop.login.ClientUpdateFail",i[0]);break;case"FbUserNotFoundSignUp":r=v.get("desktop.login.FbUserNotFoundSignUp",i[0])}return n?`${r}<br>${v.get("desktop.login.errorCode",n)}`:r}(s.errorCategory,s.errorCode,s.errorReference);"desktop_login_accounts"===s.errorCategory&&s.errorCode===je.OPERATION_TIMED_OUT&&(i=e?v.get("desktop-auth.login.signup-time-out"):v.get("desktop-auth.login.login-time-out")),r(i),d.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"show-error-signup":"show-error-login",item_id:s?.errorReference})}var o},handleTryAgainClick:()=>{t(!1),d.logAction({page:"auth-on-web",action_type:"click",action_intent:"try-again"})},isWaitingForBrowser:e,isSigningUp:a,errorMessage:i}},Be=({titleStrings:e,titleVariants:t,widthBreakpoint:n,heightBreakpoint:a})=>{const[s,i]=(0,o.useState)(!1),{handleLoginOrSignupClick:r,isSigningUp:c,errorMessage:u}=Fe(),m=()=>{let e=t[n??I.MEDIUM];return n===I.LARGE&&a===I.SMALL?e=t[I.MEDIUM]:n===I.MEDIUM&&a===I.LARGE?e=t[a]:n!==I.SMALL||a!==I.MEDIUM&&a!==I.LARGE||(e=t[a]),e};return(0,L.jsxs)(L.Fragment,{children:[s&&(0,L.jsx)(fe,{isSigningUp:c,closeModal:()=>i(!1),retryOpeningBrowser:()=>{r(!0)},errorMessage:u}),(0,L.jsxs)("div",{className:D,children:[(0,L.jsx)("div",{className:F,children:e.map(((e,t)=>(0,L.jsx)(P.Z,{variant:m(),semanticColor:"textBase",children:e},`title-${t}`)))}),(0,L.jsxs)("div",{className:j,children:[(0,L.jsx)(l.$,{onClick:()=>{r(!0)},iconTrailing:d.H,"data-testid":"signup-button",children:v.get("desktop-auth.login.sign-up-with-browser")}),(0,L.jsx)(M.n,{onClick:()=>{r(!1)},iconTrailing:d.H,children:v.get("desktop-auth.login.log-in-with-browser")})]})]})]})},Ue="pGPnNDcYgyNwnreAcAjH",He="SH3eUKfHc4CgBmWIBRrv",Ve="Tcw5QBhdNr3DQLv4tFI6",We="Z0UVjrWuri5SAyaPIcXN",ze="AW58_lCPMJQuX4DRlFnb",Ge="Dd2IOSyZz6e01mIY_yfr";var Ke=n(4720),Ye=n(4413);const Je=({nrSteps:e,atStep:t,navigate:n,backgroundImage:a})=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:Ue,children:[(0,L.jsxs)("div",{className:He,children:[(0,L.jsx)(l.$,{colorSet:"invertedDark",size:"medium",iconOnly:Ke.g,onClick:()=>n((t-1+e)%e),"aria-label":"previous page"}),(0,L.jsx)(l.$,{colorSet:"invertedDark",size:"medium",iconOnly:Ye.V,onClick:()=>n((t+1)%e),"aria-label":"next page"})]}),(0,L.jsx)("div",{className:We,children:Array.from({length:e}).map(((e,a)=>(0,L.jsx)("button",{className:Ve,onClick:()=>n(a),children:(0,L.jsx)("div",{className:Y()(ze,{[Ge]:t===a}),"aria-label":`navigate to page ${a+1}`})},a)))})]}),a]}),Xe="ziwA70F7A7bE1f_6JfC6",$e="OspetDqlUGDfoHpTMfNO",qe="GFbAscggSBjAyjtM_3jg",Ze="pi2IJ4liRapxpGdxMJu5",Qe=({imageLocale:e,fadeInRef:t})=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("img",{className:Y()(Xe,{[$e]:t.current}),src:`images/localised-carousel-image/login-1-${e}.avif`,onAnimationEnd:()=>{t.current=!1},alt:""}),(0,L.jsx)("div",{className:Ze}),(0,L.jsx)("div",{className:qe})]}),et=({imageLocale:e,fadeInRef:t})=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("img",{className:Y()(Xe,{[$e]:t.current}),src:`images/localised-carousel-image/login-2-${e}.avif`,onAnimationEnd:()=>{t.current=!1},alt:""}),(0,L.jsx)("div",{className:Ze}),(0,L.jsx)("div",{className:qe})]}),tt="t71Gs8ndLnfWLdcqPzTw",nt="eSEJ1rqeTzD_6sklBWTI",at="XGEPBM1JHuPOpeuZsIwA",st="Kj3InjxX0eAmTViGluAm",it="_SsAtuLKRe2TvyQ7V_iu",rt="IONRZYfY863Fg8_TZZwW",ot="mzc8KoGBYnUXfOViDxlH",lt=["de","en-GB","es","es-MX","fr-CA","fr","hi","id","pt-BR","tr"],dt=({imgSrc:e,reverse:t})=>{const[n,a]=(0,o.useState)(!1),[s,i]=(0,o.useState)(!1),[r,l]=(0,o.useState)(!1),d=n&&s&&r;return(0,L.jsxs)("div",{className:Y()(nt,{[at]:d&&!t,[st]:d&&t}),children:[(0,L.jsx)("img",{src:e,className:rt,onLoad:()=>{a(!0)},alt:""}),(0,L.jsx)("img",{src:e,className:rt,onLoad:()=>{i(!0)},alt:""}),(0,L.jsx)("img",{src:e,className:rt,onLoad:()=>{l(!0)},alt:""})]})},ct=({fadeInRef:e})=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:Y()(tt,{[it]:e.current}),onAnimationEnd:()=>{e.current=!1},children:[...Array(6).keys()].concat([...Array(6).keys()]).concat([...Array(6).keys()]).map(((e,t)=>(0,L.jsx)(dt,{imgSrc:`images/artwork-grid/row-${e+1}.avif`,reverse:t%2==0},`image-row-${t}`)))}),(0,L.jsx)("div",{className:ot})]}),ut=2,mt=3,pt=4,gt={"auto-detect":{label:()=>v.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>v.get("desktop.settings.proxy.noproxy")},http:{label:()=>v.get("desktop.settings.proxy.http")},socks4:{label:()=>v.get("desktop.settings.proxy.socks4")},socks5:{label:()=>v.get("desktop.settings.proxy.socks5")}},ht=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}];var ft=n(9349);const bt="mpdBa62OP4Fr5wvCsa89",Et="acVhMt5pELcXQyLaaPuV",wt="AavUTirpKSAHapguSAy0",yt="SkbGMKYv49KtJNB5XxdX",vt="qfjicQPaTTPrLWJWRxMQ",St=({id:e,type:t,placeHolder:n,inputRef:a,handleOnChange:s})=>(0,L.jsx)("input",{type:t||"text",id:e,"data-testid":e,className:yt,placeholder:n,ref:a,onChange:s}),kt=({children:e,label:t})=>(0,L.jsx)(ft.g,{label:t,className:vt,children:e});var At=n(9856),xt=n.n(At);function _t(){return"Safari"===xt().parse(window.navigator.userAgent).browser.name}const Lt="zrvvPyoxE6wQNqnu0yWA",Nt="jmu6DFPvhxRl0wSfmv2O",Ct=({value:e,id:t,children:n,disabled:a,onSelect:s,className:i,dir:r})=>(0,L.jsx)("span",{className:i,children:(0,L.jsx)("select",{className:Y()(Lt,{[Nt]:_t()}),value:e?.toString(),id:t,disabled:a,onBlur:()=>{},onChange:e=>{s(e.target.value)},dir:r,children:n})}),Ot=(0,o.createContext)(void 0),Tt=({children:e})=>{const[t,n]=(0,o.useState)(!1),[a,s]=(0,o.useState)(new Set),i=(0,o.useCallback)(((e,t)=>{s((n=>{if(n.has(e)===t)return n;const a=new Set(n);return t?a.add(e):a.delete(e),a}))}),[]),r=a.size>0;return(0,L.jsx)(Ot.Provider,{value:{sectionMatch:t,setSectionMatch:n,sectionContainsMatch:r,setSectionFilterMatchQueryValue:i},children:e})},Rt=()=>{const e=(0,o.useContext)(Ot);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e},Pt=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),Mt=/\p{White_Space}/u,It=/\p{P}/u,Dt=/\p{sc=Han}/u;function jt(e){return null!==e&&Mt.test(e)}function Ft(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||jt(e))}function Bt(e){return null!==e&&It.test(e)}function Ut(e){return null!==e&&Dt.test(e)}class Ht{constructor(e,t,n){if(t<0||n<0||t+n>e.length)throw new RangeError;this.data=e,this.offset=t,this.length=n,this.position=0}static from(e){const t=Array.from(e.normalize("NFC"));return new Ht(t,0,t.length)}toString(){return this.data.slice(this.offset,this.offset+this.length).join("")}slice(e=0,t=this.length){if(e<0||t>this.length)throw new RangeError;const n=this.offset+e,a=t-e;return new Ht(this.data,n,a)}nextCodePoint(){return this.position===this.length?null:this.data[this.offset+this.position++]}}function Vt(e){let t;do{t=e.nextCodePoint()}while(null!==t&&jt(t)||Bt(t));return t}function Wt(e,t){let n=Vt(e),a=Vt(t);if(null===a)return{offset:0,length:0};const s=e.offset+e.position-1;let i=e.offset+e.position;for(;;){if(null===n&&null===a)return{offset:s,length:i-s};if(null===a)return{offset:s,length:i-s};if(null===n)return null;if(0!==Pt.compare(n,a))return null;i=e.offset+e.position,n=Vt(e),a=Vt(t)}}function zt(e,t){let n,a,s;do{a=e.position,n=e.nextCodePoint()}while(null!==n&&jt(n));if(t?.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(n)){const t=n;a=e.position;do{s=e.position,n=e.nextCodePoint()}while(null!==n&&n!==t);return null===n&&a===s?null:e.slice(a,s)}do{if(s=e.position,t?.segmentCJKUnifieIdeographs&&Ut(n))break;n=e.nextCodePoint()}while(null!==n&&!Ft(n));return null===n&&a===s?null:e.slice(a,s)}function Gt(e){return zt(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function Kt(e){return zt(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function Yt(e,t){const n=[];for(let a=Kt(e);null!==a;a=Kt(e)){let s=Wt(a,t.slice());null===s?(s=Wt(e.slice(a.offset),t.slice()),null===s||n.push(s)):n.push(s)}return n}function Jt(e,t){return e.offset===t.offset&&e.length===t.length}const Xt=(e,t)=>"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==function(e,...t){const n=Ht.from(e),a=[];for(let e=Gt(n);null!==e;e=Gt(n)){const n=[];for(let a=0;a<t.length;++a){const s=t[a],i=Yt(Ht.from(s),e);for(const e of i)n.push({text:s,range:e})}if(0===n.length)return null;a.push(...n.filter(((e,t,n)=>e.range.length>0&&n.findIndex((t=>Jt(e.range,t.range)))===t)))}return a.length>0?a:null}(e,t):"boolean"!=typeof e||e;(0,n(8560).vt)((e=>({lastFilterState:"",lastFilteredUri:"",setLastState:(t,n)=>{e({lastFilterState:t,lastFilteredUri:n})}})));const $t=(0,o.createContext)({setFilter:()=>{throw new Error("setFilter must be used within a FilterProvider")},filter:""}),qt={section:"c6TyNYOUJRIsjYZJZofy",hidden:"V4Bh2Ch7KvYUdn2s9ZdX"};function Zt({children:e,filterMatchQuery:t}){const{filter:n}=(0,o.useContext)($t),{setSectionMatch:a,sectionContainsMatch:s}=Rt(),i=Xt(n,t);(0,o.useEffect)((()=>{a(i)}),[i,a]);const r=!i&&!s;return(0,L.jsx)("div",{className:Y()(qt.section,{[qt.hidden]:r}),children:e})}function Qt(e){return(0,L.jsx)(Tt,{children:(0,L.jsx)(Zt,{...e})})}var en=n(8891),tn=n(9438),nn=n.n(tn);const an={highlightedText:"M0E2Al6URHV3iyoDbvi_"};function sn({searchWords:e,textToHighlight:t,...n}){return 0===e.length||e.every((e=>!e))?(0,L.jsx)(L.Fragment,{children:t}):(0,L.jsx)(nn(),{highlightClassName:an.highlightedText,searchWords:e,textToHighlight:t,autoEscape:!0,...n})}function rn({children:e,className:t,semanticColor:n="textBase"}){const{filter:a}=(0,o.useContext)($t);return(0,L.jsx)(en.E,{as:"h2",variant:"bodyMediumBold",semanticColor:n,className:t,children:(0,L.jsx)(sn,{searchWords:[a],textToHighlight:e})})}const on="gvcgOXnAiNKEe_z92_lw";function ln({onClick:e}){return(0,L.jsx)(M.n,{className:on,onClick:e,children:v.get("settings.restartApp")})}const dn=(e,t,n)=>{let a=`${e}:${t}`;switch(n){case ut:a+="@http";break;case mt:a+="@socks4";break;case pt:a+="@socks5"}return a},cn=({addr:e,mode:t="0",pass:n,user:a,setValue:s,restartContainer:i,fullWidth:r})=>{const l=(0,o.useRef)(null),d=(0,o.useRef)(null),c=(0,o.useRef)(null),u=(0,o.useRef)(null),m=Number(t),[p,g]=(0,o.useState)(""),[h,f]=(0,o.useState)(""),[b,E]=(0,o.useState)(!1);(0,o.useEffect)((()=>{const[t,n]=e?.split(/[:@]+/)||["",""];g(t),f(n),l.current&&(l.current.value=t),d.current&&(d.current.value=n)}),[e]),(0,o.useEffect)((()=>{u.current&&n&&(u.current.value=n.toString())}),[n]),(0,o.useEffect)((()=>{c.current&&a&&(c.current.value=a.toString())}),[a]);const w=(0,o.useCallback)((({target:e})=>{const t=dn(e.value,h,m);g(e.value),s("network.proxy.addr",t),E(!0)}),[m,h,s]),y=(0,o.useCallback)((({target:e})=>{const t=dn(p,e.value,m);f(e.value),s("network.proxy.addr",t),E(!0)}),[m,p,s]),S=(0,o.useCallback)((({target:e})=>{s("network.proxy.user",e.value),E(!0)}),[s]),k=(0,o.useCallback)((({target:e})=>{s("network.proxy.pass",e.value),E(!0)}),[s]),A=0!==m&&1!==m,x=m!==mt;return(0,L.jsxs)(Qt,{filterMatchQuery:v.get("desktop.settings.proxy.title"),children:[(0,L.jsx)(rn,{children:v.get("desktop.settings.proxy.title")}),(0,L.jsxs)("div",{className:Y()(Et,r?wt:null),children:[(0,L.jsx)(kt,{label:v.get("desktop.settings.proxy.type"),children:(0,L.jsx)(Ct,{id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);s("network.proxy.mode",t),E(!0)},children:ht.map((({enumKey:e,enumValue:t})=>(0,L.jsx)("option",{value:t,"data-testid":e,children:gt[e]?gt[e].label():""},e)))})}),A?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:bt,children:[(0,L.jsx)(kt,{label:v.get("desktop.settings.proxy.host"),children:(0,L.jsx)(St,{id:"network.proxy.host",handleOnChange:w,placeHolder:v.get("desktop.settings.proxy.host"),inputRef:l})}),(0,L.jsx)(kt,{label:v.get("desktop.settings.proxy.port"),children:(0,L.jsx)(St,{id:"network.proxy.port",type:"number",handleOnChange:y,placeHolder:v.get("desktop.settings.proxy.port"),inputRef:d})})]}),(0,L.jsxs)("div",{className:x?bt:void 0,children:[(0,L.jsx)(kt,{label:v.get("desktop.settings.proxy.user"),children:(0,L.jsx)(St,{id:"network.proxy.user",handleOnChange:S,placeHolder:v.get("desktop.settings.proxy.user"),inputRef:c})}),x?(0,L.jsx)(kt,{label:v.get("desktop.settings.proxy.pass"),children:(0,L.jsx)(St,{id:"network.proxy.pass",handleOnChange:k,placeHolder:v.get("desktop.settings.proxy.pass"),type:"password",inputRef:u})}):null]})]}):null,b&&(0,L.jsx)("div",{children:(0,L.jsx)(ln,{onClick:i})})]})]})},un="sp://proxy/v1/";function mn(){const[e,t]=(0,o.useState)(null);(0,o.useEffect)((()=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:un}),persistent:!1,onSuccess:n=>{const a=JSON.parse(n);200!==a.status&&t(new Error(`Failed to fetch proxy settings (status code: ${a.status})`));const s=JSON.parse(a.body);e({mode:s["network.proxy.mode"],address:s["network.proxy.addr"],username:s["network.proxy.user"],password:s["network.proxy.pass"]})},onFailure:(e,n)=>{t(e)}})}))})().then(t)}),[t]);return{settings:e,updateSettings:(0,o.useCallback)((e=>{(async function(e){return new Promise(((t,n)=>{const a={"network.proxy.mode":e.mode};[ut,mt,pt].includes(e.mode)&&(a["network.proxy.addr"]=e.address,a["network.proxy.user"]=e.username),[ut,pt].includes(e.mode)&&(a["network.proxy.pass"]=e.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:un,body:JSON.stringify(a)}),persistent:!1,onSuccess:()=>{t()},onFailure:(e,t)=>{n(e)}})}))})(e).then((()=>t({...e})))}),[t])}}function pn(){return(0,o.useCallback)((()=>async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,n)=>{t(e)}})}))}()),[])}const gn="BuzoTjBZd1UqCn6DmFJr",hn="HKamyJi9H31s99erfVyG",fn=()=>(0,L.jsxs)("div",{className:hn,children:[(0,L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12px",width:"56px",x:"0px",y:"0px",viewBox:"0 0 1 100",xmlSpace:"preserve","data-testid":"loadingIcon",children:[(0,L.jsx)("circle",{className:gn,cx:"-140",cy:"50",r:"32"}),(0,L.jsx)("circle",{className:gn,cx:"0",cy:"50",r:"32"}),(0,L.jsx)("circle",{className:gn,cx:"140",cy:"50",r:"32"})]}),(0,L.jsx)("span",{className:"hidden-visually",children:v.get("page.loading")})]}),bn=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const En=()=>{const{settings:e,updateSettings:t}=mn(),n=pn(),a=(0,o.useCallback)(((n,a)=>{if(null!==e&&function(e){return!!bn.includes(e)}(n)){const s=e;switch(n){case"network.proxy.mode":s.mode=a;break;case"network.proxy.addr":s.address=a;break;case"network.proxy.user":s.username=a;break;case"network.proxy.pass":s.password=a}t(s)}return Promise.resolve()}),[e,t]);return(0,L.jsxs)("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings",children:[(0,L.jsx)("h1",{className:"HeroText",id:"settings-form-title",children:v.get("desktop.login.PreferencesLink")}),null!==e?(0,L.jsx)(cn,{mode:e.mode,addr:e.address,user:e.username,pass:e.password,setValue:a,restartContainer:n,fullWidth:!0}):(0,L.jsx)(fn,{})]})};var wn=n(2061);const yn=({toggleSettings:e,isOpen:t=!0})=>(0,L.jsx)(he,{className:U,isOpen:t,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:V,onRequestClose:e,"aria-label":v.get("desktop.login.PreferencesLink"),children:(0,L.jsxs)("div",{className:H,children:[(0,L.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""}),(0,L.jsx)(En,{}),(0,L.jsx)(wn.H,{size:"medium",semanticColor:"textBase",onClick:e,children:v.get("close")})]})}),vn=()=>"undefined"==typeof window;function Sn(e){return!vn()&&e instanceof HTMLElement}let kn;const An={subscribersByElement:new WeakMap,get resizeObserver(){return kn||(kn=new ResizeObserver((e=>{Array.isArray(e)&&e.forEach((t=>{const n={width:Math.round(t.contentRect.width),height:Math.round(t.contentRect.height)};(An.subscribersByElement.get(t.target)??new Set).forEach((a=>{a(n,t,e)}))}))}))),kn}};function xn({onResize:e,refOrElement:t,observeOnly:n,observeOnMount:a=!1}){const s=(0,o.useRef)(e);s.current=e;const i=(0,o.useRef)(n);i.current=n;const r=(0,o.useRef)({width:-1,height:-1}),l=(0,o.useCallback)(((e,t,n)=>{if(!s.current)return;const a=r.current.width!==e.width,o=r.current.height!==e.height;("width"===i.current&&a||"height"===i.current&&o||!i.current&&(a||o))&&s.current(e,t,n),r.current.width=e.width,r.current.height=e.height}),[]),d=function({refOrElement:e,subscriber:t}){let n=null;const a=(0,o.useRef)(null),s=(0,o.useRef)(null),i=(0,o.useRef)(null),r=(0,o.useRef)(),l=(0,o.useRef)(t);l.current=t;const d=(0,o.useCallback)((()=>{let t=null;s.current?t=s.current:a.current?t=a.current:Sn(e)&&(t=e),i.current!==t&&(r.current&&(r.current(),r.current=null),i.current=t,t&&l.current&&(r.current=l.current(t)))}),[e]),c=(0,o.useCallback)((e=>{s.current=e,d()}),[d]);return e&&!Sn(e)&&(n=e),(0,o.useEffect)((()=>{n&&(a.current=n.current),d()}),[n,n?.current,d]),(0,o.useEffect)((()=>()=>{r?.current?.()}),[]),c}({refOrElement:t,subscriber:e=>(a&&l({width:e.offsetWidth,height:e.offsetHeight},null,[]),An.subscribersByElement.has(e)||(An.resizeObserver.observe(e),An.subscribersByElement.set(e,new Set)),An.subscribersByElement.get(e)?.add(l),()=>{An.subscribersByElement.get(e)?.delete(l),0===An.subscribersByElement.get(e)?.size&&(An.resizeObserver.unobserve(e),An.subscribersByElement.delete(e))})});return d}function _n(e,t,n){const[a,s]=(0,o.useState)(),i=Object.entries(e).sort(((e,t)=>t[1]-e[1]));return{ref:xn({refOrElement:n,observeOnly:t,onResize:({[t]:e})=>{if(void 0===e)return;const n=i.find((([,t])=>e>=t)),r=n&&n[0];r&&r!==a&&s(r)}}),breakpoint:a}}var Ln=n(4603);class Nn{subscriptionId=null;subscription=null;constructor(e,t){this._watchdogClient=e,this._url=t,this.subscribeToWatchdog()}subscribeToWatchdog(){this.subscription=this._watchdogClient.subscribe({url:this._url},(e=>{0!==e.id?(this.subscriptionId=e.id,this.scheduleNextPing()):this.subscription?.cancel()}))}async pingWatchdog(){this.subscriptionId&&(await this._watchdogClient.ping({id:this.subscriptionId}),this.scheduleNextPing())}scheduleNextPing(){setTimeout((()=>{this.pingWatchdog()}),6e4)}}var Cn=n(9043);class On extends Error{constructor(){super("aborted")}}class Tn{constructor(e,t){this._onSend=e,this._onCancel=t}callSingle(e,{signal:t}={}){let n;return new Promise(((a,s)=>{const i=this.call(e,!1,a,s);t?.addEventListener("abort",n=()=>{i.cancel(),s(new On)})})).finally((()=>t?.removeEventListener("abort",n)))}callStream(e,t){return this.call(e,!0,t,(e=>{throw e}))}call(e,t,n,a){const s=this._onSend({request:JSON.stringify({method:t?"SUB":"POST",uri:(r=e.service,o=e.method,`sp://esperanto/${r}/${o}`),headers:{"Esperanto-Encoding":"base64"},body:(i=e.payload,Cn.util.base64.encode(i,0,i.length))}),persistent:t,onSuccess:t=>{const s=JSON.parse(t);if(200!==s.status)a(new Error(`${e.service}.${e.method} failed with ${s.status} ${s.body}`));else{const e=function(e){const t=new Uint8Array(Cn.util.base64.length(e));return Cn.util.base64.decode(e,t,0),t}(s.body);n(e)}},onFailure:(t,n)=>{a(new Error(`${e.service}.${e.method} failed with code: ${n}`))}});var i,r,o;const l=this._onCancel;return{cancel(){l(s)}}}}class Rn{constructor(e,t=0){this._output=e,this._offset=t,this._view=new DataView(this._output.buffer,this._output.byteOffset)}write(e){this._view.setInt32(this._offset,e.byteLength),this._output.set(e,this._offset+4),this._offset+=e.byteLength+4}}function Pn(e){const t=new TextEncoder,n=t.encode(e.service),a=t.encode(e.method),s=e.payload,i=new Uint8Array(4+n.byteLength+4+a.byteLength+4+s.byteLength),r=new Rn(i);return r.write(n),r.write(a),r.write(s),i.buffer}class Mn extends Error{constructor(){super("aborted")}}class In{constructor(e,t){this._onSend=e,this._onCancel=t}callSingle(e,{signal:t}={}){let n;return new Promise(((a,s)=>{const i=this.call(e,!1,a,s);t?.addEventListener("abort",n=()=>{i.cancel(),s(new Mn)})})).finally((()=>t?.removeEventListener("abort",n)))}callStream(e,t){return this.call(e,!0,t,(e=>{throw e}))}call(e,t,n,a){const s=this._onSend({request:Pn(e),persistent:t,onSuccess:t=>{t instanceof ArrayBuffer?n(new Uint8Array(t)):a(new Error(`${e.service}.${e.method} failed with invalid payload!`))},onFailure:(t,n)=>{a(new Error(`${e.service}.${e.method} failed with code: ${n}`))}}),i=this._onCancel;return{cancel(){i(s)}}}}function Dn({isDirectTransportEnabled:e}){return e?function(){const e=n.g.window||{};return new In(e.executeEsperantoCall,e.cancelEsperantoCall)}():function(){const e=n.g.window||{};return new Tn(e.sendCosmosRequest,e.cancelCosmosRequest)}()}async function jn(){return new Promise(((e,t)=>{const n=JSON.stringify({type:"view_loaded",name:"/loginUI",innerWidth:window.innerWidth,innerHeight:window.innerHeight});window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://messages/v1/container/control",body:n}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,n)=>{t(e)}});const a=Dn({isDirectTransportEnabled:!1});var s,i;s=a,i="/loginUI",new Nn(new Ln.NH(s),i)}))}const Fn=()=>{const{logger:e,pageviewActionHash:t}=De();(0,o.useEffect)((()=>{jn()}),[]),(0,o.useEffect)((()=>{t&&e.logPageView({page:"auth-on-web",actionHash:t})}),[e,t]);const n=(0,o.useRef)(!0),a=(0,o.useRef)(!0),s=(0,o.useRef)(!0),i=(0,o.useRef)(null),[r,l]=(0,o.useState)(!1),[d,c]=(0,o.useState)(0),{breakpoint:u}=_n({[I.SMALL]:0,[I.MEDIUM]:1024,[I.LARGE]:1600},"width",i);const{breakpoint:m}=function(e,t){return _n(e,"height",t)}({[I.SMALL]:0,[I.MEDIUM]:800,[I.LARGE]:1200},i),p=(0,o.useCallback)((()=>{l(!r)}),[r]),g=lt.includes(v.getLocaleForTranslation().valueOf())?v.getLocaleForTranslation().valueOf():"en",h=[{backgroundImage:(0,L.jsx)(ct,{fadeInRef:n}),titleStrings:[v.get("desktop-auth.login.millions-of-songs"),v.get("desktop-auth.login.free-on-spotify")],titleVariants:{[I.SMALL]:"brio",[I.MEDIUM]:"forte",[I.LARGE]:"bass"}},{backgroundImage:(0,L.jsx)(Qe,{imageLocale:g,fadeInRef:a}),titleStrings:[v.get("desktop-auth.login.collect-and-create")],titleVariants:{[I.SMALL]:"alto",[I.MEDIUM]:"brio",[I.LARGE]:"forte"}},{backgroundImage:(0,L.jsx)(et,{imageLocale:g,fadeInRef:s}),titleStrings:[v.get("desktop-auth.login.perfect-work-environment")],titleVariants:{[I.SMALL]:"alto",[I.MEDIUM]:"brio",[I.LARGE]:"forte"}}];return(0,L.jsx)(R.K,{children:(0,L.jsx)("div",{className:C,ref:i,"data-testid":"new-login",children:(0,L.jsxs)("main",{className:O,children:[(0,L.jsxs)("div",{className:T,children:[(0,L.jsx)(N,{toggleSettings:p}),(0,L.jsx)(Be,{titleStrings:h[d].titleStrings,titleVariants:h[d].titleVariants,widthBreakpoint:u,heightBreakpoint:m})]}),(0,L.jsx)(Je,{nrSteps:h.length,atStep:d,navigate:c,backgroundImage:h[d].backgroundImage}),r&&(0,L.jsx)(yn,{toggleSettings:p})]})})})},Bn="H5vfurs7KNEs9Io5DUA7",Un="qfBRU_bttJde7gy46oAB",Hn="ypTrzM1PtlrZp04qs6Eq",Vn="oHZmDpK0SrWDaXhPjUtC",Wn="lAHowB9HYfAUrg9UaSde",zn=function({showSettings:e}){const{logger:t,pageviewActionHash:n}=De();(0,o.useEffect)((()=>{n&&t.logPageView({page:"auth-on-web",actionHash:n})}),[t,n]);const{handleLoginOrSignupClick:a,handleTryAgainClick:s,isWaitingForBrowser:i,isSigningUp:r,errorMessage:c}=Fe();return(0,L.jsx)("main",{"data-testid":"login",children:i?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(P.Z,{as:"h1",variant:"alto",semanticColor:"textBase",className:Bn,children:r?v.get("desktop-auth.login.go-to-browser-signup"):v.get("desktop-auth.login.go-to-browser-login")}),(0,L.jsxs)("button",{className:Hn,onClick:s,children:[(0,L.jsx)(P.Z,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:v.get("desktop-auth.login.not-seeing-browser")})," ",(0,L.jsx)(P.Z,{as:"span",variant:"balladBold",semanticColor:"textBase",children:v.get("desktop-auth.login.try-again")})]})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(P.Z,{as:"h1",variant:"alto",semanticColor:"textBase",className:Bn,children:[v.get("desktop-auth.login.millions-of-songs"),(0,L.jsx)("br",{}),v.get("desktop-auth.login.free-on-spotify")]}),c&&(0,L.jsxs)("div",{className:Vn,role:"alert",onClick:t=>{if(t.currentTarget.getAttribute("data-action")){"showSettings"===t.currentTarget.getAttribute("data-action")&&e()}},"aria-live":"assertive",children:[(0,L.jsx)(B.b,{className:Wn}),(0,L.jsx)("span",{dangerouslySetInnerHTML:{__html:c}})]}),(0,L.jsx)(l.$,{onClick:()=>{a(!1)},iconTrailing:d.H,"data-testid":"login-button",children:v.get("desktop-auth.login.log-in-with-browser")}),(0,L.jsxs)("button",{className:Un,onClick:()=>{a(!0)},children:[(0,L.jsx)(P.Z,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:v.get("desktop-auth.login.new-to-spotify")}),(0,L.jsx)(P.Z,{as:"span",variant:"balladBold",semanticColor:"textBase",children:v.get("desktop-auth.login.sign-up-with-browser")}),(0,L.jsx)(d.H,{iconSize:16,semanticColor:"textBase"})]})]})})},Gn=({mode:e,showLogin:t,showSettings:n})=>{const{logger:a}=De();return(0,L.jsx)("footer",{className:"Footer",role:"contentinfo",children:"settings"===e?(0,L.jsx)("a",{className:"Footer__link",href:"#",onClick:()=>{a.logAction({page:"settings",action_type:"click",action_intent:"back-to-login"}),t()},"data-ta-id":"login-footer-settings-back-to-login",children:v.get("desktop.login.Back")}):(0,L.jsx)("a",{className:"Footer__link",href:"#",onClick:()=>{a.logAction({page:"settings",action_type:"click",action_intent:"open-page-settings"}),n()},"data-ta-id":"login-footer-settings",children:v.get("desktop.login.PreferencesLink")})})},Kn=()=>(0,L.jsxs)("header",{className:"Header",children:[(0,L.jsx)("h1",{className:"hidden-visually",children:"Spotify"}),(0,L.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""})]});var Yn=n(7482),Jn=n(594);const Xn=({initialMode:e="login"})=>{const[t,n]=(0,o.useState)(e),a=function(e){const t=(0,o.useRef)();return(0,o.useEffect)((()=>{t.current=e}),[e]),t.current}(t),{logger:s}=De();(0,o.useEffect)((()=>{jn()}),[]),(0,o.useEffect)((()=>{"login"===t?s.logPageView({page:"login"}):"settings"===t&&s.logPageView({page:"login/settings"})}),[t,s]);const i=a?`__${t} __${a}-to-${t}`:"",r=()=>n("settings");return(0,L.jsxs)("main",{className:"App","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":t,children:[(0,L.jsxs)("div",{className:"fakeWebPlayer",children:[(0,L.jsx)("aside",{}),(0,L.jsxs)("footer",{children:[(0,L.jsx)("div",{className:"fakeWebPlayer__footer-left"}),(0,L.jsx)("div",{className:"fakeWebPlayer__footer-center"}),(0,L.jsx)("div",{className:"fakeWebPlayer__footer-right"})]}),(0,L.jsx)("main",{children:(0,L.jsx)("div",{className:"fakeWebPlayer__content"})})]}),(0,L.jsx)("div",{className:`App__content ${i}`,children:(0,L.jsx)(Jn.A,{mode:"in-out",children:(0,L.jsx)(Yn.A,{timeout:{appear:0,enter:0,exit:650},children:(0,L.jsxs)("div",{className:`App__modal ${i}`,children:[(0,L.jsx)(Kn,{}),"settings"===t?(0,L.jsx)(En,{}):(0,L.jsx)(zn,{showSettings:r}),(0,L.jsx)(Gn,{mode:t,showLogin:()=>n("login"),showSettings:r})]})},i)})})]},"main1")},$n=({initialMode:e})=>{const t=(0,s.NC)(r);return(0,L.jsx)(L.Fragment,{children:t?(0,L.jsx)(Fn,{}):(0,L.jsx)(Xn,{initialMode:e})})};var qn=n(5644),Zn=n(123),Qn=n(5576);let ea=function(e){return e.Web="Web",e.PWA="PWA",e.Desktop="Desktop",e}({}),ta=function(e){return e.macOS="macOS",e.Windows="Windows",e.Linux="Linux",e.ChromeOS="ChromeOS",e.Other="Other",e}({});const na={BROWSER_EDGE:"spotify__browser--is-edge",BROWSER_SAFARI:"spotify__browser--is-safari",OS_MACOS:"spotify__os--is-macos",OS_WINDOWS:"spotify__os--is-windows",OS_LINUX:"spotify__os--is-linux",OS_CHROMEOS:"spotify__os--is-chromeos",CONTAINER_DESKTOP:"spotify__container--is-desktop",CONTAINER_PWA:"spotify__container--is-pwa",CONTAINER_WEB:"spotify__container--is-web"};function aa(e,t){var n;n=Object.values(na),document.documentElement.classList.remove(...n);const a=[];"Microsoft Edge"===xt().parse(window.navigator.userAgent).browser.name?a.push(na.BROWSER_EDGE):_t()&&a.push(na.BROWSER_SAFARI),t===ta.macOS?a.push(na.OS_MACOS):t===ta.Windows?a.push(na.OS_WINDOWS):t===ta.Linux?a.push(na.OS_LINUX):t===ta.ChromeOS&&a.push(na.OS_CHROMEOS),e===ea.Desktop?a.push(na.CONTAINER_DESKTOP):e===ea.PWA?a.push(na.CONTAINER_PWA):e===ea.Web&&a.push(na.CONTAINER_WEB),function(e){e.forEach((e=>{document.documentElement.classList.add(e)}))}(a)}var sa=n(4131);const ia=(e,t)=>{const n=e.event_sender_context_information;return[(0,sa.QI)({version_code:n.client_version_int,version_string:n.client_version_string}),(0,sa.ks)(t),(0,sa.xB)(n.installation_id),(0,sa.es)({device_id:n.device_id,device_manufacturer:n.device_manufacturer,device_model:n.device_model,os_version:n.os_version,platform_type:n.platform_type})]},ra=/Spotify\/(?<version>.+)\s/;function oa(){if(!!window.navigator.userAgent.match(ra))return ea.Desktop;const e="serviceWorker"in window.navigator,t=window.matchMedia("(display-mode: standalone)").matches,n="Windows"in window;return e&&(t||n)?ea.PWA:ea.Web}var la=n(4596);const da=/Spotify\/(?<version>.+)\s/;function ca(){const e=window.navigator.userAgent.match(da);return e?.groups?.version||"unknown"}(0,Qn.Cd)(),async function(){for(const e of[window.__spotify.locale,E.en])try{const t=await fetch(`i18n/${e}.json`).then((e=>e.json()));return void v.initialize({localeForTranslation:e,localeForFormatting:navigator.language,translations:t})}catch(e){0}throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.")}().then((async function(){aa(oa(),function(){const e=xt().parse(window.navigator.userAgent).os.name;return"macOS"===e?ta.macOS:"Windows"===e?ta.Windows:"Linux"===e?ta.Linux:"Chrome OS"===e?ta.ChromeOS:ta.Other}());const e=function(){const e=(0,la.ZA)({providers:{endpoints:(0,la.u6)(),token:()=>Promise.reject()}});return e.connect(),e}(),t="65b708073fc0480ea92a077233ca87bd",n=((e,t,n,a,s,i)=>(0,sa.kE)({transport:t,suppressPersist:!1,context:ia(e,n),storagePrefix:s,ownerProvider:a,useOptimizedESS2NA:i}))(window.__spotify,e,t,(()=>null),`${t}-loginui`,!1),i=window.__spotify&&window.__spotify.locale;i&&document.documentElement.setAttribute("lang",i);const r=Zn.HZ.addMiddleware(qn.F);(0,a.H)(document.getElementById("main")).render((0,L.jsx)(s.PE,{resolver:r,context:{username:null},options:{clientId:"client-desktop-ui-app-login",timeout:5e3,transport:e,eventSender:n,version:ca(),sp_t_cookie:window.__spotify.event_sender_context_information?.installation_id},children:(0,L.jsx)(Ie,{eventSender:n,children:(0,L.jsx)(o.Suspense,{fallback:null,children:(0,L.jsx)($n,{})})})})),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr"),(0,Qn.Lj)("UI init phase is done for login")}))},4758:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}}},n={};function a(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,e=[],a.O=(t,n,s,i)=>{if(!n){var r=1/0;for(c=0;c<e.length;c++){for(var[n,s,i]=e[c],o=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(o=!1,i<r&&(r=i));if(o){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,s,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={966:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var s,i,[r,o,l]=n,d=0;if(r.some((t=>0!==e[t]))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)var c=l(a)}for(t&&t(n);d<r.length;d++)i=r[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var s=a.O(void 0,[452],(()=>a(4437)));s=a.O(s)})();
//# sourceMappingURL=login.js.map